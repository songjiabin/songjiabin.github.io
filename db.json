{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"source/CNAME","path":"CNAME","modified":0,"renderable":0},{"_id":"themes/next/source/about/index.html","path":"about/index.html","modified":0,"renderable":1},{"_id":"themes/next/source/css/main.styl","path":"css/main.styl","modified":0,"renderable":1},{"_id":"themes/next/source/images/algolia_logo.svg","path":"images/algolia_logo.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/apple-touch-icon-next.png","path":"images/apple-touch-icon-next.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/avatar.gif","path":"images/avatar.gif","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","path":"images/cc-by-nc-sa.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","path":"images/cc-by-nc-nd.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-sa.svg","path":"images/cc-by-sa.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nd.svg","path":"images/cc-by-nd.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/favicon-16x16-next.png","path":"images/favicon-16x16-next.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by.svg","path":"images/cc-by.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/loading.gif","path":"images/loading.gif","modified":0,"renderable":1},{"_id":"themes/next/source/images/favicon-32x32-next.png","path":"images/favicon-32x32-next.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-zero.svg","path":"images/cc-zero.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/placeholder.gif","path":"images/placeholder.gif","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc.svg","path":"images/cc-by-nc.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/searchicon.png","path":"images/searchicon.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/quote-l.svg","path":"images/quote-l.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/logo.svg","path":"images/logo.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/iv_image.jpg","path":"images/iv_image.jpg","modified":0,"renderable":1},{"_id":"themes/next/source/images/quote-r.svg","path":"images/quote-r.svg","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/bootstrap.js","path":"js/src/bootstrap.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/algolia-search.js","path":"js/src/algolia-search.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/affix.js","path":"js/src/affix.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/hook-duoshuo.js","path":"js/src/hook-duoshuo.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/exturl.js","path":"js/src/exturl.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/motion.js","path":"js/src/motion.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/js.cookie.js","path":"js/src/js.cookie.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/scroll-cookie.js","path":"js/src/scroll-cookie.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/scrollspy.js","path":"js/src/scrollspy.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/utils.js","path":"js/src/utils.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/post-details.js","path":"js/src/post-details.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/algolia-instant-search/instantsearch.min.css","path":"lib/algolia-instant-search/instantsearch.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fastclick/LICENSE","path":"lib/fastclick/LICENSE","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fastclick/bower.json","path":"lib/fastclick/bower.json","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fastclick/README.md","path":"lib/fastclick/README.md","modified":0,"renderable":1},{"_id":"themes/next/source/lib/canvas-ribbon/canvas-ribbon.js","path":"lib/canvas-ribbon/canvas-ribbon.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/HELP-US-OUT.txt","path":"lib/font-awesome/HELP-US-OUT.txt","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/bower.json","path":"lib/font-awesome/bower.json","modified":0,"renderable":1},{"_id":"themes/next/source/lib/canvas-nest/canvas-nest.min.js","path":"lib/canvas-nest/canvas-nest.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/CONTRIBUTING.md","path":"lib/jquery_lazyload/CONTRIBUTING.md","modified":0,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/bower.json","path":"lib/jquery_lazyload/bower.json","modified":0,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/README.md","path":"lib/jquery_lazyload/README.md","modified":0,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/jquery.lazyload.js","path":"lib/jquery_lazyload/jquery.lazyload.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/jquery.scrollstop.js","path":"lib/jquery_lazyload/jquery.scrollstop.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/needsharebutton/needsharebutton.css","path":"lib/needsharebutton/needsharebutton.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/needsharebutton/font-embedded.css","path":"lib/needsharebutton/font-embedded.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/needsharebutton/needsharebutton.js","path":"lib/needsharebutton/needsharebutton.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-barber-shop.min.css","path":"lib/pace/pace-theme-barber-shop.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-big-counter.min.css","path":"lib/pace/pace-theme-big-counter.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-bounce.min.css","path":"lib/pace/pace-theme-bounce.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-center-atom.min.css","path":"lib/pace/pace-theme-center-atom.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-center-radar.min.css","path":"lib/pace/pace-theme-center-radar.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-center-circle.min.css","path":"lib/pace/pace-theme-center-circle.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-fill-left.min.css","path":"lib/pace/pace-theme-fill-left.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-center-simple.min.css","path":"lib/pace/pace-theme-center-simple.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-corner-indicator.min.css","path":"lib/pace/pace-theme-corner-indicator.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-minimal.min.css","path":"lib/pace/pace-theme-minimal.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-flash.min.css","path":"lib/pace/pace-theme-flash.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-loading-bar.min.css","path":"lib/pace/pace-theme-loading-bar.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-mac-osx.min.css","path":"lib/pace/pace-theme-mac-osx.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace.min.js","path":"lib/pace/pace.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/three/canvas_lines.min.js","path":"lib/three/canvas_lines.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/three/canvas_sphere.min.js","path":"lib/three/canvas_sphere.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/three/three-waves.min.js","path":"lib/three/three-waves.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/bower.json","path":"lib/velocity/bower.json","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.min.js","path":"lib/velocity/velocity.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.ui.js","path":"lib/velocity/velocity.ui.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.ui.min.js","path":"lib/velocity/velocity.ui.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/jquery/index.js","path":"lib/jquery/index.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/han.css","path":"lib/Han/dist/han.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/han.min.css","path":"lib/Han/dist/han.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/han.min.js","path":"lib/Han/dist/han.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/schemes/pisces.js","path":"js/src/schemes/pisces.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/blank.gif","path":"lib/fancybox/source/blank.gif","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fastclick/lib/fastclick.js","path":"lib/fastclick/lib/fastclick.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_overlay.png","path":"lib/fancybox/source/fancybox_overlay.png","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_sprite.png","path":"lib/fancybox/source/fancybox_sprite.png","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_sprite@2x.png","path":"lib/fancybox/source/fancybox_sprite@2x.png","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_loading.gif","path":"lib/fancybox/source/fancybox_loading.gif","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fastclick/lib/fastclick.min.js","path":"lib/fastclick/lib/fastclick.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_loading@2x.gif","path":"lib/fancybox/source/fancybox_loading@2x.gif","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.css","path":"lib/fancybox/source/jquery.fancybox.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.js","path":"lib/fancybox/source/jquery.fancybox.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.pack.js","path":"lib/fancybox/source/jquery.fancybox.pack.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css","path":"lib/font-awesome/css/font-awesome.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css.map","path":"lib/font-awesome/css/font-awesome.css.map","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.min.css","path":"lib/font-awesome/css/font-awesome.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.min.js","path":"lib/ua-parser-js/dist/ua-parser.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.pack.js","path":"lib/ua-parser-js/dist/ua-parser.pack.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/han.js","path":"lib/Han/dist/han.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff2","path":"lib/font-awesome/fonts/fontawesome-webfont.woff2","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.js","path":"lib/velocity/velocity.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff","path":"lib/font-awesome/fonts/fontawesome-webfont.woff","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/font/han-space.otf","path":"lib/Han/dist/font/han-space.otf","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/font/han-space.woff","path":"lib/Han/dist/font/han-space.woff","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/font/han.woff","path":"lib/Han/dist/font/han.woff","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/font/han.woff2","path":"lib/Han/dist/font/han.woff2","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/font/han.otf","path":"lib/Han/dist/font/han.otf","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/fancybox_buttons.png","path":"lib/fancybox/source/helpers/fancybox_buttons.png","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-buttons.css","path":"lib/fancybox/source/helpers/jquery.fancybox-buttons.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-buttons.js","path":"lib/fancybox/source/helpers/jquery.fancybox-buttons.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-media.js","path":"lib/fancybox/source/helpers/jquery.fancybox-media.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-thumbs.css","path":"lib/fancybox/source/helpers/jquery.fancybox-thumbs.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-thumbs.js","path":"lib/fancybox/source/helpers/jquery.fancybox-thumbs.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/FontAwesome.otf","path":"lib/font-awesome/fonts/FontAwesome.otf","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.eot","path":"lib/font-awesome/fonts/fontawesome-webfont.eot","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.ttf","path":"lib/font-awesome/fonts/fontawesome-webfont.ttf","modified":0,"renderable":1},{"_id":"themes/next/source/images/background.jpg","path":"images/background.jpg","modified":0,"renderable":1},{"_id":"themes/next/source/lib/algolia-instant-search/instantsearch.min.js","path":"lib/algolia-instant-search/instantsearch.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/three/three.min.js","path":"lib/three/three.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.svg","path":"lib/font-awesome/fonts/fontawesome-webfont.svg","modified":0,"renderable":1}],"Cache":[{"_id":"source/CNAME","hash":"2a171ea6a716d6371a7c03dad935c5d1b9eb06d4","modified":1534299109870},{"_id":"themes/next/.editorconfig","hash":"211d2c92bfdddb3e81ea946f4ca7a539f150f4da","modified":1524473198817},{"_id":"themes/next/.bowerrc","hash":"334da94ca6f024d60d012cc26ea655681e724ad8","modified":1524473198815},{"_id":"themes/next/.gitattributes","hash":"8454b9313cb1a97b63fb87e2d29daee497ce6249","modified":1524473198819},{"_id":"themes/next/.gitignore","hash":"ee0b13c268cc8695d3883a5da84930af02d4ed08","modified":1524473198829},{"_id":"themes/next/.hound.yml","hash":"289dcf5bfe92dbd680d54d6e0668f41c9c9c0c78","modified":1524473198830},{"_id":"themes/next/.javascript_ignore","hash":"cd250ad74ca22bd2c054476456a73d9687f05f87","modified":1524473198832},{"_id":"themes/next/.jshintrc","hash":"b7d23f2ce8d99fa073f22f9960605f318acd7710","modified":1524473198833},{"_id":"themes/next/LICENSE","hash":"ec44503d7e617144909e54533754f0147845f0c5","modified":1524473198839},{"_id":"themes/next/.stylintrc","hash":"3b7f9785e9ad0dab764e1c535b40df02f4ff5fd6","modified":1524473198835},{"_id":"themes/next/.travis.yml","hash":"6674fbdfe0d0c03b8a04527ffb8ab66a94253acd","modified":1524473198837},{"_id":"themes/next/_config.yml","hash":"79e2347e2cbb50f1709c173558e857288522c0f1","modified":1534469429761},{"_id":"themes/next/README.cn.md","hash":"23e92a2599725db2f8dbd524fbef2087c6d11c7b","modified":1524473198841},{"_id":"themes/next/bower.json","hash":"486ebd72068848c97def75f36b71cbec9bb359c5","modified":1524473198846},{"_id":"themes/next/README.md","hash":"50abff86ffe4113051a409c1ed9261195d2aead0","modified":1524473198843},{"_id":"themes/next/gulpfile.coffee","hash":"412defab3d93d404b7c26aaa0279e2e586e97454","modified":1524473198848},{"_id":"themes/next/_config.yml.bak","hash":"b38b9d90a0490b62674215652f89e98a885f3f08","modified":1524824767986},{"_id":"themes/next/package.json","hash":"3963ad558a24c78a3fd4ef23cf5f73f421854627","modified":1524473199023},{"_id":"source/_posts/仿照微博折叠效果.md","hash":"21c4edecd28d253769186eaf68032f6e00fadcb3","modified":1534412202901},{"_id":"source/_posts/popularWindow.md","hash":"f93574e94639ac924af011eb47639fc332c7173f","modified":1534401361092},{"_id":"source/_posts/熟悉使用ToolBar.md","hash":"30e1553b2e48051a38be7a8653c7769ed5306e51","modified":1534224673085},{"_id":"source/tags/index.md","hash":"a1d54895e6fb7a484cc3f0c5b6dadde8127f73df","modified":1524824302455},{"_id":"source/floder/index.md","hash":"5a75e3218d637c1b075c14293e322ce182cc3d02","modified":1524472747300},{"_id":"themes/next/.github/CONTRIBUTING.md","hash":"5adfad3ef1b870063e621bc0838268eb2c7c697a","modified":1524473198821},{"_id":"themes/next/.github/PULL_REQUEST_TEMPLATE.md","hash":"1228506a940114288d61812bfe60c045a0abeac1","modified":1524473198825},{"_id":"themes/next/.github/browserstack_logo.png","hash":"a6c43887f64a7f48a2814e3714eaa1215e542037","modified":1524473198827},{"_id":"themes/next/.github/ISSUE_TEMPLATE.md","hash":"a0a82dbfabdef9a9d7c17a08ceebfb4052d98d81","modified":1524473198824},{"_id":"themes/next/a/122.txt","hash":"0da8f47ca383eeb607fcbba98cb5c01d49c20bbe","modified":1534470242129},{"_id":"themes/next/languages/default.yml","hash":"b3bcd8934327448a43d9bfada5dd11b1b8c1402e","modified":1524473198852},{"_id":"themes/next/languages/de.yml","hash":"fd02d9c2035798d5dc7c1a96b4c3e24b05b31a47","modified":1524473198850},{"_id":"themes/next/languages/id.yml","hash":"dccae33e2a5b3c9f11c0e05ec4a7201af1b25745","modified":1524473198857},{"_id":"themes/next/languages/fr-FR.yml","hash":"efeeb55d5c4add54ad59a612fc0630ee1300388c","modified":1524473198855},{"_id":"themes/next/languages/it.yml","hash":"a215d016146b1bd92cef046042081cbe0c7f976f","modified":1524473198859},{"_id":"themes/next/languages/ja.yml","hash":"37f954e47a3bc669620ca559e3edb3b0072a4be5","modified":1524473198860},{"_id":"themes/next/languages/en.yml","hash":"2f4b4776ca1a08cc266a19afb0d1350a3926f42c","modified":1524473198854},{"_id":"themes/next/languages/ko.yml","hash":"dc8f3e8c64eb7c4bb2385025b3006b8efec8b31d","modified":1524473198862},{"_id":"themes/next/languages/nl-NL.yml","hash":"213e7a002b82fb265f69dabafbbc382cfd460030","modified":1524473198864},{"_id":"themes/next/languages/pt-BR.yml","hash":"568d494a1f37726a5375b11452a45c71c3e2852d","modified":1524473198866},{"_id":"themes/next/languages/pt.yml","hash":"2efcd240c66ab1a122f061505ca0fb1e8819877b","modified":1524473198868},{"_id":"themes/next/languages/vi.yml","hash":"a9b89ebd3e5933033d1386c7c56b66c44aca299a","modified":1524473198871},{"_id":"themes/next/languages/ru.yml","hash":"e33ee44e80f82e329900fc41eb0bb6823397a4d6","modified":1524473198869},{"_id":"themes/next/languages/zh-Hans.yml","hash":"77a928d447d33e47bbc5376e2f12863a4336a4e8","modified":1534149533916},{"_id":"themes/next/languages/zh-hk.yml","hash":"fe0d45807d015082049f05b54714988c244888da","modified":1524473198874},{"_id":"themes/next/languages/zh-tw.yml","hash":"432463b481e105073accda16c3e590e54c8e7b74","modified":1524473198876},{"_id":"themes/next/layout/_layout.swig","hash":"2164570bb05db11ee4bcfbbb5d183a759afe9d07","modified":1524473198883},{"_id":"themes/next/layout/category.swig","hash":"3cbb3f72429647411f9e85f2544bdf0e3ad2e6b2","modified":1524473199013},{"_id":"themes/next/layout/index.swig","hash":"555a357ecf17128db4e29346c92bb6298e66547a","modified":1524473199014},{"_id":"themes/next/layout/archive.swig","hash":"9a2c14874a75c7085d2bada5e39201d3fc4fd2b4","modified":1524473199011},{"_id":"themes/next/layout/page.swig","hash":"e8fcaa641d46930237675d2ad4b56964d9e262e9","modified":1524473199016},{"_id":"themes/next/scripts/merge-configs.js","hash":"38d86aab4fc12fb741ae52099be475196b9db972","modified":1524473199026},{"_id":"themes/next/scripts/merge.js","hash":"39b84b937b2a9608b94e5872349a47200e1800ff","modified":1524473199028},{"_id":"themes/next/layout/schedule.swig","hash":"87ad6055df01fa2e63e51887d34a2d8f0fbd2f5a","modified":1524473199019},{"_id":"themes/next/layout/post.swig","hash":"7a6ce102ca82c3a80f776e555dddae1a9981e1ed","modified":1524473199018},{"_id":"themes/next/layout/tag.swig","hash":"34e1c016cbdf94a31f9c5d494854ff46b2a182e9","modified":1524473199022},{"_id":"themes/next/test/.jshintrc","hash":"c9fca43ae0d99718e45a6f5ce736a18ba5fc8fb6","modified":1524473199521},{"_id":"themes/next/test/helpers.js","hash":"f25e7f3265eb5a6e1ccbb5e5012fa9bebf134105","modified":1524473199524},{"_id":"themes/next/test/intern.js","hash":"db90b1063356727d72be0d77054fdc32fa882a66","modified":1524473199526},{"_id":"themes/next/source/fonts/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1524473199260},{"_id":"themes/next/layout/_custom/header.swig","hash":"ba8ab5a0280b953aa97435ff8946cbcbb2755a27","modified":1524473198880},{"_id":"themes/next/layout/_custom/sidebar.swig","hash":"ba8ab5a0280b953aa97435ff8946cbcbb2755a27","modified":1524473198881},{"_id":"themes/next/layout/_partials/comments.swig","hash":"4adc65a602d1276615da3b887dcbf2ac68e7382b","modified":1524473198897},{"_id":"themes/next/layout/_partials/footer.swig","hash":"26e93336dc57a39590ba8dc80564a1d2ad5ff93b","modified":1524473198900},{"_id":"themes/next/layout/_partials/page-header.swig","hash":"77c61e0baea3544df361b7338c3cd13dc84dde22","modified":1524473198909},{"_id":"themes/next/layout/_partials/pagination.swig","hash":"1634fb887842698e01ff6e632597fe03c75d2d01","modified":1524473198911},{"_id":"themes/next/layout/_partials/head.swig","hash":"78fe43059032b5d8834afa3063f4c44fd2b14860","modified":1534149251500},{"_id":"themes/next/layout/_partials/header.swig","hash":"c54b32263bc8d75918688fb21f795103b3f57f03","modified":1524473198908},{"_id":"themes/next/layout/_partials/search.swig","hash":"b4ebe4a52a3b51efe549dd1cdee846103664f5eb","modified":1524473198913},{"_id":"themes/next/layout/_macro/my-copyright.swig","hash":"d7421e23d9ceb2065ec7fe5cdbd8f4a879480067","modified":1534148543947},{"_id":"themes/next/layout/_macro/post-copyright.swig","hash":"f83befdc740beb8dc88805efd7fbb0fef9ed19be","modified":1524473198887},{"_id":"themes/next/layout/_macro/post-collapse.swig","hash":"8c56dd26157cbc580ae41d97ac34b90ab48ced3f","modified":1524473198885},{"_id":"themes/next/layout/_scripts/boostrap.swig","hash":"c0f5a0955f69ca4ed9ee64a2d5f8aa75064935ad","modified":1524473198929},{"_id":"themes/next/layout/_scripts/commons.swig","hash":"931808ad9b8d8390c0dcf9bdeb0954eeb9185d68","modified":1524473198931},{"_id":"themes/next/layout/_macro/wechat-subscriber.swig","hash":"e2e4eae391476da994045ed4c7faf5e05aca2cd7","modified":1524473198894},{"_id":"themes/next/layout/_macro/reward.swig","hash":"357d86ec9586705bfbb2c40a8c7d247a407db21a","modified":1524473198891},{"_id":"themes/next/layout/_macro/sidebar.swig","hash":"53de589b2dbe0e1a84d28367e59e7815e53dbfc4","modified":1534145429036},{"_id":"themes/next/layout/_macro/post.swig","hash":"7cd30b5a3ad7123c1b9c10c482754bd42115231c","modified":1534149469795},{"_id":"themes/next/layout/_scripts/vendors.swig","hash":"9be624634703be496a5d2535228bc568a8373af9","modified":1524473198942},{"_id":"themes/next/layout/_third-party/duoshuo-hot-articles.swig","hash":"ba75672183d94f1de7c8bd0eeee497a58c70e889","modified":1524473198985},{"_id":"themes/next/layout/_third-party/mathjax.swig","hash":"a0bd3388587fd943baae0d84ca779a707fbcad89","modified":1524473198988},{"_id":"themes/next/layout/_third-party/needsharebutton.swig","hash":"fa882641da3bd83d9a58a8a97f9d4c62a9ee7b5c","modified":1524473198991},{"_id":"themes/next/layout/_third-party/exturl.swig","hash":"8301c9600bb3e47f7fb98b0e0332ef3c51bb1688","modified":1524473198987},{"_id":"themes/next/layout/_third-party/scroll-cookie.swig","hash":"9a188938d46931d5f3882a140aa1c48b3a893f0c","modified":1524473198996},{"_id":"themes/next/layout/_third-party/rating.swig","hash":"554ec568e9d2c71e4a624a8de3cb5929050811d6","modified":1524473198993},{"_id":"themes/next/layout/_third-party/schedule.swig","hash":"db15d7e1552aa2d2386a6b8a33b3b3a40bf9e43d","modified":1524473198995},{"_id":"themes/next/scripts/tags/center-quote.js","hash":"99b66949f18398689b904907af23c013be1b978f","modified":1524473199032},{"_id":"themes/next/scripts/tags/button.js","hash":"eddbb612c15ac27faf11c59c019ce188f33dec2c","modified":1524473199030},{"_id":"themes/next/scripts/tags/full-image.js","hash":"c9f833158c66bd72f627a0559cf96550e867aa72","modified":1524473199035},{"_id":"themes/next/scripts/tags/exturl.js","hash":"5022c0ba9f1d13192677cf1fd66005c57c3d0f53","modified":1524473199034},{"_id":"themes/next/scripts/tags/lazy-image.js","hash":"bcba2ff25cd7850ce6da322d8bd85a8dd00b5ceb","modified":1524473199041},{"_id":"themes/next/scripts/tags/note.js","hash":"f7eae135f35cdab23728e9d0d88b76e00715faa0","modified":1524473199042},{"_id":"themes/next/scripts/tags/label.js","hash":"6f00952d70aadece844ce7fd27adc52816cc7374","modified":1524473199039},{"_id":"themes/next/scripts/tags/tabs.js","hash":"aa7fc94a5ec27737458d9fe1a75c0db7593352fd","modified":1524473199044},{"_id":"themes/next/source/about/index.html","hash":"197fab7d360e762f6c4cc95ffaffa2f82b91176a","modified":1534148188963},{"_id":"themes/next/scripts/tags/group-pictures.js","hash":"ac681b0d0d8d39ba3817336c0270c6787c2b6b70","modified":1524473199037},{"_id":"themes/next/source/css/main.styl","hash":"a91dbb7ef799f0a171b5e726c801139efe545176","modified":1524473199258},{"_id":"themes/next/source/images/algolia_logo.svg","hash":"45eeea0b5fba833e21e38ea10ed5ab385ceb4f01","modified":1524473199263},{"_id":"themes/next/source/images/apple-touch-icon-next.png","hash":"2959dbc97f31c80283e67104fe0854e2369e40aa","modified":1524473199265},{"_id":"themes/next/source/images/avatar.gif","hash":"264082bb3a1af70d5499c7d22b0902cb454b6d12","modified":1524473199267},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","hash":"6f55543d1fb9cbc436c101d24f802dec7b41efc3","modified":1524473199271},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","hash":"bc3588c9b2d7c68830524783120ff6cf957cf668","modified":1524473199269},{"_id":"themes/next/source/images/cc-by-sa.svg","hash":"70c1535f43e54e5ff35ca81419e77e4c0c301398","modified":1524473199278},{"_id":"themes/next/source/images/cc-by-nd.svg","hash":"42cd73da328077ccc92f859bb8f3cf621b3484f8","modified":1524473199276},{"_id":"themes/next/source/images/favicon-16x16-next.png","hash":"943a0d67a9cdf8c198109b28f9dbd42f761d11c3","modified":1524473199283},{"_id":"themes/next/source/images/cc-by.svg","hash":"e92a33c32d1dac8ed94849b2b4e6456e887efe70","modified":1524473199279},{"_id":"themes/next/source/images/loading.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1524473199286},{"_id":"themes/next/source/images/favicon-32x32-next.png","hash":"0749d7b24b0d2fae1c8eb7f671ad4646ee1894b1","modified":1524473199284},{"_id":"themes/next/source/images/cc-zero.svg","hash":"9bfb52b2f63527a7049247bf00d44e6dc1170e7d","modified":1524473199281},{"_id":"themes/next/source/images/placeholder.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1524473199290},{"_id":"themes/next/source/images/cc-by-nc.svg","hash":"6f076713fb9bf934aa2c1046bdf2cf2e37bc1eab","modified":1524473199273},{"_id":"themes/next/source/images/searchicon.png","hash":"67727a6a969be0b2659b908518fa6706eed307b8","modified":1524473199295},{"_id":"themes/next/source/images/quote-l.svg","hash":"cd108d6f44351cadf8e6742565217f88818a0458","modified":1524473199292},{"_id":"themes/next/source/images/logo.svg","hash":"169f56fd82941591dad3abd734a50ec7259be950","modified":1524473199288},{"_id":"themes/next/source/images/iv_image.jpg","hash":"fcfc22d3c87ccbc975d55caee76145a1503d570f","modified":1524475514560},{"_id":"themes/next/source/images/quote-r.svg","hash":"2a2a250b32a87c69dcc1b1976c74b747bedbfb41","modified":1524473199293},{"_id":"themes/next/layout/_scripts/schemes/mist.swig","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1524473198938},{"_id":"themes/next/layout/_scripts/schemes/muse.swig","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1524473198939},{"_id":"themes/next/source/css/_mixins/Mist.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1524473199193},{"_id":"themes/next/source/css/_mixins/Muse.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1524473199194},{"_id":"themes/next/source/css/_mixins/custom.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1524473199199},{"_id":"themes/next/source/css/_variables/Muse.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1524473199252},{"_id":"themes/next/source/css/_variables/custom.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1524473199256},{"_id":"themes/next/layout/_partials/head/custom-head.swig","hash":"a223919d2e1bf17ca4d6abb2c86f2efca9883dc1","modified":1524473198904},{"_id":"themes/next/layout/_partials/head/external-fonts.swig","hash":"f5e487b0d213ca0bd94aa30bc23b240d65081627","modified":1524473198906},{"_id":"themes/next/layout/_partials/search/localsearch.swig","hash":"b2f0d247b213e4cf8de47af6a304d98070cc7256","modified":1524473198915},{"_id":"themes/next/layout/_partials/search/swiftype.swig","hash":"a8c7f9ca7c605d039a1f3bf4e4d3183700a3dd62","modified":1524473198917},{"_id":"themes/next/layout/_partials/search/tinysou.swig","hash":"b25002a83cbd2ca0c4a5df87ad5bff26477c0457","modified":1524473198918},{"_id":"themes/next/layout/_partials/share/add-this.swig","hash":"9e3d133ac5bcc6cb51702c83b2611a49811abad1","modified":1524473198921},{"_id":"themes/next/layout/_partials/share/baidushare.swig","hash":"d9e2d9282f9be6e04eae105964abb81e512bffed","modified":1524473198923},{"_id":"themes/next/layout/_partials/share/jiathis.swig","hash":"0a9cdd6958395fcdffc80ab60f0c6301b63664a5","modified":1524473198927},{"_id":"themes/next/layout/_partials/share/duoshuo_share.swig","hash":"d4fbffd7fa8f2090eb32a871872665d90a885fac","modified":1524473198924},{"_id":"themes/next/layout/_scripts/pages/post-details.swig","hash":"9b84ab576982b2c3bb0291da49143bc77fba3cc6","modified":1524473198934},{"_id":"themes/next/layout/_scripts/schemes/gemini.swig","hash":"a9a3995b9615adfb8d6b127c78c6771627bee19a","modified":1524473198936},{"_id":"themes/next/layout/_scripts/schemes/pisces.swig","hash":"a9a3995b9615adfb8d6b127c78c6771627bee19a","modified":1524473198941},{"_id":"themes/next/layout/_third-party/analytics/analytics-with-widget.swig","hash":"ff947f3561b229bc528cb1837d4ca19612219411","modified":1524473198947},{"_id":"themes/next/layout/_third-party/analytics/baidu-analytics.swig","hash":"753d262911c27baf663fcaf199267133528656af","modified":1524473198950},{"_id":"themes/next/layout/_third-party/analytics/cnzz-analytics.swig","hash":"a10b7f19d7b5725527514622899df413a34a89db","modified":1524473198953},{"_id":"themes/next/layout/_third-party/analytics/application-insights.swig","hash":"71397a5823e8ec8aad3b68aace13150623b3e19d","modified":1524473198949},{"_id":"themes/next/layout/_third-party/analytics/busuanzi-counter.swig","hash":"7b11eac3a0685fa1ab2ab6ecff60afc4f15f0d16","modified":1524473198952},{"_id":"themes/next/layout/_third-party/analytics/facebook-sdk.swig","hash":"7d94845f96197d9d84a405fa5d4ede75fb81b225","modified":1524473198955},{"_id":"themes/next/layout/_third-party/analytics/google-analytics.swig","hash":"b1e13df83fb2b1d5d513b30b7aa6158b0837daab","modified":1524473198959},{"_id":"themes/next/layout/_third-party/analytics/firestore.swig","hash":"ccc443b22bd4f8c7ac4145664686c756395b90e0","modified":1524473198957},{"_id":"themes/next/layout/_third-party/analytics/tencent-analytics.swig","hash":"8a399df90dadba5ad4e781445b58f4765aeb701e","modified":1524473198964},{"_id":"themes/next/layout/_third-party/analytics/index.swig","hash":"45f3f629c2aacc381095750e1c8649041a71a84b","modified":1524473198961},{"_id":"themes/next/layout/_third-party/analytics/lean-analytics.swig","hash":"e6d10ee4fb70b3ae1cd37e9e36e000306734aa2e","modified":1524473198962},{"_id":"themes/next/layout/_third-party/analytics/tencent-mta.swig","hash":"5a8027328f060f965b3014060bebec1d7cf149c1","modified":1524473198966},{"_id":"themes/next/layout/_third-party/analytics/vkontakte-api.swig","hash":"f9a1647a8f1866deeb94052d1f87a5df99cb1e70","modified":1524473198967},{"_id":"themes/next/layout/_third-party/comments/changyan.swig","hash":"4c501ea0b9c494181eb3c607c5526a5754e7fbd8","modified":1524473198969},{"_id":"themes/next/layout/_third-party/comments/disqus.swig","hash":"b83a51bbe0f1e2ded9819070840b0ea145f003a6","modified":1524473198971},{"_id":"themes/next/layout/_third-party/comments/duoshuo.swig","hash":"1600f340e0225361580c44890568dc07dbcf2c89","modified":1524473198973},{"_id":"themes/next/layout/_third-party/comments/gitment.swig","hash":"4dcc3213c033994d342d02b800b6229295433d30","modified":1524473198975},{"_id":"themes/next/layout/_third-party/comments/index.swig","hash":"493bd5999a1061b981922be92d8277a0f9152447","modified":1524473198979},{"_id":"themes/next/layout/_third-party/comments/hypercomments.swig","hash":"af7f3e43cbdc4f88c13f101f0f341af96ace3383","modified":1524473198977},{"_id":"themes/next/layout/_third-party/comments/livere.swig","hash":"9246162d4bc7e949ce1d12d135cbbaf5dc3024ec","modified":1524473198980},{"_id":"themes/next/layout/_third-party/comments/youyan.swig","hash":"7e65ff8fe586cd655b0e9d1ad2912663ff9bd36c","modified":1524473198983},{"_id":"themes/next/layout/_third-party/comments/valine.swig","hash":"4050553d44ba1396174161c9a6bb0f89fa779eca","modified":1524473198982},{"_id":"themes/next/layout/_third-party/search/index.swig","hash":"34599633658f3b0ffb487728b7766e1c7b551f5a","modified":1524473199003},{"_id":"themes/next/layout/_third-party/search/localsearch.swig","hash":"93479642fd076a1257fecc25fcf5d20ccdefe509","modified":1524473199005},{"_id":"themes/next/layout/_third-party/seo/baidu-push.swig","hash":"d8c98938719284fa06492c114d99a1904652a555","modified":1524473199009},{"_id":"themes/next/layout/_third-party/search/tinysou.swig","hash":"fe95dd3d166634c466e19aa756e65ad6e8254d3e","modified":1524473199006},{"_id":"themes/next/source/css/_custom/custom.styl","hash":"4d66f26306fdafb76b0a47dc060aef1e966ea0a3","modified":1534149678260},{"_id":"themes/next/source/css/_mixins/Gemini.styl","hash":"07f7da320689f828f6e36a6123807964a45157a0","modified":1524473199191},{"_id":"themes/next/source/css/_mixins/Pisces.styl","hash":"7896c3ee107e1a8b9108b6019f1c070600a1e8cc","modified":1524473199196},{"_id":"themes/next/source/css/_variables/Mist.styl","hash":"a25408534f8fe6e321db4bbf9dd03335d648fe17","modified":1524473199250},{"_id":"themes/next/source/css/_variables/Gemini.styl","hash":"58e7dd5947817d9fc30770712fc39b2f52230d1e","modified":1524473199248},{"_id":"themes/next/source/css/_mixins/base.styl","hash":"0e55cbd93852dc3f8ccb44df74d35d9918f847e0","modified":1524473199198},{"_id":"themes/next/source/css/_variables/Pisces.styl","hash":"4069f918ccc312da86db6c51205fc6c6eaabb116","modified":1524473199253},{"_id":"themes/next/source/css/_variables/base.styl","hash":"b1f6ea881a4938a54603d68282b0f8efb4d7915d","modified":1524473199255},{"_id":"themes/next/source/js/src/bootstrap.js","hash":"0289031200c3d4c2bdd801ee10fff13bb2c353e4","modified":1524473199302},{"_id":"themes/next/source/js/src/algolia-search.js","hash":"cb431b54ba9c692165a1f5a12e4c564a560f8058","modified":1524473199300},{"_id":"themes/next/source/js/src/affix.js","hash":"1b509c3b5b290a6f4607f0f06461a0c33acb69b1","modified":1524473199299},{"_id":"themes/next/source/js/src/hook-duoshuo.js","hash":"b35a7dc47b634197b93487cea8671a40a9fdffce","modified":1524473199306},{"_id":"themes/next/source/js/src/exturl.js","hash":"a2a0f0de07e46211f74942a468f42ee270aa555c","modified":1524473199304},{"_id":"themes/next/source/js/src/motion.js","hash":"885176ed51d468f662fbf0fc09611f45c7e5a3b1","modified":1524473199309},{"_id":"themes/next/source/js/src/js.cookie.js","hash":"1512c751d219577d338ac0780fb2bbd9075d5298","modified":1524473199307},{"_id":"themes/next/source/js/src/scroll-cookie.js","hash":"02cf91514e41200bc9df5d8bdbeb58575ec06074","modified":1524473199315},{"_id":"themes/next/source/js/src/scrollspy.js","hash":"b7657be25fc52ec67c75ab5481bdcb483573338b","modified":1524473199317},{"_id":"themes/next/source/js/src/utils.js","hash":"b3e9eca64aba59403334f3fa821f100d98d40337","modified":1524473199319},{"_id":"themes/next/source/js/src/post-details.js","hash":"93a18271b4123dd8f94f09d1439b47c3c19a8712","modified":1524473199311},{"_id":"themes/next/source/lib/algolia-instant-search/instantsearch.min.css","hash":"90ef19edc982645b118b095615838d9c5eaba0de","modified":1524473199343},{"_id":"themes/next/source/lib/fastclick/.bower.json","hash":"bf3eef9d647cd7c9b62feda3bc708c6cdd7c0877","modified":1524473199389},{"_id":"themes/next/source/lib/fastclick/LICENSE","hash":"6f474ea75c42442da7bbcf2e9143ce98258efd8d","modified":1524473199391},{"_id":"themes/next/source/lib/fastclick/bower.json","hash":"a9b3ee1e4db71a0e4ea6d5bed292d176dd68b261","modified":1524473199395},{"_id":"themes/next/source/lib/fancybox/.bower.json","hash":"9be892a4e14e0da18ff9cb962c9ef71f163b1b22","modified":1524473199356},{"_id":"themes/next/source/lib/fancybox/.gitattributes","hash":"672d3b5767e0eacd83bb41b188c913f2cf754793","modified":1524473199358},{"_id":"themes/next/source/lib/fastclick/README.md","hash":"68a9b9d53126405b0fa5f3324f1fb96dbcc547aa","modified":1524473199393},{"_id":"themes/next/source/lib/canvas-ribbon/canvas-ribbon.js","hash":"b02737510e9b89aeed6b54f89f602a9c24b06ff2","modified":1524473199353},{"_id":"themes/next/source/lib/font-awesome/.gitignore","hash":"03ddbf76c1dd1afb93eed0b670d2eee747472ef1","modified":1524473199405},{"_id":"themes/next/source/lib/font-awesome/.bower.json","hash":"b4aefc910578d76b267e86dfffdd5121c8db9aec","modified":1524473199402},{"_id":"themes/next/source/lib/font-awesome/HELP-US-OUT.txt","hash":"ee33b2798b1e714b904d663436c6b3521011d1fa","modified":1524473199408},{"_id":"themes/next/source/lib/font-awesome/bower.json","hash":"71e7183634dc1b9449f590f15ebd7201add22ca7","modified":1524473199410},{"_id":"themes/next/source/lib/jquery/.bower.json","hash":"865d6c1328ab209a4376b9d2b7a7824369565f28","modified":1524473199440},{"_id":"themes/next/source/lib/canvas-nest/canvas-nest.min.js","hash":"0387e75e23b1db108a755073fe52a0d03eb391a7","modified":1524473199350},{"_id":"themes/next/source/lib/font-awesome/.npmignore","hash":"c31ff06a740955e44edd4403902e653ccabfd4db","modified":1524473199406},{"_id":"themes/next/source/lib/jquery_lazyload/.bower.json","hash":"90fa628f156d8045357ff11eaf32e61abacf10e8","modified":1524473199446},{"_id":"themes/next/source/lib/jquery_lazyload/CONTRIBUTING.md","hash":"4ded6fee668544778e97e38c2b211fc56c848e77","modified":1524473199448},{"_id":"themes/next/source/lib/jquery_lazyload/bower.json","hash":"e0acf1db27b0cc16128a59c46db1db406b5c4c58","modified":1524473199451},{"_id":"themes/next/source/lib/jquery_lazyload/README.md","hash":"b930297cb98b8e1dbd5abe9bc1ed9d5935d18ce8","modified":1524473199449},{"_id":"themes/next/source/lib/jquery_lazyload/jquery.lazyload.js","hash":"f4a570908f6c89c6edfb1c74959e733eaadea4f2","modified":1524473199453},{"_id":"themes/next/source/lib/jquery_lazyload/jquery.scrollstop.js","hash":"bf773ad48a0b9aa77681a89d7569eefc0f7b7b18","modified":1524473199454},{"_id":"themes/next/source/lib/needsharebutton/needsharebutton.css","hash":"e33aa8fa48b6639d8d8b937d13261597dd473b3a","modified":1524473199460},{"_id":"themes/next/source/lib/needsharebutton/font-embedded.css","hash":"14264a210bf94232d58d7599ea2ba93bfa4fb458","modified":1524473199458},{"_id":"themes/next/source/lib/needsharebutton/needsharebutton.js","hash":"2ce5f3bf15c523b9bfc97720d8884bb22602a454","modified":1524473199462},{"_id":"themes/next/source/lib/pace/pace-theme-barber-shop.min.css","hash":"ee0d51446cb4ffe1bb96bd7bc8c8e046dddfcf46","modified":1524473199464},{"_id":"themes/next/source/lib/pace/pace-theme-big-counter.min.css","hash":"5b561dc328af4c4d512e20a76fe964d113a32ba8","modified":1524473199467},{"_id":"themes/next/source/lib/pace/pace-theme-bounce.min.css","hash":"f6bdb9a785b7979dd8ec5c60e278af955ef1e585","modified":1524473199468},{"_id":"themes/next/source/lib/pace/pace-theme-center-atom.min.css","hash":"dcf79c24fe5350fb73d8038573a104e73639e9d3","modified":1524473199470},{"_id":"themes/next/source/lib/pace/pace-theme-center-radar.min.css","hash":"ab7cba998bf4c03b13df342bf43647fa4f419783","modified":1524473199474},{"_id":"themes/next/source/lib/pace/pace-theme-center-circle.min.css","hash":"a4066769c78affbfbc5e30a600e2c7862cd532e0","modified":1524473199472},{"_id":"themes/next/source/lib/pace/pace-theme-fill-left.min.css","hash":"0bec1e235a4a2cccda3f993b205424e1441a44ae","modified":1524473199479},{"_id":"themes/next/source/lib/pace/pace-theme-center-simple.min.css","hash":"67f44c947548bd4d77e7590d3f59e236cbf9e98a","modified":1524473199476},{"_id":"themes/next/source/lib/pace/pace-theme-corner-indicator.min.css","hash":"b3c64c973f31884e3d8145989476707333406b9a","modified":1524473199477},{"_id":"themes/next/source/lib/pace/pace-theme-minimal.min.css","hash":"9cd783cceb8a191f3c8b5d81f7a430ecc3e489d3","modified":1524473199486},{"_id":"themes/next/source/lib/pace/pace-theme-flash.min.css","hash":"13ace22c40312d7bbd8d9c1e50eff897a7a497d8","modified":1524473199481},{"_id":"themes/next/source/lib/pace/pace-theme-loading-bar.min.css","hash":"7ee28875dfc1230d76c537f6605766e8d4011e9f","modified":1524473199482},{"_id":"themes/next/source/lib/pace/pace-theme-mac-osx.min.css","hash":"9f2e7b51b084da407863826b25265b31150b3821","modified":1524473199484},{"_id":"themes/next/source/lib/pace/pace.min.js","hash":"8aaa675f577d5501f5f22d5ccb07c2b76310b690","modified":1524473199487},{"_id":"themes/next/source/lib/three/canvas_lines.min.js","hash":"2d9a9f38c493fdf7c0b833bb9184b6a1645c11b2","modified":1524473199490},{"_id":"themes/next/source/lib/three/canvas_sphere.min.js","hash":"46a50b91c98b639c9a2b9265c5a1e66a5c656881","modified":1524473199493},{"_id":"themes/next/source/lib/three/three-waves.min.js","hash":"8148492dd49aa876d32bb7d5b728d3f5bf6f5074","modified":1524473199495},{"_id":"themes/next/source/lib/velocity/.bower.json","hash":"63da5e80ebb61bb66a2794d5936315ca44231f0c","modified":1524473199509},{"_id":"themes/next/source/lib/velocity/bower.json","hash":"92d92860418c4216aa59eb4cb4a556290a7ad9c3","modified":1524473199511},{"_id":"themes/next/source/lib/velocity/velocity.min.js","hash":"bf172816a9c57f9040e3d19c24e181a142daf92b","modified":1524473199516},{"_id":"themes/next/source/lib/velocity/velocity.ui.js","hash":"dbbfb50f6502f6b81dcc9fee7b31f1e812da3464","modified":1524473199517},{"_id":"themes/next/source/lib/velocity/velocity.ui.min.js","hash":"dde584994ac13dc601836e86f4cf490e418d9723","modified":1524473199519},{"_id":"themes/next/source/lib/jquery/index.js","hash":"17a740d68a1c330876c198b6a4d9319f379f3af2","modified":1524473199443},{"_id":"themes/next/layout/_third-party/search/algolia-search/assets.swig","hash":"218cc936ba3518a3591b2c9eda46bc701edf7710","modified":1524473199000},{"_id":"themes/next/layout/_third-party/search/algolia-search/dom.swig","hash":"2530de0f3125a912756f6c0e9090cd012134a4c5","modified":1524473199002},{"_id":"themes/next/source/css/_common/components/comments.styl","hash":"ff4489cd582f518bba6909a301ac1292a38b4e96","modified":1524473199056},{"_id":"themes/next/source/css/_common/components/back-to-top-sidebar.styl","hash":"8f86f694c0749a18ab3ad6f6df75466ca137a4bc","modified":1524473199050},{"_id":"themes/next/source/css/_common/components/buttons.styl","hash":"8b32928686c327151e13d3ab100157f9a03cd59f","modified":1524473199054},{"_id":"themes/next/source/css/_common/components/back-to-top.styl","hash":"237d185ac62ec9877e300947fa0109c44fb8db19","modified":1524473199052},{"_id":"themes/next/source/css/_common/components/components.styl","hash":"7ad4081466b397e2a6204141bb7768b7c01bd93c","modified":1524473199058},{"_id":"themes/next/source/css/_common/components/pagination.styl","hash":"4f2801fc4cf3f31bf2069f41db8c6ce0e3da9e39","modified":1524473199088},{"_id":"themes/next/source/css/_common/components/tag-cloud.styl","hash":"6eb4bcc3056bd279d000607e8b4dad50d368ca69","modified":1524473199135},{"_id":"themes/next/source/css/_common/scaffolding/helpers.styl","hash":"1da5c800d025345f212a3bf1be035060f4e5e6ed","modified":1524473199179},{"_id":"themes/next/source/css/_common/scaffolding/base.styl","hash":"24ee4b356ff55fc6e58f26a929fa07750002cf29","modified":1524473199176},{"_id":"themes/next/source/css/_common/scaffolding/mobile.styl","hash":"91ca75492cd51f2553f4d294ed2f48239fcd55eb","modified":1524473199181},{"_id":"themes/next/source/css/_common/outline/outline.styl","hash":"12662536c7a07fff548abe94171f34b768dd610f","modified":1524473199173},{"_id":"themes/next/source/css/_common/scaffolding/scaffolding.styl","hash":"a17e2b871a335f290afb392a08f94fd35f59c715","modified":1524473199184},{"_id":"themes/next/source/css/_common/scaffolding/tables.styl","hash":"ea9069645696f86c5df64208490876fe150c8cae","modified":1524473199186},{"_id":"themes/next/source/css/_schemes/Mist/_base.styl","hash":"25d5e45a355ee2093f3b8b8eeac125ebf3905026","modified":1524473199205},{"_id":"themes/next/source/css/_schemes/Gemini/index.styl","hash":"60fa84aa7731760f05f52dd7d8f79b5f74ac478d","modified":1524473199203},{"_id":"themes/next/source/css/_schemes/Mist/_header.styl","hash":"d0bfd1bef988c76f7d7dd72d88af6f0908a8b0db","modified":1524473199208},{"_id":"themes/next/source/css/_common/scaffolding/normalize.styl","hash":"3f40e8a9fe8e7bd5cfc4cf4cbbbcb9539462e973","modified":1524473199182},{"_id":"themes/next/source/css/_schemes/Mist/_logo.styl","hash":"b1025c421406d2c24cc92a02ae28c1915b01e240","modified":1524473199210},{"_id":"themes/next/source/css/_schemes/Mist/_menu.styl","hash":"26666c1f472bf5f3fb9bc62081cca22b4de15ccb","modified":1524473199212},{"_id":"themes/next/source/css/_schemes/Mist/_search.styl","hash":"09c965022c13b84ed8a661fee8ac2a6d550495ae","modified":1524473199215},{"_id":"themes/next/source/css/_schemes/Mist/index.styl","hash":"9b913b73d31d21f057f97115ffab93cfa578b884","modified":1524473199217},{"_id":"themes/next/source/css/_schemes/Mist/_posts-expanded.styl","hash":"9c99034f8e00d47e978b3959f51eb4a9ded0fcc8","modified":1524473199213},{"_id":"themes/next/source/css/_schemes/Muse/_layout.styl","hash":"31127dcbf4c7b4ada53ffbf1638b5fe325b7cbc0","modified":1524473199224},{"_id":"themes/next/source/css/_schemes/Muse/_logo.styl","hash":"748dbfbf9c08e719ddc775958003c64b00d39dab","modified":1524473199226},{"_id":"themes/next/source/css/_schemes/Muse/_menu.styl","hash":"e695e58f714129ca292c2e54cd62c251aca7f7fe","modified":1524473199227},{"_id":"themes/next/source/css/_schemes/Muse/_search.styl","hash":"09c965022c13b84ed8a661fee8ac2a6d550495ae","modified":1524473199229},{"_id":"themes/next/source/css/_schemes/Muse/index.styl","hash":"5dbc0d0c897e46760e5dbee416530d485c747bba","modified":1524473199231},{"_id":"themes/next/source/css/_schemes/Pisces/_brand.styl","hash":"bce344d3a665b4c55230d2a91eac2ad16d6f32fd","modified":1524473199235},{"_id":"themes/next/source/css/_schemes/Pisces/_posts.styl","hash":"1f6e2ce674735269599acc6d77b3ea18d31967fc","modified":1524473199242},{"_id":"themes/next/source/css/_schemes/Pisces/_layout.styl","hash":"416988dca389e6e2fdfa51fa7f4ee07eb53f82fb","modified":1524473199238},{"_id":"themes/next/source/css/_schemes/Pisces/_menu.styl","hash":"4642e30010af8b2b037f5b43146b10a934941958","modified":1524473199240},{"_id":"themes/next/source/css/_schemes/Pisces/_sidebar.styl","hash":"ad2dcedf393ed1f3f5afd2508d24969c916d02fc","modified":1524473199244},{"_id":"themes/next/source/css/_schemes/Pisces/index.styl","hash":"86197902dfd3bededba10ba62b8f9f22e0420bde","modified":1524473199246},{"_id":"themes/next/source/lib/Han/dist/han.css","hash":"6c26cdb36687d4f0a11dabf5290a909c3506be5c","modified":1524473199334},{"_id":"themes/next/source/lib/Han/dist/han.min.css","hash":"6d586bfcfb7ae48f1b12f76eec82d3ad31947501","modified":1524473199339},{"_id":"themes/next/source/lib/Han/dist/han.min.js","hash":"16b03db23a52623348f37c04544f2792032c1fb6","modified":1524473199341},{"_id":"themes/next/source/js/src/schemes/pisces.js","hash":"f1d0b5d7af32c423eaa8bb93ab6a0b45655645dc","modified":1524473199313},{"_id":"themes/next/source/lib/fancybox/source/blank.gif","hash":"2daeaa8b5f19f0bc209d976c02bd6acb51b00b0a","modified":1524473199360},{"_id":"themes/next/source/lib/fastclick/lib/fastclick.js","hash":"1d6aeda0480d0e4cb6198edf7719d601d4ae2ccc","modified":1524473199398},{"_id":"themes/next/source/lib/fancybox/source/fancybox_overlay.png","hash":"b3a4ee645ba494f52840ef8412015ba0f465dbe0","modified":1524473199367},{"_id":"themes/next/source/lib/fancybox/source/fancybox_sprite.png","hash":"17df19f97628e77be09c352bf27425faea248251","modified":1524473199368},{"_id":"themes/next/source/lib/fancybox/source/fancybox_sprite@2x.png","hash":"30c58913f327e28f466a00f4c1ac8001b560aed8","modified":1524473199370},{"_id":"themes/next/source/lib/fancybox/source/fancybox_loading.gif","hash":"1a755fb2599f3a313cc6cfdb14df043f8c14a99c","modified":1524473199363},{"_id":"themes/next/source/lib/fastclick/lib/fastclick.min.js","hash":"2cae0f5a6c5d6f3cb993015e6863f9483fc4de18","modified":1524473199400},{"_id":"themes/next/source/lib/fancybox/source/fancybox_loading@2x.gif","hash":"273b123496a42ba45c3416adb027cd99745058b0","modified":1524473199365},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.css","hash":"82f33ad0842aa9c154d029e0dada2497d4eb1d57","modified":1524473199383},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.js","hash":"d71602cbca33b9ecdb7ab291b7f86a49530f3601","modified":1524473199385},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.pack.js","hash":"ae6318aeb62ad4ce7a7e9a4cdacd93ffb004f0fb","modified":1524473199387},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css","hash":"3655f1fdf1e584c4d8e8d39026093ca306a5a341","modified":1524473199413},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css.map","hash":"1573904b82807abbb32c97a3632c6c6808eaac50","modified":1524473199415},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.min.css","hash":"88af80502c44cd52ca81ffe7dc7276b7eccb06cf","modified":1524473199418},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.min.js","hash":"41ea797c68dbcff2f6fb3aba1d1043a22e7cc0f6","modified":1524473199504},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.pack.js","hash":"a817b6c158cbc5bab3582713de9fe18a18a80552","modified":1524473199506},{"_id":"themes/next/source/lib/Han/dist/han.js","hash":"4ac683b2bc8531c84d98f51b86957be0e6f830f3","modified":1524473199336},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff2","hash":"d6f48cba7d076fb6f2fd6ba993a75b9dc1ecbf0c","modified":1524473199438},{"_id":"themes/next/source/lib/velocity/velocity.js","hash":"4237c6e9d59da349639de20e559e87c2c0218cfd","modified":1524473199514},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff","hash":"28b782240b3e76db824e12c02754a9731a167527","modified":1524473199436},{"_id":"themes/next/source/css/_common/components/header/header.styl","hash":"53cde051e0337f4bf42fb8d6d7a79fa3fa6d4ef2","modified":1524473199062},{"_id":"themes/next/source/css/_common/components/header/headerband.styl","hash":"d63e0cacc53dd375fcc113465a4328c59ff5f2c1","modified":1524473199064},{"_id":"themes/next/source/css/_common/components/footer/footer.styl","hash":"9f73c4696f0907aa451a855444f88fc0698fa472","modified":1524473199060},{"_id":"themes/next/source/css/_common/components/header/site-nav.styl","hash":"1727702eac5d326b5c81a667944a245016668231","modified":1524473199069},{"_id":"themes/next/source/css/_common/components/header/menu.styl","hash":"1a0d059799a298fe17c49a44298d32cebde93785","modified":1524473199066},{"_id":"themes/next/source/css/_common/components/header/site-meta.styl","hash":"0656e753f182c9f47fef7304c847b7587a85ef0d","modified":1524473199068},{"_id":"themes/next/source/css/_common/components/highlight/diff.styl","hash":"167986d0f649516671ddf7193eebba7b421cd115","modified":1524473199071},{"_id":"themes/next/source/css/_common/components/pages/archive.styl","hash":"b6f3a06a94a6ee5470c956663164d58eda818a64","modified":1524473199078},{"_id":"themes/next/source/css/_common/components/highlight/highlight.styl","hash":"50450d9fdc8a2b2be8cfca51e3e1a01ffd636c0b","modified":1524473199074},{"_id":"themes/next/source/css/_common/components/pages/categories.styl","hash":"7fb593f90d74a99c21840679933b9ef6fdc16a61","modified":1524473199080},{"_id":"themes/next/source/css/_common/components/highlight/theme.styl","hash":"7fe4d4d656e86276c17cb4e48a560cb6a4def703","modified":1524473199076},{"_id":"themes/next/source/css/_common/components/pages/pages.styl","hash":"f9760ecf186954cee3ba4a149be334e9ba296b89","modified":1524473199082},{"_id":"themes/next/source/css/_common/components/pages/post-detail.styl","hash":"4e3838d7ac81d9ad133960f0f7ed58a44a015285","modified":1524473199084},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-author-links.styl","hash":"39f04c4c7237a4e10acd3002331992b79945d241","modified":1524473199117},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-blogroll.styl","hash":"8dd9a1c6f4f6baa00c2cf01837e7617120cf9660","modified":1524473199121},{"_id":"themes/next/source/css/_common/components/pages/schedule.styl","hash":"8cf318644acc8b4978537c263290363e21c7f5af","modified":1524473199086},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-author.styl","hash":"761eba9811b050b25d548cc0854de4824b41eb08","modified":1524473199119},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-dimmer.styl","hash":"11c22f0fb3f6beb13e5a425ec064a4ff974c13b7","modified":1524473199123},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-feed-link.styl","hash":"61f8cea3c01acd600e90e1bc2a07def405503748","modified":1524473199124},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-nav.styl","hash":"1153bb71edf253765145559674390e16dd67c633","modified":1524473199126},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-toggle.styl","hash":"a1521d48bb06d8d703753f52a198baa197af7da2","modified":1524473199130},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-toc.styl","hash":"c8fe49a4bc014c24dead05b782a7082411a4abc5","modified":1524473199128},{"_id":"themes/next/source/css/_common/components/sidebar/site-state.styl","hash":"e71652d3216e289c8548b1ea2357822c1476a425","modified":1524473199133},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar.styl","hash":"5ef6343835f484a2c0770bd1eb9cc443609e4c39","modified":1524473199131},{"_id":"themes/next/source/css/_common/components/third-party/busuanzi-counter.styl","hash":"a6e7d698702c2e383dde3fde2abde27951679084","modified":1524473199159},{"_id":"themes/next/source/css/_common/components/third-party/baidushare.styl","hash":"5dbeed535d63a50265d96b396a5440f9bb31e4ba","modified":1524473199157},{"_id":"themes/next/source/css/_common/components/third-party/algolia-search.styl","hash":"bba4f3bdb7517cd85376df3e1209b570c0548c69","modified":1524473199155},{"_id":"themes/next/source/css/_common/components/third-party/gitment.styl","hash":"874278147115601d2abf15987f5f7a84ada1ac6b","modified":1524473199162},{"_id":"themes/next/source/css/_common/components/third-party/jiathis.styl","hash":"15975ba7456b96916b1dbac448a1a0d2c38b8f3d","modified":1524473199166},{"_id":"themes/next/source/css/_common/components/third-party/han.styl","hash":"10599e16414a8b7a76c4e79e6617b5fe3d4d1adf","modified":1524473199164},{"_id":"themes/next/source/css/_common/components/third-party/duoshuo.styl","hash":"717cc7f82be9cc151e23a7678601ff2fd3a7fa1d","modified":1524473199161},{"_id":"themes/next/source/css/_common/components/third-party/needsharebutton.styl","hash":"28825ae15fa20ae3942cdaa7bcc1f3523ce59acc","modified":1524473199169},{"_id":"themes/next/source/css/_common/components/third-party/localsearch.styl","hash":"16087276945fa038f199692e3eabb1c52b8ea633","modified":1524473199168},{"_id":"themes/next/source/css/_common/components/tags/blockquote-center.styl","hash":"2fe76476432b31993338cb45cdb3b29a518b6379","modified":1524473199137},{"_id":"themes/next/source/css/_common/components/tags/exturl.styl","hash":"a3bdd71237afc112b2aa255f278cab6baeb25351","modified":1524473199140},{"_id":"themes/next/source/css/_common/components/tags/full-image.styl","hash":"f825da191816eef69ea8efb498a7f756d5ebb498","modified":1524473199141},{"_id":"themes/next/source/css/_common/components/tags/label.styl","hash":"2ab1322fe52ab5aafd49e68f5bd890e8380ee927","modified":1524473199145},{"_id":"themes/next/source/css/_common/components/tags/group-pictures.styl","hash":"2ad1a2a9bbf6742d1b0762c4c623b68113d1e0fe","modified":1524473199143},{"_id":"themes/next/source/css/_common/components/tags/note-modern.styl","hash":"b7076e58d647265ee0ad2b461fe8ce72c9373bc5","modified":1524473199148},{"_id":"themes/next/source/css/_common/components/tags/note.styl","hash":"9a409b798decdefdaf7a23f0b11004a8c27e82f3","modified":1524473199150},{"_id":"themes/next/source/css/_common/components/tags/tags.styl","hash":"b80604868e4f5cf20fccafd7ee415c20c804f700","modified":1524473199153},{"_id":"themes/next/source/css/_common/components/tags/tabs.styl","hash":"154a87a32d2fead480d5e909c37f6c476671c5e6","modified":1524473199151},{"_id":"themes/next/source/css/_common/components/post/post-button.styl","hash":"62fbbd32cf5a99ae550c45c763a2c4813a138d01","modified":1524473199091},{"_id":"themes/next/source/css/_common/components/post/my-post-copyright.styl","hash":"06d0786f931069e700bfb2b6c736dc87b7e2e523","modified":1534148636732},{"_id":"themes/next/source/css/_common/components/post/post-eof.styl","hash":"a200c0a1c5a895ac9dc41e0641a5dfcd766be99b","modified":1524473199096},{"_id":"themes/next/source/css/_common/components/post/post-collapse.styl","hash":"875cbe88d5c7f6248990e2beb97c9828920e7e24","modified":1524473199093},{"_id":"themes/next/source/css/_common/components/post/post-copyright.styl","hash":"caf263d1928496688c0e1419801eafd7e6919ce5","modified":1524473199095},{"_id":"themes/next/source/css/_common/components/post/post-gallery.styl","hash":"cd9e214e502697f2f2db84eb721bac57a49b0fce","modified":1524473199099},{"_id":"themes/next/source/css/_common/components/post/post-expand.styl","hash":"a6c6eb8adba0a090ad1f4b9124e866887f20d10d","modified":1524473199098},{"_id":"themes/next/source/css/_common/components/post/post-meta.styl","hash":"d0d7a5c90d62b685520d2b47fea8ba6019ff5402","modified":1524473199101},{"_id":"themes/next/source/css/_common/components/post/post-nav.styl","hash":"27deb3d3a243d30022055dac7dad851024099a8b","modified":1524473199103},{"_id":"themes/next/source/css/_common/components/post/post-rtl.styl","hash":"b2495ae5e04dcca610aacadc47881d9e716cd440","modified":1524473199106},{"_id":"themes/next/source/css/_common/components/post/post-reward.styl","hash":"ca88ea6999a61fb905eb6e72eba5f92d4ee31e6e","modified":1524473199104},{"_id":"themes/next/source/css/_common/components/third-party/third-party.styl","hash":"9c8196394a89dfa40b87bf0019e80144365a9c93","modified":1524473199171},{"_id":"themes/next/source/css/_common/components/post/post-tags.styl","hash":"5a982d8ef3b3623ea5f59e63728990f5623c1b57","modified":1524473199108},{"_id":"themes/next/source/css/_common/components/post/post-type.styl","hash":"01567edaea6978628aa5521a122a85434c418bfd","modified":1524473199111},{"_id":"themes/next/source/css/_common/components/post/post-title.styl","hash":"ccb34c52be8adba5996c6b94f9e723bd07d34c16","modified":1524473199109},{"_id":"themes/next/source/css/_common/components/post/post-widgets.styl","hash":"7968343e41f8b94b318c36289dff1196c3eb1791","modified":1524473199113},{"_id":"themes/next/source/css/_common/components/post/post.styl","hash":"d031dfc1bb56bfaab6fd0f6e1b25da6036d0e693","modified":1534148838240},{"_id":"themes/next/source/css/_schemes/Mist/outline/outline.styl","hash":"a07aa12cc36ac5c819670c2a3c17d07ed7a08986","modified":1524473199219},{"_id":"themes/next/source/css/_schemes/Mist/sidebar/sidebar-blogroll.styl","hash":"1f09be9bb38411f0629b58c3b23873589a6dbcaa","modified":1524473199221},{"_id":"themes/next/source/css/_schemes/Muse/sidebar/sidebar-blogroll.styl","hash":"1f09be9bb38411f0629b58c3b23873589a6dbcaa","modified":1524473199233},{"_id":"themes/next/source/lib/Han/dist/font/han-space.otf","hash":"07436f011b44051f61b8329c99de4bec64e86f4b","modified":1524473199325},{"_id":"themes/next/source/lib/Han/dist/font/han-space.woff","hash":"7a635062b10bf5662ae1d218ba0980171005d060","modified":1524473199327},{"_id":"themes/next/source/lib/Han/dist/font/han.woff","hash":"f38ff9b2eecaa17b50b66aa2dae87e9e7436d195","modified":1524473199330},{"_id":"themes/next/source/lib/Han/dist/font/han.woff2","hash":"623af3ed5423371ac136a4fe0e8cc7bb7396037a","modified":1524473199332},{"_id":"themes/next/source/lib/Han/dist/font/han.otf","hash":"f1f6bb8f461f5672e000380195d3d2358a28494c","modified":1524473199328},{"_id":"themes/next/source/lib/fancybox/source/helpers/fancybox_buttons.png","hash":"e385b139516c6813dcd64b8fc431c364ceafe5f3","modified":1524473199372},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-buttons.css","hash":"6394c48092085788a8c0ef72670b0652006231a1","modified":1524473199374},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-buttons.js","hash":"ee948b4489aedeb548a77c9e45d8c7c5732fd62d","modified":1524473199376},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-media.js","hash":"51139a4c79573d372a347ef01a493222a1eaf10a","modified":1524473199378},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-thumbs.css","hash":"b88b589f5f1aa1b3d87cc7eef34c281ff749b1ae","modified":1524473199380},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-thumbs.js","hash":"d22b1629cb23a6181bebb70d0cf653ffe4b835c8","modified":1524473199381},{"_id":"themes/next/source/lib/font-awesome/fonts/FontAwesome.otf","hash":"048707bc52ac4b6563aaa383bfe8660a0ddc908c","modified":1524473199421},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.eot","hash":"d980c2ce873dc43af460d4d572d441304499f400","modified":1524473199425},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.ttf","hash":"13b1eab65a983c7a73bc7997c479d66943f7c6cb","modified":1524473199434},{"_id":"themes/next/source/images/background.jpg","hash":"247019133fb70b20b4a4be94b5a09e9873d4b70b","modified":1534145887368},{"_id":"themes/next/source/lib/algolia-instant-search/instantsearch.min.js","hash":"90a1b22129efc172e2dfcceeeb76bff58bc3192f","modified":1524473199348},{"_id":"themes/next/source/lib/three/three.min.js","hash":"26273b1cb4914850a89529b48091dc584f2c57b8","modified":1524473199500},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.svg","hash":"b5483b11f8ba213e733b5b8af9927a04fec996f6","modified":1524473199430},{"_id":"public/floder/index.html","hash":"24a8b880c500023699389f8cc61037d8194a55d7","modified":1534470601562},{"_id":"public/tags/index.html","hash":"759efc9443d43ec18226f7158b72d2749fa75407","modified":1534470601563},{"_id":"public/archives/index.html","hash":"5c47056abf2e00d53362312657324ffb9f81322b","modified":1534470601563},{"_id":"public/archives/2018/08/index.html","hash":"d99be746c29a9c7cdf6f46ad89af9ecb85376f11","modified":1534470601563},{"_id":"public/archives/2018/index.html","hash":"968bc8dce6664b443a91617d85bd3159652f6ce7","modified":1534470601563},{"_id":"public/2018/08/13/popularWindow/index.html","hash":"5e27270c3bc6e1bd3902863a267720e31a02ccad","modified":1534470601563},{"_id":"public/2018/08/13/仿照微博折叠效果/index.html","hash":"625ab85d99d160aa39c0bd21d0fe33bd18252a58","modified":1534470601563},{"_id":"public/index.html","hash":"f4aa09f350db2e94a64fc21a33252e2e22e9c448","modified":1534470601563},{"_id":"public/2018/08/13/熟悉使用ToolBar/index.html","hash":"a36e4ffb00519727461657a37167fa09b2ed1162","modified":1534470601563}],"Category":[],"Data":[],"Page":[{"title":"tags","date":"2018-04-27T10:16:40.000Z","type":"tags","comments":0,"tags":["Tag1","Tag2","Tag3"],"_content":"","source":"tags/index.md","raw":"---\ntitle: tags\ndate: 2018-04-27 18:16:40\ntype: \"tags\"\ncomments: false\ntags: \n\t- Tag1\n\t- Tag2\n\t- Tag3\n---\n","updated":"2018-04-27T10:18:22.455Z","path":"tags/index.html","layout":"page","_id":"cjkxc5ssm0001gguqj19l7160","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"floder","date":"2018-04-23T08:39:07.000Z","_content":"","source":"floder/index.md","raw":"---\ntitle: floder\ndate: 2018-04-23 16:39:07\n---\n","updated":"2018-04-23T08:39:07.300Z","path":"floder/index.html","comments":1,"layout":"page","_id":"cjkxc5ssp0003gguqz5c3htsr","content":"","site":{"data":{}},"excerpt":"","more":""}],"Post":[{"title":"仿照微博折叠效果","date":"2018-08-13T06:38:35.000Z","copyright":true,"_content":"\n\n\n<blockquote class=\"blockquote-center\">安排</blockquote>\n\n<!-- more -->\n\n\n仿照微博效果如图：\n\n- - - - - - ![微博折叠效果.gif](https://upload-images.jianshu.io/upload_images/2953304-603a60c0f0c05570.gif?imageMogr2/auto-orient/strip)\n- \n\n一个顶部可以折叠的效果\n\n> 思路：浮动布局是Title始终在上方（有主页的和Title布局）。在ScrollView滑动的时候。进行监听，当滑动的距离大于 图片的高度-title的高度的时候 进行显示浮动布局。\n\n如图：\n![布局.png](https://upload-images.jianshu.io/upload_images/2953304-b02a4e5badf6cf49.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\n\n\n布局如下：\n```Java\n<FrameLayout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\">\n\n\n    <com.example.mydemo.view.WeiBoScrollView\n        android:id=\"@+id/scro\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\">\n        <RelativeLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\">\n\n\n            <ImageView\n                android:id=\"@+id/iv_img\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"200dp\"\n                android:scaleType=\"fitXY\"\n                android:src=\"@drawable/bg_wb\"/>\n\n\n            <include\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"wrap_content\"\n                android:layout_below=\"@+id/iv_img\"\n                android:id=\"@+id/ll_tab\"\n                layout=\"@layout/inclue_weibo4\"\n            />\n\n\n            <FrameLayout android:id=\"@+id/fl_container\"\n                         android:layout_width=\"match_parent\"\n                         android:layout_height=\"wrap_content\"\n                         android:layout_below=\"@+id/ll_tab\">\n\n            </FrameLayout>\n\n        </RelativeLayout>\n\n    </com.example.mydemo.view.WeiBoScrollView>\n    <RelativeLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:orientation=\"vertical\">\n\n        <TextView\n            android:id=\"@+id/tv_title_text\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"35dp\"\n            android:gravity=\"center\"\n            android:text=\"Title\"\n            android:textColor=\"#ffffff\"\n            android:textSize=\"18sp\"/>\n\n        <View\n            android:id=\"@+id/title_divider\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"1dp\"\n            android:layout_below=\"@+id/tv_title_text\"\n            android:background=\"#e6e6e6\"\n            android:visibility=\"gone\"></View>\n        <!--悬停导航标题栏-->\n        <include\n            android:id=\"@+id/ll_sus_tab\"\n            layout=\"@layout/inclue_weibo4\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:layout_below=\"@+id/title_divider\"\n            android:visibility=\"invisible\"></include>\n    </RelativeLayout>\n\n\n</FrameLayout>\n```\n\n当SrcollView滑动的时候进行监听-->\n```Java\n scro.setOnScrollViewListener(new WeiBoScrollView.OnScrollViewListener() {\n            @Override\n            public void onSrcollChange(int scrollX, int scrollY, int oldScrollX, int oldScrollY) {\n                //当滑动的时候\n                //如果向上滑动的距离 >= iv_img.height - tv_title_text.height,隐藏的标题导航栏设置显示\n                int imgHeight = iv_img.getHeight();\n                int titleHeight = tv_title_text.getHeight();\n\n\n                int distanceScrollY = imgHeight - titleHeight;\n\n                if (scrollY >= distanceScrollY) {\n                    //需要显示 固定的标题栏啦\n                    ll_sus_tab.setVisibility(View.VISIBLE);\n                    title_divider.setVisibility(View.VISIBLE);\n                } else {\n                    ll_sus_tab.setVisibility(View.INVISIBLE);\n                    title_divider.setVisibility(View.GONE);\n                }\n\n                //设置标题栏渐变\n                if (scrollY <= 0) {\n                    //初始位置：未滑动时，设置标题背景透明\n                    tv_title_text.setBackgroundColor(Color.TRANSPARENT);\n                    tv_title_text.setTextColor(Color.WHITE);\n                } else if (scrollY > 0 && scrollY <= distanceScrollY) {\n                    float scale = Float.valueOf(scrollY) / distanceScrollY;\n                    float alpha = 255 * scale;\n\n                    int al = (int) alpha;\n                    tv_title_text.setBackgroundColor(Color.argb(al, 255, 255, 255));\n                    tv_title_text.setTextColor(Color.argb(al, 0, 0, 0));\n                } else {\n                    tv_title_text.setBackgroundColor(Color.argb(255, 255, 255, 255));\n                    tv_title_text.setTextColor(Color.argb(255, 0, 0, 0));\n                }\n\n            }\n        });\n\n```\n\n[具体代码查看github](https://github.com/songjiabin/androidDemo)\n","source":"_posts/仿照微博折叠效果.md","raw":"---\ntitle: 仿照微博折叠效果\ndate: 2018-08-13 14:38:35\ntags:\ncopyright: true\n\n---\n\n\n\n<blockquote class=\"blockquote-center\">安排</blockquote>\n\n<!-- more -->\n\n\n仿照微博效果如图：\n\n- - - - - - ![微博折叠效果.gif](https://upload-images.jianshu.io/upload_images/2953304-603a60c0f0c05570.gif?imageMogr2/auto-orient/strip)\n- \n\n一个顶部可以折叠的效果\n\n> 思路：浮动布局是Title始终在上方（有主页的和Title布局）。在ScrollView滑动的时候。进行监听，当滑动的距离大于 图片的高度-title的高度的时候 进行显示浮动布局。\n\n如图：\n![布局.png](https://upload-images.jianshu.io/upload_images/2953304-b02a4e5badf6cf49.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\n\n\n布局如下：\n```Java\n<FrameLayout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\">\n\n\n    <com.example.mydemo.view.WeiBoScrollView\n        android:id=\"@+id/scro\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\">\n        <RelativeLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\">\n\n\n            <ImageView\n                android:id=\"@+id/iv_img\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"200dp\"\n                android:scaleType=\"fitXY\"\n                android:src=\"@drawable/bg_wb\"/>\n\n\n            <include\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"wrap_content\"\n                android:layout_below=\"@+id/iv_img\"\n                android:id=\"@+id/ll_tab\"\n                layout=\"@layout/inclue_weibo4\"\n            />\n\n\n            <FrameLayout android:id=\"@+id/fl_container\"\n                         android:layout_width=\"match_parent\"\n                         android:layout_height=\"wrap_content\"\n                         android:layout_below=\"@+id/ll_tab\">\n\n            </FrameLayout>\n\n        </RelativeLayout>\n\n    </com.example.mydemo.view.WeiBoScrollView>\n    <RelativeLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:orientation=\"vertical\">\n\n        <TextView\n            android:id=\"@+id/tv_title_text\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"35dp\"\n            android:gravity=\"center\"\n            android:text=\"Title\"\n            android:textColor=\"#ffffff\"\n            android:textSize=\"18sp\"/>\n\n        <View\n            android:id=\"@+id/title_divider\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"1dp\"\n            android:layout_below=\"@+id/tv_title_text\"\n            android:background=\"#e6e6e6\"\n            android:visibility=\"gone\"></View>\n        <!--悬停导航标题栏-->\n        <include\n            android:id=\"@+id/ll_sus_tab\"\n            layout=\"@layout/inclue_weibo4\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:layout_below=\"@+id/title_divider\"\n            android:visibility=\"invisible\"></include>\n    </RelativeLayout>\n\n\n</FrameLayout>\n```\n\n当SrcollView滑动的时候进行监听-->\n```Java\n scro.setOnScrollViewListener(new WeiBoScrollView.OnScrollViewListener() {\n            @Override\n            public void onSrcollChange(int scrollX, int scrollY, int oldScrollX, int oldScrollY) {\n                //当滑动的时候\n                //如果向上滑动的距离 >= iv_img.height - tv_title_text.height,隐藏的标题导航栏设置显示\n                int imgHeight = iv_img.getHeight();\n                int titleHeight = tv_title_text.getHeight();\n\n\n                int distanceScrollY = imgHeight - titleHeight;\n\n                if (scrollY >= distanceScrollY) {\n                    //需要显示 固定的标题栏啦\n                    ll_sus_tab.setVisibility(View.VISIBLE);\n                    title_divider.setVisibility(View.VISIBLE);\n                } else {\n                    ll_sus_tab.setVisibility(View.INVISIBLE);\n                    title_divider.setVisibility(View.GONE);\n                }\n\n                //设置标题栏渐变\n                if (scrollY <= 0) {\n                    //初始位置：未滑动时，设置标题背景透明\n                    tv_title_text.setBackgroundColor(Color.TRANSPARENT);\n                    tv_title_text.setTextColor(Color.WHITE);\n                } else if (scrollY > 0 && scrollY <= distanceScrollY) {\n                    float scale = Float.valueOf(scrollY) / distanceScrollY;\n                    float alpha = 255 * scale;\n\n                    int al = (int) alpha;\n                    tv_title_text.setBackgroundColor(Color.argb(al, 255, 255, 255));\n                    tv_title_text.setTextColor(Color.argb(al, 0, 0, 0));\n                } else {\n                    tv_title_text.setBackgroundColor(Color.argb(255, 255, 255, 255));\n                    tv_title_text.setTextColor(Color.argb(255, 0, 0, 0));\n                }\n\n            }\n        });\n\n```\n\n[具体代码查看github](https://github.com/songjiabin/androidDemo)\n","slug":"仿照微博折叠效果","published":1,"updated":"2018-08-16T09:36:42.901Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjkxc5ssi0000gguq6n815tu4","content":"<blockquote class=\"blockquote-center\">安排</blockquote>\n\n<a id=\"more\"></a>\n<p>仿照微博效果如图：</p>\n<ul>\n<li><ul>\n<li><ul>\n<li><ul>\n<li><ul>\n<li><ul>\n<li><img src=\"https://upload-images.jianshu.io/upload_images/2953304-603a60c0f0c05570.gif?imageMogr2/auto-orient/strip\" alt=\"微博折叠效果.gif\"></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li></li>\n</ul>\n<p>一个顶部可以折叠的效果</p>\n<blockquote>\n<p>思路：浮动布局是Title始终在上方（有主页的和Title布局）。在ScrollView滑动的时候。进行监听，当滑动的距离大于 图片的高度-title的高度的时候 进行显示浮动布局。</p>\n</blockquote>\n<p>如图：<br><img src=\"https://upload-images.jianshu.io/upload_images/2953304-b02a4e5badf6cf49.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"布局.png\"></p>\n<p>布局如下：<br><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;FrameLayout</span><br><span class=\"line\">    xmlns:android=<span class=\"string\">\"http://schemas.android.com/apk/res/android\"</span></span><br><span class=\"line\">    android:layout_width=<span class=\"string\">\"match_parent\"</span></span><br><span class=\"line\">    android:layout_height=<span class=\"string\">\"match_parent\"</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;com.example.mydemo.view.WeiBoScrollView</span><br><span class=\"line\">        android:id=<span class=\"string\">\"@+id/scro\"</span></span><br><span class=\"line\">        android:layout_width=<span class=\"string\">\"match_parent\"</span></span><br><span class=\"line\">        android:layout_height=<span class=\"string\">\"match_parent\"</span>&gt;</span><br><span class=\"line\">        &lt;RelativeLayout</span><br><span class=\"line\">            android:layout_width=<span class=\"string\">\"match_parent\"</span></span><br><span class=\"line\">            android:layout_height=<span class=\"string\">\"wrap_content\"</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">            &lt;ImageView</span><br><span class=\"line\">                android:id=<span class=\"string\">\"@+id/iv_img\"</span></span><br><span class=\"line\">                android:layout_width=<span class=\"string\">\"match_parent\"</span></span><br><span class=\"line\">                android:layout_height=<span class=\"string\">\"200dp\"</span></span><br><span class=\"line\">                android:scaleType=<span class=\"string\">\"fitXY\"</span></span><br><span class=\"line\">                android:src=<span class=\"string\">\"@drawable/bg_wb\"</span>/&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">            &lt;include</span><br><span class=\"line\">                android:layout_width=<span class=\"string\">\"match_parent\"</span></span><br><span class=\"line\">                android:layout_height=<span class=\"string\">\"wrap_content\"</span></span><br><span class=\"line\">                android:layout_below=<span class=\"string\">\"@+id/iv_img\"</span></span><br><span class=\"line\">                android:id=<span class=\"string\">\"@+id/ll_tab\"</span></span><br><span class=\"line\">                layout=<span class=\"string\">\"@layout/inclue_weibo4\"</span></span><br><span class=\"line\">            /&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">            &lt;FrameLayout android:id=<span class=\"string\">\"@+id/fl_container\"</span></span><br><span class=\"line\">                         android:layout_width=<span class=\"string\">\"match_parent\"</span></span><br><span class=\"line\">                         android:layout_height=<span class=\"string\">\"wrap_content\"</span></span><br><span class=\"line\">                         android:layout_below=<span class=\"string\">\"@+id/ll_tab\"</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">            &lt;/FrameLayout&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">        &lt;/RelativeLayout&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;/com.example.mydemo.view.WeiBoScrollView&gt;</span><br><span class=\"line\">    &lt;RelativeLayout</span><br><span class=\"line\">        android:layout_width=<span class=\"string\">\"match_parent\"</span></span><br><span class=\"line\">        android:layout_height=<span class=\"string\">\"wrap_content\"</span></span><br><span class=\"line\">        android:orientation=<span class=\"string\">\"vertical\"</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">        &lt;TextView</span><br><span class=\"line\">            android:id=<span class=\"string\">\"@+id/tv_title_text\"</span></span><br><span class=\"line\">            android:layout_width=<span class=\"string\">\"match_parent\"</span></span><br><span class=\"line\">            android:layout_height=<span class=\"string\">\"35dp\"</span></span><br><span class=\"line\">            android:gravity=<span class=\"string\">\"center\"</span></span><br><span class=\"line\">            android:text=<span class=\"string\">\"Title\"</span></span><br><span class=\"line\">            android:textColor=<span class=\"string\">\"#ffffff\"</span></span><br><span class=\"line\">            android:textSize=<span class=\"string\">\"18sp\"</span>/&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">        &lt;View</span><br><span class=\"line\">            android:id=<span class=\"string\">\"@+id/title_divider\"</span></span><br><span class=\"line\">            android:layout_width=<span class=\"string\">\"match_parent\"</span></span><br><span class=\"line\">            android:layout_height=<span class=\"string\">\"1dp\"</span></span><br><span class=\"line\">            android:layout_below=<span class=\"string\">\"@+id/tv_title_text\"</span></span><br><span class=\"line\">            android:background=<span class=\"string\">\"#e6e6e6\"</span></span><br><span class=\"line\">            android:visibility=\"gone\"&gt;&lt;/View&gt;</span><br><span class=\"line\">        &lt;!--悬停导航标题栏--&gt;</span><br><span class=\"line\">        &lt;include</span><br><span class=\"line\">            android:id=<span class=\"string\">\"@+id/ll_sus_tab\"</span></span><br><span class=\"line\">            layout=<span class=\"string\">\"@layout/inclue_weibo4\"</span></span><br><span class=\"line\">            android:layout_width=<span class=\"string\">\"match_parent\"</span></span><br><span class=\"line\">            android:layout_height=<span class=\"string\">\"wrap_content\"</span></span><br><span class=\"line\">            android:layout_below=<span class=\"string\">\"@+id/title_divider\"</span></span><br><span class=\"line\">            android:visibility=\"invisible\"&gt;&lt;/include&gt;</span><br><span class=\"line\">    &lt;/RelativeLayout&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&lt;/FrameLayout&gt;</span><br></pre></td></tr></table></figure></p>\n<p>当SrcollView滑动的时候进行监听–&gt;<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">scro.setOnScrollViewListener(<span class=\"keyword\">new</span> WeiBoScrollView.OnScrollViewListener() &#123;</span><br><span class=\"line\">           <span class=\"meta\">@Override</span></span><br><span class=\"line\">           <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onSrcollChange</span><span class=\"params\">(<span class=\"keyword\">int</span> scrollX, <span class=\"keyword\">int</span> scrollY, <span class=\"keyword\">int</span> oldScrollX, <span class=\"keyword\">int</span> oldScrollY)</span> </span>&#123;</span><br><span class=\"line\">               <span class=\"comment\">//当滑动的时候</span></span><br><span class=\"line\">               <span class=\"comment\">//如果向上滑动的距离 &gt;= iv_img.height - tv_title_text.height,隐藏的标题导航栏设置显示</span></span><br><span class=\"line\">               <span class=\"keyword\">int</span> imgHeight = iv_img.getHeight();</span><br><span class=\"line\">               <span class=\"keyword\">int</span> titleHeight = tv_title_text.getHeight();</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">               <span class=\"keyword\">int</span> distanceScrollY = imgHeight - titleHeight;</span><br><span class=\"line\"></span><br><span class=\"line\">               <span class=\"keyword\">if</span> (scrollY &gt;= distanceScrollY) &#123;</span><br><span class=\"line\">                   <span class=\"comment\">//需要显示 固定的标题栏啦</span></span><br><span class=\"line\">                   ll_sus_tab.setVisibility(View.VISIBLE);</span><br><span class=\"line\">                   title_divider.setVisibility(View.VISIBLE);</span><br><span class=\"line\">               &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                   ll_sus_tab.setVisibility(View.INVISIBLE);</span><br><span class=\"line\">                   title_divider.setVisibility(View.GONE);</span><br><span class=\"line\">               &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">               <span class=\"comment\">//设置标题栏渐变</span></span><br><span class=\"line\">               <span class=\"keyword\">if</span> (scrollY &lt;= <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">                   <span class=\"comment\">//初始位置：未滑动时，设置标题背景透明</span></span><br><span class=\"line\">                   tv_title_text.setBackgroundColor(Color.TRANSPARENT);</span><br><span class=\"line\">                   tv_title_text.setTextColor(Color.WHITE);</span><br><span class=\"line\">               &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (scrollY &gt; <span class=\"number\">0</span> &amp;&amp; scrollY &lt;= distanceScrollY) &#123;</span><br><span class=\"line\">                   <span class=\"keyword\">float</span> scale = Float.valueOf(scrollY) / distanceScrollY;</span><br><span class=\"line\">                   <span class=\"keyword\">float</span> alpha = <span class=\"number\">255</span> * scale;</span><br><span class=\"line\"></span><br><span class=\"line\">                   <span class=\"keyword\">int</span> al = (<span class=\"keyword\">int</span>) alpha;</span><br><span class=\"line\">                   tv_title_text.setBackgroundColor(Color.argb(al, <span class=\"number\">255</span>, <span class=\"number\">255</span>, <span class=\"number\">255</span>));</span><br><span class=\"line\">                   tv_title_text.setTextColor(Color.argb(al, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>));</span><br><span class=\"line\">               &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                   tv_title_text.setBackgroundColor(Color.argb(<span class=\"number\">255</span>, <span class=\"number\">255</span>, <span class=\"number\">255</span>, <span class=\"number\">255</span>));</span><br><span class=\"line\">                   tv_title_text.setTextColor(Color.argb(<span class=\"number\">255</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>));</span><br><span class=\"line\">               &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">           &#125;</span><br><span class=\"line\">       &#125;);</span><br></pre></td></tr></table></figure></p>\n<p><a href=\"https://github.com/songjiabin/androidDemo\" target=\"_blank\" rel=\"noopener\">具体代码查看github</a></p>\n","site":{"data":{}},"excerpt":"<blockquote class=\"blockquote-center\">安排</blockquote>","more":"<p>仿照微博效果如图：</p>\n<ul>\n<li><ul>\n<li><ul>\n<li><ul>\n<li><ul>\n<li><ul>\n<li><img src=\"https://upload-images.jianshu.io/upload_images/2953304-603a60c0f0c05570.gif?imageMogr2/auto-orient/strip\" alt=\"微博折叠效果.gif\"></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li></li>\n</ul>\n<p>一个顶部可以折叠的效果</p>\n<blockquote>\n<p>思路：浮动布局是Title始终在上方（有主页的和Title布局）。在ScrollView滑动的时候。进行监听，当滑动的距离大于 图片的高度-title的高度的时候 进行显示浮动布局。</p>\n</blockquote>\n<p>如图：<br><img src=\"https://upload-images.jianshu.io/upload_images/2953304-b02a4e5badf6cf49.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"布局.png\"></p>\n<p>布局如下：<br><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;FrameLayout</span><br><span class=\"line\">    xmlns:android=<span class=\"string\">\"http://schemas.android.com/apk/res/android\"</span></span><br><span class=\"line\">    android:layout_width=<span class=\"string\">\"match_parent\"</span></span><br><span class=\"line\">    android:layout_height=<span class=\"string\">\"match_parent\"</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;com.example.mydemo.view.WeiBoScrollView</span><br><span class=\"line\">        android:id=<span class=\"string\">\"@+id/scro\"</span></span><br><span class=\"line\">        android:layout_width=<span class=\"string\">\"match_parent\"</span></span><br><span class=\"line\">        android:layout_height=<span class=\"string\">\"match_parent\"</span>&gt;</span><br><span class=\"line\">        &lt;RelativeLayout</span><br><span class=\"line\">            android:layout_width=<span class=\"string\">\"match_parent\"</span></span><br><span class=\"line\">            android:layout_height=<span class=\"string\">\"wrap_content\"</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">            &lt;ImageView</span><br><span class=\"line\">                android:id=<span class=\"string\">\"@+id/iv_img\"</span></span><br><span class=\"line\">                android:layout_width=<span class=\"string\">\"match_parent\"</span></span><br><span class=\"line\">                android:layout_height=<span class=\"string\">\"200dp\"</span></span><br><span class=\"line\">                android:scaleType=<span class=\"string\">\"fitXY\"</span></span><br><span class=\"line\">                android:src=<span class=\"string\">\"@drawable/bg_wb\"</span>/&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">            &lt;include</span><br><span class=\"line\">                android:layout_width=<span class=\"string\">\"match_parent\"</span></span><br><span class=\"line\">                android:layout_height=<span class=\"string\">\"wrap_content\"</span></span><br><span class=\"line\">                android:layout_below=<span class=\"string\">\"@+id/iv_img\"</span></span><br><span class=\"line\">                android:id=<span class=\"string\">\"@+id/ll_tab\"</span></span><br><span class=\"line\">                layout=<span class=\"string\">\"@layout/inclue_weibo4\"</span></span><br><span class=\"line\">            /&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">            &lt;FrameLayout android:id=<span class=\"string\">\"@+id/fl_container\"</span></span><br><span class=\"line\">                         android:layout_width=<span class=\"string\">\"match_parent\"</span></span><br><span class=\"line\">                         android:layout_height=<span class=\"string\">\"wrap_content\"</span></span><br><span class=\"line\">                         android:layout_below=<span class=\"string\">\"@+id/ll_tab\"</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">            &lt;/FrameLayout&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">        &lt;/RelativeLayout&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;/com.example.mydemo.view.WeiBoScrollView&gt;</span><br><span class=\"line\">    &lt;RelativeLayout</span><br><span class=\"line\">        android:layout_width=<span class=\"string\">\"match_parent\"</span></span><br><span class=\"line\">        android:layout_height=<span class=\"string\">\"wrap_content\"</span></span><br><span class=\"line\">        android:orientation=<span class=\"string\">\"vertical\"</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">        &lt;TextView</span><br><span class=\"line\">            android:id=<span class=\"string\">\"@+id/tv_title_text\"</span></span><br><span class=\"line\">            android:layout_width=<span class=\"string\">\"match_parent\"</span></span><br><span class=\"line\">            android:layout_height=<span class=\"string\">\"35dp\"</span></span><br><span class=\"line\">            android:gravity=<span class=\"string\">\"center\"</span></span><br><span class=\"line\">            android:text=<span class=\"string\">\"Title\"</span></span><br><span class=\"line\">            android:textColor=<span class=\"string\">\"#ffffff\"</span></span><br><span class=\"line\">            android:textSize=<span class=\"string\">\"18sp\"</span>/&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">        &lt;View</span><br><span class=\"line\">            android:id=<span class=\"string\">\"@+id/title_divider\"</span></span><br><span class=\"line\">            android:layout_width=<span class=\"string\">\"match_parent\"</span></span><br><span class=\"line\">            android:layout_height=<span class=\"string\">\"1dp\"</span></span><br><span class=\"line\">            android:layout_below=<span class=\"string\">\"@+id/tv_title_text\"</span></span><br><span class=\"line\">            android:background=<span class=\"string\">\"#e6e6e6\"</span></span><br><span class=\"line\">            android:visibility=\"gone\"&gt;&lt;/View&gt;</span><br><span class=\"line\">        &lt;!--悬停导航标题栏--&gt;</span><br><span class=\"line\">        &lt;include</span><br><span class=\"line\">            android:id=<span class=\"string\">\"@+id/ll_sus_tab\"</span></span><br><span class=\"line\">            layout=<span class=\"string\">\"@layout/inclue_weibo4\"</span></span><br><span class=\"line\">            android:layout_width=<span class=\"string\">\"match_parent\"</span></span><br><span class=\"line\">            android:layout_height=<span class=\"string\">\"wrap_content\"</span></span><br><span class=\"line\">            android:layout_below=<span class=\"string\">\"@+id/title_divider\"</span></span><br><span class=\"line\">            android:visibility=\"invisible\"&gt;&lt;/include&gt;</span><br><span class=\"line\">    &lt;/RelativeLayout&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&lt;/FrameLayout&gt;</span><br></pre></td></tr></table></figure></p>\n<p>当SrcollView滑动的时候进行监听–&gt;<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">scro.setOnScrollViewListener(<span class=\"keyword\">new</span> WeiBoScrollView.OnScrollViewListener() &#123;</span><br><span class=\"line\">           <span class=\"meta\">@Override</span></span><br><span class=\"line\">           <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onSrcollChange</span><span class=\"params\">(<span class=\"keyword\">int</span> scrollX, <span class=\"keyword\">int</span> scrollY, <span class=\"keyword\">int</span> oldScrollX, <span class=\"keyword\">int</span> oldScrollY)</span> </span>&#123;</span><br><span class=\"line\">               <span class=\"comment\">//当滑动的时候</span></span><br><span class=\"line\">               <span class=\"comment\">//如果向上滑动的距离 &gt;= iv_img.height - tv_title_text.height,隐藏的标题导航栏设置显示</span></span><br><span class=\"line\">               <span class=\"keyword\">int</span> imgHeight = iv_img.getHeight();</span><br><span class=\"line\">               <span class=\"keyword\">int</span> titleHeight = tv_title_text.getHeight();</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">               <span class=\"keyword\">int</span> distanceScrollY = imgHeight - titleHeight;</span><br><span class=\"line\"></span><br><span class=\"line\">               <span class=\"keyword\">if</span> (scrollY &gt;= distanceScrollY) &#123;</span><br><span class=\"line\">                   <span class=\"comment\">//需要显示 固定的标题栏啦</span></span><br><span class=\"line\">                   ll_sus_tab.setVisibility(View.VISIBLE);</span><br><span class=\"line\">                   title_divider.setVisibility(View.VISIBLE);</span><br><span class=\"line\">               &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                   ll_sus_tab.setVisibility(View.INVISIBLE);</span><br><span class=\"line\">                   title_divider.setVisibility(View.GONE);</span><br><span class=\"line\">               &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">               <span class=\"comment\">//设置标题栏渐变</span></span><br><span class=\"line\">               <span class=\"keyword\">if</span> (scrollY &lt;= <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">                   <span class=\"comment\">//初始位置：未滑动时，设置标题背景透明</span></span><br><span class=\"line\">                   tv_title_text.setBackgroundColor(Color.TRANSPARENT);</span><br><span class=\"line\">                   tv_title_text.setTextColor(Color.WHITE);</span><br><span class=\"line\">               &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (scrollY &gt; <span class=\"number\">0</span> &amp;&amp; scrollY &lt;= distanceScrollY) &#123;</span><br><span class=\"line\">                   <span class=\"keyword\">float</span> scale = Float.valueOf(scrollY) / distanceScrollY;</span><br><span class=\"line\">                   <span class=\"keyword\">float</span> alpha = <span class=\"number\">255</span> * scale;</span><br><span class=\"line\"></span><br><span class=\"line\">                   <span class=\"keyword\">int</span> al = (<span class=\"keyword\">int</span>) alpha;</span><br><span class=\"line\">                   tv_title_text.setBackgroundColor(Color.argb(al, <span class=\"number\">255</span>, <span class=\"number\">255</span>, <span class=\"number\">255</span>));</span><br><span class=\"line\">                   tv_title_text.setTextColor(Color.argb(al, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>));</span><br><span class=\"line\">               &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                   tv_title_text.setBackgroundColor(Color.argb(<span class=\"number\">255</span>, <span class=\"number\">255</span>, <span class=\"number\">255</span>, <span class=\"number\">255</span>));</span><br><span class=\"line\">                   tv_title_text.setTextColor(Color.argb(<span class=\"number\">255</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>));</span><br><span class=\"line\">               &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">           &#125;</span><br><span class=\"line\">       &#125;);</span><br></pre></td></tr></table></figure></p>\n<p><a href=\"https://github.com/songjiabin/androidDemo\" target=\"_blank\" rel=\"noopener\">具体代码查看github</a></p>"},{"title":"popularWindow","date":"2018-08-13T06:38:35.000Z","_content":"\n\n<blockquote class=\"blockquote-center\">雄起</blockquote>\n\n\n\n\n> PopupWindow这个类用来实现一个弹出框，可以使用任意布局的View作为其内容，这个弹出框是悬浮在当前activity之上的。\n\n#### 平常常见的创建方法是\n\n```Java\n    if (popupView != null && popupWindow.isShowing()) {\n            popupWindow.dismiss();\n            return;\n        }\n\n\n        //准备PopupWindow的布局View\n        popupView = LayoutInflater.from(this).inflate(R.layout.popular_window, null);\n        //初始化一个PopupWindow，width和height都是WRAP_CONTENT\n\n\n        popupView.measure(0, 0);\n\n        popupWindow = new PopupWindow(popupView, popupView.getMeasuredWidth(), popupView.getMeasuredHeight(), true);\n\n\n//  不要这些创建 否则不能得到 popularWindow 的高度和宽度\n//        popupWindow = new PopupWindow(\n//                ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT);\n\n\n        //设置PopupWindow的视图内容\n        popupWindow.setContentView(popupView);\n        //点击空白区域PopupWindow消失，这里必须先设置setBackgroundDrawable，否则点击无反应\n        popupWindow.setBackgroundDrawable(new ColorDrawable(0x00000000));\n        popupWindow.setOutsideTouchable(true);\n        //设置PopupWindow动画\n        popupWindow.setAnimationStyle(R.style.Theme_AppCompat_DialogWhenLarge);\n        //设置是否允许PopupWindow的范围超过屏幕范围\n        popupWindow.setClippingEnabled(true);\n        //注意必须设置焦点   不然 isShowing不执行\n        popupWindow.setFocusable(true);\n        //设置PopupWindow消失监听\n        popupWindow.setOnDismissListener(new PopupWindow.OnDismissListener() {\n            @Override\n            public void onDismiss() {\n\n            }\n        });\n```\n\n#### 展示popuwindow的定位展示\n效果如图\n![效果图](http://t1.aixinxi.net/o_1cktom2pb193t1r02gaa1o8l1d2ia.gif-w.jpg)\n\n定位其实用到了 \n> showAsDropDown(View anchor) : 显示在参照物的周围\n\n>  showAsDropDown(View anchor, int xoff, int yoff)   xoff、yoff分别是X轴、Y轴的偏移量\n\n> public void showAtLocation(View parent, int gravity, int x, int y)\n 这个两个方法\n\n代码有具体介绍：\n```Java\n //向下弹框\n    private void bottom(View view) {\n        //showAsDropDown(View anchor) : 显示在参照物的周围\n        //showAsDropDown(View anchor, int xoff, int yoff)   xoff、yoff分别是X轴、Y轴的偏移量\n        //如果不设置  xoff、yoff  默认显示到 参照物的下面\n        //不设置 xoff ,yoff 默认到 参照物下面\n\n        //public void showAtLocation(View parent, int gravity, int x, int y)\n        //设置在父控件的位置  example: Gravity.BOTTOM 表示在父控件的底部弹出   x ， y  分别是 x y 轴的偏移量\n\n        popupWindow.showAsDropDown(view);\n    }\n    \n\n //向左弹框\n    private void left(View view) {\n        //public void showAtLocation(View parent, int gravity, int x, int y)\n        //设置在父控件的位置  example: Gravity.BOTTOM 表示在父控件的底部弹出   x ， y  分别是 x y 轴的偏移量\n\n\n        //得到点击的控件的坐标\n        int[] positions = new int[2];\n        view.getLocationOnScreen(positions);\n        //其实 positions[0] 表示的横坐标  position[1]表示的事纵坐标\n\n        int b = popupWindow.getWidth();\n\n\n        //整个的content的位置  findViewById(android.R.id.content)\n        popupWindow.showAtLocation(findViewById(android.R.id.content), Gravity.NO_GRAVITY, positions[0] - popupWindow.getWidth(), positions[1]);\n    }\n    \n    \n  //向上弹框\n    private void top(View view) {\n        //得到点击的控件的坐标\n        int[] positions = new int[2];\n        view.getLocationOnScreen(positions);\n        //其实 positions[0] 表示的横坐标  position[1]表示的事纵坐标\n        popupWindow.showAtLocation(view, Gravity.NO_GRAVITY, positions[0], positions[1] - popupWindow.getHeight());\n    }\n    \n    //向右弹框\n    private void right(View view) {\n        //得到点击的控件的坐标\n        int[] positions = new int[2];\n        view.getLocationOnScreen(positions);\n\n        //得到屏幕高度\n        int screenHeight = ScreenUtils.getScreenHeight(this);\n\n        int y =screenHeight - popupWindow.getHeight();\n\n        //其实 positions[0] 表示的横坐标  position[1]表示的事纵坐标\n        popupWindow.showAtLocation(view, Gravity.NO_GRAVITY, positions[0] + btn_nomar_popular_right.getMeasuredWidth(), y);\n    }\n```\n \n#### 封装popularWindow \n使用建造中模式\n```Java\npublic class CommonPopularWindow extends PopupWindow {\n\n\n    private PopularController popularController;\n\n    public CommonPopularWindow(Context context) {\n        super(context);\n        this.popularController = new PopularController(context, this);\n    }\n\n\n    /**\n     * 当popular 关闭的时候\n     */\n    @Override\n    public void dismiss() {\n        super.dismiss();\n        //将背景恢复\n        this.popularController.setBackGroundLevel(1.0f);\n    }\n\n\n    @Override\n    public int getWidth() {\n        return popularController.contentView.getMeasuredWidth();\n    }\n\n    @Override\n    public int getHeight() {\n        return popularController.contentView.getMeasuredHeight();\n    }\n\n\n    public static class Builder {\n\n\n        private PopularController.PopularParams params;\n        private ViewInterface listener;\n\n\n\n        public Builder(Context context) {\n            params = new PopularController.PopularParams(context);\n        }\n\n\n        public Builder setView(int layoutResId) {\n            params.mView = null;\n            params.layoutResId = layoutResId;\n            return this;\n        }\n\n\n        public Builder setWidthAndHeigth(int width, int height) {\n            params.mWidth = width;\n            params.mHeight = height;\n            return this;\n        }\n\n\n        public Builder setBackGroundLevel(float level) {\n            params.bg_level = level;\n            return this;\n        }\n\n        public Builder setOutsideTouchable(boolean toubalbe) {\n            params.isTouchable = toubalbe;\n            return this;\n        }\n\n        public Builder setAnimationStyle(int animationStyle) {\n            params.animationStyle = animationStyle;\n            return this;\n        }\n\n        public Builder setViewOnclickListener(ViewInterface listener) {\n            this.listener = listener;\n            return this;\n        }\n\n        public CommonPopularWindow create() {\n            CommonPopularWindow myCommonPopularWindow = new CommonPopularWindow(params.context);\n            params.apply(myCommonPopularWindow.popularController);\n            if (listener != null && params.layoutResId != 0) {\n                listener.getChildView(myCommonPopularWindow.popularController.contentView, params.layoutResId);\n            }\n            CommonUtil.measureWidthAndHeight(myCommonPopularWindow.popularController.contentView);\n            return myCommonPopularWindow;\n        }\n\n    }\n\n\n    public interface ViewInterface {\n        void getChildView(View view, int layoutResId);\n    }\n\n\n}\n```\n\n```Java\npublic class PopularController {\n\n\n    private CommonPopularWindow popuWindow;\n    private Context context;\n    public View contentView;\n    private Window mWindow;\n\n    public PopularController(Context context, CommonPopularWindow commonPopularWindow) {\n        this.context = context;\n        this.popuWindow = commonPopularWindow;\n    }\n\n\n    /**\n     * 创建 View\n     */\n    public void createView(int view) {\n        this.contentView = LayoutInflater.from(context).inflate(view, null);\n        this.popuWindow.setContentView(this.contentView);\n    }\n\n    /**\n     * 创建 View\n     */\n    public void createView(View view) {\n        this.contentView = null;\n        this.contentView = view;\n        this.popuWindow.setContentView(this.contentView);\n    }\n\n\n    /**\n     * 设置popular的宽和高\n     *\n     * @param width\n     * @param height\n     */\n    public void setPopuWindowWihthAndHeight(int width, int height) {\n        if (width == 0 || height == 0) {\n            this.popuWindow.setHeight(ViewGroup.LayoutParams.WRAP_CONTENT);\n            this.popuWindow.setWidth(ViewGroup.LayoutParams.WRAP_CONTENT);\n        } else {\n            this.popuWindow.setWidth(width);\n            this.popuWindow.setHeight(height);\n        }\n    }\n\n\n    /**\n     * 设置 popular的透明度\n     * 当弹框的时候 改变背景颜色\n     * 改变的是 window 透明度\n     *\n     * @param level\n     */\n    public void setBackGroundLevel(float level) {\n        mWindow = ((Activity) context).getWindow();\n        WindowManager.LayoutParams params = mWindow.getAttributes();\n        params.alpha = level;\n        mWindow.setAttributes(params);\n    }\n\n\n    /**\n     * 设置popular动画\n     *\n     * @param animationStyle\n     */\n    public void setAnimationStyle(int animationStyle) {\n        this.popuWindow.setAnimationStyle(animationStyle);\n    }\n\n\n    /**\n     * 设置popular外部是否可以点击\n     *\n     * @param touchable\n     */\n    public void setOutSideTouchable(boolean touchable) {\n        //设置是否可点击的时候必须先设置透明度\n        this.popuWindow.setBackgroundDrawable(new ColorDrawable(0x00000000));//设置透明度\n        this.popuWindow.setOutsideTouchable(touchable);\n        this.popuWindow.setFocusable(touchable);\n    }\n\n\n    public static class PopularParams {\n\n        public int layoutResId;//布局id\n        public int mWidth, mHeight;//弹窗的宽和高\n        public float bg_level;//屏幕背景灰色程度\n        public int animationStyle;//动画Id\n        public View mView;//布局View\n        public boolean isTouchable = true;//是否可以点击\n\n\n        public Context context;\n\n        public PopularParams(Context context) {\n            this.context = context;\n        }\n\n        public void apply(PopularController popularController) {\n\n            if (mView != null) {\n                popularController.createView(mView);\n            } else if (layoutResId != 0) {\n                popularController.createView(layoutResId);\n            }\n\n            popularController.setPopuWindowWihthAndHeight(mWidth, mWidth);\n\n            popularController.setOutSideTouchable(isTouchable);\n\n            popularController.setBackGroundLevel(bg_level);\n            popularController.setAnimationStyle(animationStyle);\n\n        }\n\n    }\n}\n```\n#### 使用封装的popuwindow\n```Java\nfindViewById(R.id.btn_popular_all).setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                CommonPopularWindow popu = new CommonPopularWindow.Builder(PopularWindowActivity.this)\n                        .setView(R.layout.popular_window)\n                        .setWidthAndHeigth(0, 0)\n                        .setBackGroundLevel(0.5f).setViewOnclickListener(new CommonPopularWindow.ViewInterface() {\n                            @Override\n                            public void getChildView(View view, int layoutResId) {\n                                //点击的具体idView\n                                view.findViewById(R.id.tv_popuWindow1).setOnClickListener(new View.OnClickListener() {\n                                    @Override\n                                    public void onClick(View v) {\n                                        Log.i(\"数据弹框\",\"弹框了\");\n                                    }\n                                });\n                            }\n                        }).create();\n                popu.showAsDropDown(v);\n            }\n        });\n```\n\n#### 接下来封装popuwindow的单选、多选\n效果图：\n![单选](http://t1.aixinxi.net/o_1cl0ld597r8u1kaf1e3v1l571264a.gif-w.jpg)\n![多选](https://upload-images.jianshu.io/upload_images/2953304-7562da839033fc01.gif?imageMogr2/auto-orient/strip)\n\n- 定义类。\n1、里面进行初始化PopularWindow及数据的初始化。\n2、在popular中设置listview用于展示列表\n3、自定义listview中item的布局。使用自定义的chebox和父布局\n4、根据选择的模式（单选、多选)进行不同处理。\n\n代码：\n```Java\npublic class CustomerPopular implements View.OnClickListener, AdapterView.OnItemClickListener {\n\n\n    private TextView tv_popular_cancel;\n    private TextView tv_popular_ok;\n    private ListView lv_popular_data;\n    private LinearLayout ll_popular_buttons;\n    private TextView tv_popular_title;\n    private ImageView iv_popular_down;\n    private final CommonPopularWindow.Builder budilder;\n    private Activity context;\n    private View view;\n    private static int CHOICE_STATE = 0;\n    private PopularAdapter adapter;\n    private List<PopularWindowBean> datas;\n    private CommonPopularWindow popupWindow;\n\n    public CustomerPopular(Activity context) {\n        this.context = context;\n        budilder = new CommonPopularWindow.Builder(context);\n        initView();\n        initListener();\n    }\n\n\n    private void initView() {\n        view = LayoutInflater.from(context).inflate(R.layout.popular_products, null);\n        tv_popular_cancel = (TextView) view.findViewById(R.id.tv_popular_cancel);//取消\n        tv_popular_ok = (TextView) view.findViewById(R.id.tv_popular_ok);//确定\n        ll_popular_buttons = (LinearLayout) view.findViewById(R.id.ll_popular_buttons);//确定  取消的 父布局\n        lv_popular_data = (ListView) view.findViewById(R.id.lv_popular_data);//listView\n        tv_popular_title = (TextView) view.findViewById(R.id.tv_popular_title);//标题\n        iv_popular_down = (ImageView) view.findViewById(R.id.iv_popular_down);\n    }\n\n\n    private void initListener() {\n        tv_popular_cancel.setOnClickListener(this);\n        tv_popular_ok.setOnClickListener(this);\n        iv_popular_down.setOnClickListener(this);\n        lv_popular_data.setOnItemClickListener(this);\n    }\n\n\n    @Override\n    public void onClick(View v) {\n        switch (v.getId()) {\n            case R.id.tv_popular_ok:\n                //确定按钮\n                getSelectPostion();\n                break;\n            case R.id.tv_popular_cancel:\n                //取消按钮的\n                popupWindow.dismiss();\n                break;\n            default:\n                break;\n        }\n    }\n\n    private void getSelectPostion() {\n        SparseBooleanArray checkedItems = lv_popular_data.getCheckedItemPositions();\n        if (checkedItems == null || checkedItems.size() == 0) {\n            return;\n        }\n\n        int arrays[] = new int[checkedItems.size()];\n        for (int i = 0; i < checkedItems.size(); ++i) {\n            final int position = checkedItems.keyAt(i);//点击的 position\n            final boolean isChecked = checkedItems.valueAt(i);  //是否点击\n            if (isChecked) {\n                arrays[i] = position;\n            }\n        }\n        popularItemOnclick.getOnItemPosition(arrays);\n        popupWindow.dismiss();\n    }\n\n\n    @Override\n    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {\n        //当选择的模式是单选的时候 则返回它当前的id\n        if (CHOICE_STATE == ListView.CHOICE_MODE_SINGLE) {\n            //当只有单选模式才是可以的\n            popularItemOnclick.getOnItemPosition(new int[]{position});\n            popupWindow.dismiss();\n            return;\n        }\n    }\n\n\n    /**\n     * 刷新数据\n     *\n     * @param datas\n     * @param parnent\n     * @param type\n     * @param indexs\n     * @return\n     */\n    public CustomerPopular refreshListDatas(List<PopularWindowBean> datas, View parnent, int type, int[] indexs) {\n        if (this.datas == null)\n            this.datas = new ArrayList<>();\n        this.datas.clear();\n        this.datas.addAll(datas);\n        setAdapter(parnent, type, indexs);\n        return this;\n    }\n\n\n    private void setAdapter(View parent, int type, int[] index) {\n        //items upcheck\n        this.CHOICE_STATE = type;\n        clearSelection();\n        lv_popular_data.setChoiceMode(type);\n        if (adapter == null) {\n            lv_popular_data.setItemsCanFocus(false);\n            adapter = new PopularAdapter(context, datas);\n            lv_popular_data.setAdapter(adapter);\n        }\n        //liseview显示最上面\n        for (int i = 0; index != null && i < index.length; i++) {\n            lv_popular_data.setItemChecked(index[i], true);\n        }\n        lv_popular_data.setSelection(0);\n        adapter.notifyDataSetChanged();\n\n        showAsDropDown(parent);\n    }\n\n\n    //清除状态\n    private void clearSelection() {\n        final int itemCount = lv_popular_data.getCount();\n        for (int i = 0; i < itemCount; ++i) {\n            lv_popular_data.setItemChecked(i, false);\n        }\n    }\n\n\n    private void showAsDropDown(View parent) {\n        popupWindow = budilder.setView(view).setBackGroundLevel(0.5f)\n                .setOutsideTouchable(true)\n                .create();\n\n\n        changePopularSize();\n\n        if (Build.VERSION.SDK_INT >= 24) {\n            int[] location = new int[2]; // 记录anchor在屏幕中的位置\n            parent.getLocationOnScreen(location);\n            int offsetY = location[1] + parent.getHeight();\n            if (Build.VERSION.SDK_INT == 25) { // Android 7.1中，PopupWindow高度为 match_parent 时，会占据整个屏幕\n                // 故而需要在 Android 7.1上再做特殊处理\n                int screenHeight = ScreenUtils.getScreenHeight(context); // 获取屏幕高度\n                popupWindow.setHeight(screenHeight - offsetY); // 重新设置 PopupWindow 的高度\n            }\n            popupWindow.showAtLocation(parent, Gravity.CENTER, 0, 0);\n\n        } else {\n            popupWindow.showAtLocation(parent, Gravity.CENTER, 0, 0);\n        }\n\n    }\n\n    //改变popular的大小\n    private void changePopularSize() {\n        int height_default = (int) (ScreenUtils.getScreenHeight(context) * 0.7f);\n        view.measure(0, 0);\n        int measuredHeight = view.getMeasuredHeight();\n        int count = 0;\n        int size = adapter.getCount();\n        for (int i = 0; i < size; i++) {\n            View childAt = adapter.getView(i, null, lv_popular_data);\n            if (childAt != null) {\n                childAt.measure(0, 0);\n                int measuredHeight2 = childAt.getMeasuredHeight();\n                count += measuredHeight2;\n            }\n        }\n        measuredHeight += count;\n        if (measuredHeight < height_default) {\n            popupWindow.setHeight(ViewGroup.LayoutParams.WRAP_CONTENT);\n        } else {\n            popupWindow.setHeight(height_default);\n        }\n    }\n\n\n    /**\n     * 接口 点击 popular\n     */\n    public interface OnProductPopularItemOnclick {\n        /**\n         * 得到点解的postion\n         *\n         * @param\n         */\n\n        void getOnItemPosition(int[] positionArray);\n    }\n\n    public OnProductPopularItemOnclick popularItemOnclick;\n\n    public void setPopularItemOnclick(OnProductPopularItemOnclick popularItemOnclick) {\n        this.popularItemOnclick = popularItemOnclick;\n    }\n}\n```\n[具体代码查看github](https://github.com/songjiabin/androidDemo)\n\n\n\n\n\n","source":"_posts/popularWindow.md","raw":"---\ntitle: popularWindow\ndate: 2018-08-13 14:38:35\ntags:\n\n---\n\n\n<blockquote class=\"blockquote-center\">雄起</blockquote>\n\n\n\n\n> PopupWindow这个类用来实现一个弹出框，可以使用任意布局的View作为其内容，这个弹出框是悬浮在当前activity之上的。\n\n#### 平常常见的创建方法是\n\n```Java\n    if (popupView != null && popupWindow.isShowing()) {\n            popupWindow.dismiss();\n            return;\n        }\n\n\n        //准备PopupWindow的布局View\n        popupView = LayoutInflater.from(this).inflate(R.layout.popular_window, null);\n        //初始化一个PopupWindow，width和height都是WRAP_CONTENT\n\n\n        popupView.measure(0, 0);\n\n        popupWindow = new PopupWindow(popupView, popupView.getMeasuredWidth(), popupView.getMeasuredHeight(), true);\n\n\n//  不要这些创建 否则不能得到 popularWindow 的高度和宽度\n//        popupWindow = new PopupWindow(\n//                ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT);\n\n\n        //设置PopupWindow的视图内容\n        popupWindow.setContentView(popupView);\n        //点击空白区域PopupWindow消失，这里必须先设置setBackgroundDrawable，否则点击无反应\n        popupWindow.setBackgroundDrawable(new ColorDrawable(0x00000000));\n        popupWindow.setOutsideTouchable(true);\n        //设置PopupWindow动画\n        popupWindow.setAnimationStyle(R.style.Theme_AppCompat_DialogWhenLarge);\n        //设置是否允许PopupWindow的范围超过屏幕范围\n        popupWindow.setClippingEnabled(true);\n        //注意必须设置焦点   不然 isShowing不执行\n        popupWindow.setFocusable(true);\n        //设置PopupWindow消失监听\n        popupWindow.setOnDismissListener(new PopupWindow.OnDismissListener() {\n            @Override\n            public void onDismiss() {\n\n            }\n        });\n```\n\n#### 展示popuwindow的定位展示\n效果如图\n![效果图](http://t1.aixinxi.net/o_1cktom2pb193t1r02gaa1o8l1d2ia.gif-w.jpg)\n\n定位其实用到了 \n> showAsDropDown(View anchor) : 显示在参照物的周围\n\n>  showAsDropDown(View anchor, int xoff, int yoff)   xoff、yoff分别是X轴、Y轴的偏移量\n\n> public void showAtLocation(View parent, int gravity, int x, int y)\n 这个两个方法\n\n代码有具体介绍：\n```Java\n //向下弹框\n    private void bottom(View view) {\n        //showAsDropDown(View anchor) : 显示在参照物的周围\n        //showAsDropDown(View anchor, int xoff, int yoff)   xoff、yoff分别是X轴、Y轴的偏移量\n        //如果不设置  xoff、yoff  默认显示到 参照物的下面\n        //不设置 xoff ,yoff 默认到 参照物下面\n\n        //public void showAtLocation(View parent, int gravity, int x, int y)\n        //设置在父控件的位置  example: Gravity.BOTTOM 表示在父控件的底部弹出   x ， y  分别是 x y 轴的偏移量\n\n        popupWindow.showAsDropDown(view);\n    }\n    \n\n //向左弹框\n    private void left(View view) {\n        //public void showAtLocation(View parent, int gravity, int x, int y)\n        //设置在父控件的位置  example: Gravity.BOTTOM 表示在父控件的底部弹出   x ， y  分别是 x y 轴的偏移量\n\n\n        //得到点击的控件的坐标\n        int[] positions = new int[2];\n        view.getLocationOnScreen(positions);\n        //其实 positions[0] 表示的横坐标  position[1]表示的事纵坐标\n\n        int b = popupWindow.getWidth();\n\n\n        //整个的content的位置  findViewById(android.R.id.content)\n        popupWindow.showAtLocation(findViewById(android.R.id.content), Gravity.NO_GRAVITY, positions[0] - popupWindow.getWidth(), positions[1]);\n    }\n    \n    \n  //向上弹框\n    private void top(View view) {\n        //得到点击的控件的坐标\n        int[] positions = new int[2];\n        view.getLocationOnScreen(positions);\n        //其实 positions[0] 表示的横坐标  position[1]表示的事纵坐标\n        popupWindow.showAtLocation(view, Gravity.NO_GRAVITY, positions[0], positions[1] - popupWindow.getHeight());\n    }\n    \n    //向右弹框\n    private void right(View view) {\n        //得到点击的控件的坐标\n        int[] positions = new int[2];\n        view.getLocationOnScreen(positions);\n\n        //得到屏幕高度\n        int screenHeight = ScreenUtils.getScreenHeight(this);\n\n        int y =screenHeight - popupWindow.getHeight();\n\n        //其实 positions[0] 表示的横坐标  position[1]表示的事纵坐标\n        popupWindow.showAtLocation(view, Gravity.NO_GRAVITY, positions[0] + btn_nomar_popular_right.getMeasuredWidth(), y);\n    }\n```\n \n#### 封装popularWindow \n使用建造中模式\n```Java\npublic class CommonPopularWindow extends PopupWindow {\n\n\n    private PopularController popularController;\n\n    public CommonPopularWindow(Context context) {\n        super(context);\n        this.popularController = new PopularController(context, this);\n    }\n\n\n    /**\n     * 当popular 关闭的时候\n     */\n    @Override\n    public void dismiss() {\n        super.dismiss();\n        //将背景恢复\n        this.popularController.setBackGroundLevel(1.0f);\n    }\n\n\n    @Override\n    public int getWidth() {\n        return popularController.contentView.getMeasuredWidth();\n    }\n\n    @Override\n    public int getHeight() {\n        return popularController.contentView.getMeasuredHeight();\n    }\n\n\n    public static class Builder {\n\n\n        private PopularController.PopularParams params;\n        private ViewInterface listener;\n\n\n\n        public Builder(Context context) {\n            params = new PopularController.PopularParams(context);\n        }\n\n\n        public Builder setView(int layoutResId) {\n            params.mView = null;\n            params.layoutResId = layoutResId;\n            return this;\n        }\n\n\n        public Builder setWidthAndHeigth(int width, int height) {\n            params.mWidth = width;\n            params.mHeight = height;\n            return this;\n        }\n\n\n        public Builder setBackGroundLevel(float level) {\n            params.bg_level = level;\n            return this;\n        }\n\n        public Builder setOutsideTouchable(boolean toubalbe) {\n            params.isTouchable = toubalbe;\n            return this;\n        }\n\n        public Builder setAnimationStyle(int animationStyle) {\n            params.animationStyle = animationStyle;\n            return this;\n        }\n\n        public Builder setViewOnclickListener(ViewInterface listener) {\n            this.listener = listener;\n            return this;\n        }\n\n        public CommonPopularWindow create() {\n            CommonPopularWindow myCommonPopularWindow = new CommonPopularWindow(params.context);\n            params.apply(myCommonPopularWindow.popularController);\n            if (listener != null && params.layoutResId != 0) {\n                listener.getChildView(myCommonPopularWindow.popularController.contentView, params.layoutResId);\n            }\n            CommonUtil.measureWidthAndHeight(myCommonPopularWindow.popularController.contentView);\n            return myCommonPopularWindow;\n        }\n\n    }\n\n\n    public interface ViewInterface {\n        void getChildView(View view, int layoutResId);\n    }\n\n\n}\n```\n\n```Java\npublic class PopularController {\n\n\n    private CommonPopularWindow popuWindow;\n    private Context context;\n    public View contentView;\n    private Window mWindow;\n\n    public PopularController(Context context, CommonPopularWindow commonPopularWindow) {\n        this.context = context;\n        this.popuWindow = commonPopularWindow;\n    }\n\n\n    /**\n     * 创建 View\n     */\n    public void createView(int view) {\n        this.contentView = LayoutInflater.from(context).inflate(view, null);\n        this.popuWindow.setContentView(this.contentView);\n    }\n\n    /**\n     * 创建 View\n     */\n    public void createView(View view) {\n        this.contentView = null;\n        this.contentView = view;\n        this.popuWindow.setContentView(this.contentView);\n    }\n\n\n    /**\n     * 设置popular的宽和高\n     *\n     * @param width\n     * @param height\n     */\n    public void setPopuWindowWihthAndHeight(int width, int height) {\n        if (width == 0 || height == 0) {\n            this.popuWindow.setHeight(ViewGroup.LayoutParams.WRAP_CONTENT);\n            this.popuWindow.setWidth(ViewGroup.LayoutParams.WRAP_CONTENT);\n        } else {\n            this.popuWindow.setWidth(width);\n            this.popuWindow.setHeight(height);\n        }\n    }\n\n\n    /**\n     * 设置 popular的透明度\n     * 当弹框的时候 改变背景颜色\n     * 改变的是 window 透明度\n     *\n     * @param level\n     */\n    public void setBackGroundLevel(float level) {\n        mWindow = ((Activity) context).getWindow();\n        WindowManager.LayoutParams params = mWindow.getAttributes();\n        params.alpha = level;\n        mWindow.setAttributes(params);\n    }\n\n\n    /**\n     * 设置popular动画\n     *\n     * @param animationStyle\n     */\n    public void setAnimationStyle(int animationStyle) {\n        this.popuWindow.setAnimationStyle(animationStyle);\n    }\n\n\n    /**\n     * 设置popular外部是否可以点击\n     *\n     * @param touchable\n     */\n    public void setOutSideTouchable(boolean touchable) {\n        //设置是否可点击的时候必须先设置透明度\n        this.popuWindow.setBackgroundDrawable(new ColorDrawable(0x00000000));//设置透明度\n        this.popuWindow.setOutsideTouchable(touchable);\n        this.popuWindow.setFocusable(touchable);\n    }\n\n\n    public static class PopularParams {\n\n        public int layoutResId;//布局id\n        public int mWidth, mHeight;//弹窗的宽和高\n        public float bg_level;//屏幕背景灰色程度\n        public int animationStyle;//动画Id\n        public View mView;//布局View\n        public boolean isTouchable = true;//是否可以点击\n\n\n        public Context context;\n\n        public PopularParams(Context context) {\n            this.context = context;\n        }\n\n        public void apply(PopularController popularController) {\n\n            if (mView != null) {\n                popularController.createView(mView);\n            } else if (layoutResId != 0) {\n                popularController.createView(layoutResId);\n            }\n\n            popularController.setPopuWindowWihthAndHeight(mWidth, mWidth);\n\n            popularController.setOutSideTouchable(isTouchable);\n\n            popularController.setBackGroundLevel(bg_level);\n            popularController.setAnimationStyle(animationStyle);\n\n        }\n\n    }\n}\n```\n#### 使用封装的popuwindow\n```Java\nfindViewById(R.id.btn_popular_all).setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                CommonPopularWindow popu = new CommonPopularWindow.Builder(PopularWindowActivity.this)\n                        .setView(R.layout.popular_window)\n                        .setWidthAndHeigth(0, 0)\n                        .setBackGroundLevel(0.5f).setViewOnclickListener(new CommonPopularWindow.ViewInterface() {\n                            @Override\n                            public void getChildView(View view, int layoutResId) {\n                                //点击的具体idView\n                                view.findViewById(R.id.tv_popuWindow1).setOnClickListener(new View.OnClickListener() {\n                                    @Override\n                                    public void onClick(View v) {\n                                        Log.i(\"数据弹框\",\"弹框了\");\n                                    }\n                                });\n                            }\n                        }).create();\n                popu.showAsDropDown(v);\n            }\n        });\n```\n\n#### 接下来封装popuwindow的单选、多选\n效果图：\n![单选](http://t1.aixinxi.net/o_1cl0ld597r8u1kaf1e3v1l571264a.gif-w.jpg)\n![多选](https://upload-images.jianshu.io/upload_images/2953304-7562da839033fc01.gif?imageMogr2/auto-orient/strip)\n\n- 定义类。\n1、里面进行初始化PopularWindow及数据的初始化。\n2、在popular中设置listview用于展示列表\n3、自定义listview中item的布局。使用自定义的chebox和父布局\n4、根据选择的模式（单选、多选)进行不同处理。\n\n代码：\n```Java\npublic class CustomerPopular implements View.OnClickListener, AdapterView.OnItemClickListener {\n\n\n    private TextView tv_popular_cancel;\n    private TextView tv_popular_ok;\n    private ListView lv_popular_data;\n    private LinearLayout ll_popular_buttons;\n    private TextView tv_popular_title;\n    private ImageView iv_popular_down;\n    private final CommonPopularWindow.Builder budilder;\n    private Activity context;\n    private View view;\n    private static int CHOICE_STATE = 0;\n    private PopularAdapter adapter;\n    private List<PopularWindowBean> datas;\n    private CommonPopularWindow popupWindow;\n\n    public CustomerPopular(Activity context) {\n        this.context = context;\n        budilder = new CommonPopularWindow.Builder(context);\n        initView();\n        initListener();\n    }\n\n\n    private void initView() {\n        view = LayoutInflater.from(context).inflate(R.layout.popular_products, null);\n        tv_popular_cancel = (TextView) view.findViewById(R.id.tv_popular_cancel);//取消\n        tv_popular_ok = (TextView) view.findViewById(R.id.tv_popular_ok);//确定\n        ll_popular_buttons = (LinearLayout) view.findViewById(R.id.ll_popular_buttons);//确定  取消的 父布局\n        lv_popular_data = (ListView) view.findViewById(R.id.lv_popular_data);//listView\n        tv_popular_title = (TextView) view.findViewById(R.id.tv_popular_title);//标题\n        iv_popular_down = (ImageView) view.findViewById(R.id.iv_popular_down);\n    }\n\n\n    private void initListener() {\n        tv_popular_cancel.setOnClickListener(this);\n        tv_popular_ok.setOnClickListener(this);\n        iv_popular_down.setOnClickListener(this);\n        lv_popular_data.setOnItemClickListener(this);\n    }\n\n\n    @Override\n    public void onClick(View v) {\n        switch (v.getId()) {\n            case R.id.tv_popular_ok:\n                //确定按钮\n                getSelectPostion();\n                break;\n            case R.id.tv_popular_cancel:\n                //取消按钮的\n                popupWindow.dismiss();\n                break;\n            default:\n                break;\n        }\n    }\n\n    private void getSelectPostion() {\n        SparseBooleanArray checkedItems = lv_popular_data.getCheckedItemPositions();\n        if (checkedItems == null || checkedItems.size() == 0) {\n            return;\n        }\n\n        int arrays[] = new int[checkedItems.size()];\n        for (int i = 0; i < checkedItems.size(); ++i) {\n            final int position = checkedItems.keyAt(i);//点击的 position\n            final boolean isChecked = checkedItems.valueAt(i);  //是否点击\n            if (isChecked) {\n                arrays[i] = position;\n            }\n        }\n        popularItemOnclick.getOnItemPosition(arrays);\n        popupWindow.dismiss();\n    }\n\n\n    @Override\n    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {\n        //当选择的模式是单选的时候 则返回它当前的id\n        if (CHOICE_STATE == ListView.CHOICE_MODE_SINGLE) {\n            //当只有单选模式才是可以的\n            popularItemOnclick.getOnItemPosition(new int[]{position});\n            popupWindow.dismiss();\n            return;\n        }\n    }\n\n\n    /**\n     * 刷新数据\n     *\n     * @param datas\n     * @param parnent\n     * @param type\n     * @param indexs\n     * @return\n     */\n    public CustomerPopular refreshListDatas(List<PopularWindowBean> datas, View parnent, int type, int[] indexs) {\n        if (this.datas == null)\n            this.datas = new ArrayList<>();\n        this.datas.clear();\n        this.datas.addAll(datas);\n        setAdapter(parnent, type, indexs);\n        return this;\n    }\n\n\n    private void setAdapter(View parent, int type, int[] index) {\n        //items upcheck\n        this.CHOICE_STATE = type;\n        clearSelection();\n        lv_popular_data.setChoiceMode(type);\n        if (adapter == null) {\n            lv_popular_data.setItemsCanFocus(false);\n            adapter = new PopularAdapter(context, datas);\n            lv_popular_data.setAdapter(adapter);\n        }\n        //liseview显示最上面\n        for (int i = 0; index != null && i < index.length; i++) {\n            lv_popular_data.setItemChecked(index[i], true);\n        }\n        lv_popular_data.setSelection(0);\n        adapter.notifyDataSetChanged();\n\n        showAsDropDown(parent);\n    }\n\n\n    //清除状态\n    private void clearSelection() {\n        final int itemCount = lv_popular_data.getCount();\n        for (int i = 0; i < itemCount; ++i) {\n            lv_popular_data.setItemChecked(i, false);\n        }\n    }\n\n\n    private void showAsDropDown(View parent) {\n        popupWindow = budilder.setView(view).setBackGroundLevel(0.5f)\n                .setOutsideTouchable(true)\n                .create();\n\n\n        changePopularSize();\n\n        if (Build.VERSION.SDK_INT >= 24) {\n            int[] location = new int[2]; // 记录anchor在屏幕中的位置\n            parent.getLocationOnScreen(location);\n            int offsetY = location[1] + parent.getHeight();\n            if (Build.VERSION.SDK_INT == 25) { // Android 7.1中，PopupWindow高度为 match_parent 时，会占据整个屏幕\n                // 故而需要在 Android 7.1上再做特殊处理\n                int screenHeight = ScreenUtils.getScreenHeight(context); // 获取屏幕高度\n                popupWindow.setHeight(screenHeight - offsetY); // 重新设置 PopupWindow 的高度\n            }\n            popupWindow.showAtLocation(parent, Gravity.CENTER, 0, 0);\n\n        } else {\n            popupWindow.showAtLocation(parent, Gravity.CENTER, 0, 0);\n        }\n\n    }\n\n    //改变popular的大小\n    private void changePopularSize() {\n        int height_default = (int) (ScreenUtils.getScreenHeight(context) * 0.7f);\n        view.measure(0, 0);\n        int measuredHeight = view.getMeasuredHeight();\n        int count = 0;\n        int size = adapter.getCount();\n        for (int i = 0; i < size; i++) {\n            View childAt = adapter.getView(i, null, lv_popular_data);\n            if (childAt != null) {\n                childAt.measure(0, 0);\n                int measuredHeight2 = childAt.getMeasuredHeight();\n                count += measuredHeight2;\n            }\n        }\n        measuredHeight += count;\n        if (measuredHeight < height_default) {\n            popupWindow.setHeight(ViewGroup.LayoutParams.WRAP_CONTENT);\n        } else {\n            popupWindow.setHeight(height_default);\n        }\n    }\n\n\n    /**\n     * 接口 点击 popular\n     */\n    public interface OnProductPopularItemOnclick {\n        /**\n         * 得到点解的postion\n         *\n         * @param\n         */\n\n        void getOnItemPosition(int[] positionArray);\n    }\n\n    public OnProductPopularItemOnclick popularItemOnclick;\n\n    public void setPopularItemOnclick(OnProductPopularItemOnclick popularItemOnclick) {\n        this.popularItemOnclick = popularItemOnclick;\n    }\n}\n```\n[具体代码查看github](https://github.com/songjiabin/androidDemo)\n\n\n\n\n\n","slug":"popularWindow","published":1,"updated":"2018-08-16T06:36:01.092Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjkxc5ssn0002gguqrzzs1e3k","content":"<blockquote class=\"blockquote-center\">雄起</blockquote>\n\n\n\n\n<blockquote>\n<p>PopupWindow这个类用来实现一个弹出框，可以使用任意布局的View作为其内容，这个弹出框是悬浮在当前activity之上的。</p>\n</blockquote>\n<h4 id=\"平常常见的创建方法是\"><a href=\"#平常常见的创建方法是\" class=\"headerlink\" title=\"平常常见的创建方法是\"></a>平常常见的创建方法是</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    <span class=\"keyword\">if</span> (popupView != <span class=\"keyword\">null</span> &amp;&amp; popupWindow.isShowing()) &#123;</span><br><span class=\"line\">            popupWindow.dismiss();</span><br><span class=\"line\">            <span class=\"keyword\">return</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//准备PopupWindow的布局View</span></span><br><span class=\"line\">        popupView = LayoutInflater.from(<span class=\"keyword\">this</span>).inflate(R.layout.popular_window, <span class=\"keyword\">null</span>);</span><br><span class=\"line\">        <span class=\"comment\">//初始化一个PopupWindow，width和height都是WRAP_CONTENT</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        popupView.measure(<span class=\"number\">0</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        popupWindow = <span class=\"keyword\">new</span> PopupWindow(popupView, popupView.getMeasuredWidth(), popupView.getMeasuredHeight(), <span class=\"keyword\">true</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//  不要这些创建 否则不能得到 popularWindow 的高度和宽度</span></span><br><span class=\"line\"><span class=\"comment\">//        popupWindow = new PopupWindow(</span></span><br><span class=\"line\"><span class=\"comment\">//                ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT);</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//设置PopupWindow的视图内容</span></span><br><span class=\"line\">        popupWindow.setContentView(popupView);</span><br><span class=\"line\">        <span class=\"comment\">//点击空白区域PopupWindow消失，这里必须先设置setBackgroundDrawable，否则点击无反应</span></span><br><span class=\"line\">        popupWindow.setBackgroundDrawable(<span class=\"keyword\">new</span> ColorDrawable(<span class=\"number\">0x00000000</span>));</span><br><span class=\"line\">        popupWindow.setOutsideTouchable(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">        <span class=\"comment\">//设置PopupWindow动画</span></span><br><span class=\"line\">        popupWindow.setAnimationStyle(R.style.Theme_AppCompat_DialogWhenLarge);</span><br><span class=\"line\">        <span class=\"comment\">//设置是否允许PopupWindow的范围超过屏幕范围</span></span><br><span class=\"line\">        popupWindow.setClippingEnabled(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">        <span class=\"comment\">//注意必须设置焦点   不然 isShowing不执行</span></span><br><span class=\"line\">        popupWindow.setFocusable(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">        <span class=\"comment\">//设置PopupWindow消失监听</span></span><br><span class=\"line\">        popupWindow.setOnDismissListener(<span class=\"keyword\">new</span> PopupWindow.OnDismissListener() &#123;</span><br><span class=\"line\">            <span class=\"meta\">@Override</span></span><br><span class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onDismiss</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br></pre></td></tr></table></figure>\n<h4 id=\"展示popuwindow的定位展示\"><a href=\"#展示popuwindow的定位展示\" class=\"headerlink\" title=\"展示popuwindow的定位展示\"></a>展示popuwindow的定位展示</h4><p>效果如图<br><img src=\"http://t1.aixinxi.net/o_1cktom2pb193t1r02gaa1o8l1d2ia.gif-w.jpg\" alt=\"效果图\"></p>\n<p>定位其实用到了 </p>\n<blockquote>\n<p>showAsDropDown(View anchor) : 显示在参照物的周围</p>\n</blockquote>\n<blockquote>\n<p> showAsDropDown(View anchor, int xoff, int yoff)   xoff、yoff分别是X轴、Y轴的偏移量</p>\n</blockquote>\n<blockquote>\n<p>public void showAtLocation(View parent, int gravity, int x, int y)<br> 这个两个方法</p>\n</blockquote>\n<p>代码有具体介绍：<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//向下弹框</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">bottom</span><span class=\"params\">(View view)</span> </span>&#123;</span><br><span class=\"line\">       <span class=\"comment\">//showAsDropDown(View anchor) : 显示在参照物的周围</span></span><br><span class=\"line\">       <span class=\"comment\">//showAsDropDown(View anchor, int xoff, int yoff)   xoff、yoff分别是X轴、Y轴的偏移量</span></span><br><span class=\"line\">       <span class=\"comment\">//如果不设置  xoff、yoff  默认显示到 参照物的下面</span></span><br><span class=\"line\">       <span class=\"comment\">//不设置 xoff ,yoff 默认到 参照物下面</span></span><br><span class=\"line\"></span><br><span class=\"line\">       <span class=\"comment\">//public void showAtLocation(View parent, int gravity, int x, int y)</span></span><br><span class=\"line\">       <span class=\"comment\">//设置在父控件的位置  example: Gravity.BOTTOM 表示在父控件的底部弹出   x ， y  分别是 x y 轴的偏移量</span></span><br><span class=\"line\"></span><br><span class=\"line\">       popupWindow.showAsDropDown(view);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//向左弹框</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">left</span><span class=\"params\">(View view)</span> </span>&#123;</span><br><span class=\"line\">       <span class=\"comment\">//public void showAtLocation(View parent, int gravity, int x, int y)</span></span><br><span class=\"line\">       <span class=\"comment\">//设置在父控件的位置  example: Gravity.BOTTOM 表示在父控件的底部弹出   x ， y  分别是 x y 轴的偏移量</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">       <span class=\"comment\">//得到点击的控件的坐标</span></span><br><span class=\"line\">       <span class=\"keyword\">int</span>[] positions = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[<span class=\"number\">2</span>];</span><br><span class=\"line\">       view.getLocationOnScreen(positions);</span><br><span class=\"line\">       <span class=\"comment\">//其实 positions[0] 表示的横坐标  position[1]表示的事纵坐标</span></span><br><span class=\"line\"></span><br><span class=\"line\">       <span class=\"keyword\">int</span> b = popupWindow.getWidth();</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">       <span class=\"comment\">//整个的content的位置  findViewById(android.R.id.content)</span></span><br><span class=\"line\">       popupWindow.showAtLocation(findViewById(android.R.id.content), Gravity.NO_GRAVITY, positions[<span class=\"number\">0</span>] - popupWindow.getWidth(), positions[<span class=\"number\">1</span>]);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   </span><br><span class=\"line\">   </span><br><span class=\"line\"> <span class=\"comment\">//向上弹框</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">top</span><span class=\"params\">(View view)</span> </span>&#123;</span><br><span class=\"line\">       <span class=\"comment\">//得到点击的控件的坐标</span></span><br><span class=\"line\">       <span class=\"keyword\">int</span>[] positions = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[<span class=\"number\">2</span>];</span><br><span class=\"line\">       view.getLocationOnScreen(positions);</span><br><span class=\"line\">       <span class=\"comment\">//其实 positions[0] 表示的横坐标  position[1]表示的事纵坐标</span></span><br><span class=\"line\">       popupWindow.showAtLocation(view, Gravity.NO_GRAVITY, positions[<span class=\"number\">0</span>], positions[<span class=\"number\">1</span>] - popupWindow.getHeight());</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   </span><br><span class=\"line\">   <span class=\"comment\">//向右弹框</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">right</span><span class=\"params\">(View view)</span> </span>&#123;</span><br><span class=\"line\">       <span class=\"comment\">//得到点击的控件的坐标</span></span><br><span class=\"line\">       <span class=\"keyword\">int</span>[] positions = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[<span class=\"number\">2</span>];</span><br><span class=\"line\">       view.getLocationOnScreen(positions);</span><br><span class=\"line\"></span><br><span class=\"line\">       <span class=\"comment\">//得到屏幕高度</span></span><br><span class=\"line\">       <span class=\"keyword\">int</span> screenHeight = ScreenUtils.getScreenHeight(<span class=\"keyword\">this</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">       <span class=\"keyword\">int</span> y =screenHeight - popupWindow.getHeight();</span><br><span class=\"line\"></span><br><span class=\"line\">       <span class=\"comment\">//其实 positions[0] 表示的横坐标  position[1]表示的事纵坐标</span></span><br><span class=\"line\">       popupWindow.showAtLocation(view, Gravity.NO_GRAVITY, positions[<span class=\"number\">0</span>] + btn_nomar_popular_right.getMeasuredWidth(), y);</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"封装popularWindow\"><a href=\"#封装popularWindow\" class=\"headerlink\" title=\"封装popularWindow\"></a>封装popularWindow</h4><p>使用建造中模式<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CommonPopularWindow</span> <span class=\"keyword\">extends</span> <span class=\"title\">PopupWindow</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> PopularController popularController;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">CommonPopularWindow</span><span class=\"params\">(Context context)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>(context);</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.popularController = <span class=\"keyword\">new</span> PopularController(context, <span class=\"keyword\">this</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 当popular 关闭的时候</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">dismiss</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>.dismiss();</span><br><span class=\"line\">        <span class=\"comment\">//将背景恢复</span></span><br><span class=\"line\">        <span class=\"keyword\">this</span>.popularController.setBackGroundLevel(<span class=\"number\">1.0f</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">getWidth</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> popularController.contentView.getMeasuredWidth();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">getHeight</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> popularController.contentView.getMeasuredHeight();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Builder</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">private</span> PopularController.PopularParams params;</span><br><span class=\"line\">        <span class=\"keyword\">private</span> ViewInterface listener;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Builder</span><span class=\"params\">(Context context)</span> </span>&#123;</span><br><span class=\"line\">            params = <span class=\"keyword\">new</span> PopularController.PopularParams(context);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> Builder <span class=\"title\">setView</span><span class=\"params\">(<span class=\"keyword\">int</span> layoutResId)</span> </span>&#123;</span><br><span class=\"line\">            params.mView = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">            params.layoutResId = layoutResId;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> Builder <span class=\"title\">setWidthAndHeigth</span><span class=\"params\">(<span class=\"keyword\">int</span> width, <span class=\"keyword\">int</span> height)</span> </span>&#123;</span><br><span class=\"line\">            params.mWidth = width;</span><br><span class=\"line\">            params.mHeight = height;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> Builder <span class=\"title\">setBackGroundLevel</span><span class=\"params\">(<span class=\"keyword\">float</span> level)</span> </span>&#123;</span><br><span class=\"line\">            params.bg_level = level;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> Builder <span class=\"title\">setOutsideTouchable</span><span class=\"params\">(<span class=\"keyword\">boolean</span> toubalbe)</span> </span>&#123;</span><br><span class=\"line\">            params.isTouchable = toubalbe;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> Builder <span class=\"title\">setAnimationStyle</span><span class=\"params\">(<span class=\"keyword\">int</span> animationStyle)</span> </span>&#123;</span><br><span class=\"line\">            params.animationStyle = animationStyle;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> Builder <span class=\"title\">setViewOnclickListener</span><span class=\"params\">(ViewInterface listener)</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.listener = listener;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> CommonPopularWindow <span class=\"title\">create</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">            CommonPopularWindow myCommonPopularWindow = <span class=\"keyword\">new</span> CommonPopularWindow(params.context);</span><br><span class=\"line\">            params.apply(myCommonPopularWindow.popularController);</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (listener != <span class=\"keyword\">null</span> &amp;&amp; params.layoutResId != <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">                listener.getChildView(myCommonPopularWindow.popularController.contentView, params.layoutResId);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            CommonUtil.measureWidthAndHeight(myCommonPopularWindow.popularController.contentView);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> myCommonPopularWindow;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">ViewInterface</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">getChildView</span><span class=\"params\">(View view, <span class=\"keyword\">int</span> layoutResId)</span></span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PopularController</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> CommonPopularWindow popuWindow;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Context context;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> View contentView;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Window mWindow;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">PopularController</span><span class=\"params\">(Context context, CommonPopularWindow commonPopularWindow)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.context = context;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.popuWindow = commonPopularWindow;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 创建 View</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">createView</span><span class=\"params\">(<span class=\"keyword\">int</span> view)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.contentView = LayoutInflater.from(context).inflate(view, <span class=\"keyword\">null</span>);</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.popuWindow.setContentView(<span class=\"keyword\">this</span>.contentView);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 创建 View</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">createView</span><span class=\"params\">(View view)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.contentView = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.contentView = view;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.popuWindow.setContentView(<span class=\"keyword\">this</span>.contentView);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 设置popular的宽和高</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> width</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> height</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setPopuWindowWihthAndHeight</span><span class=\"params\">(<span class=\"keyword\">int</span> width, <span class=\"keyword\">int</span> height)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (width == <span class=\"number\">0</span> || height == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.popuWindow.setHeight(ViewGroup.LayoutParams.WRAP_CONTENT);</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.popuWindow.setWidth(ViewGroup.LayoutParams.WRAP_CONTENT);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.popuWindow.setWidth(width);</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.popuWindow.setHeight(height);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 设置 popular的透明度</span></span><br><span class=\"line\"><span class=\"comment\">     * 当弹框的时候 改变背景颜色</span></span><br><span class=\"line\"><span class=\"comment\">     * 改变的是 window 透明度</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> level</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setBackGroundLevel</span><span class=\"params\">(<span class=\"keyword\">float</span> level)</span> </span>&#123;</span><br><span class=\"line\">        mWindow = ((Activity) context).getWindow();</span><br><span class=\"line\">        WindowManager.LayoutParams params = mWindow.getAttributes();</span><br><span class=\"line\">        params.alpha = level;</span><br><span class=\"line\">        mWindow.setAttributes(params);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 设置popular动画</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> animationStyle</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setAnimationStyle</span><span class=\"params\">(<span class=\"keyword\">int</span> animationStyle)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.popuWindow.setAnimationStyle(animationStyle);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 设置popular外部是否可以点击</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> touchable</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setOutSideTouchable</span><span class=\"params\">(<span class=\"keyword\">boolean</span> touchable)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//设置是否可点击的时候必须先设置透明度</span></span><br><span class=\"line\">        <span class=\"keyword\">this</span>.popuWindow.setBackgroundDrawable(<span class=\"keyword\">new</span> ColorDrawable(<span class=\"number\">0x00000000</span>));<span class=\"comment\">//设置透明度</span></span><br><span class=\"line\">        <span class=\"keyword\">this</span>.popuWindow.setOutsideTouchable(touchable);</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.popuWindow.setFocusable(touchable);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PopularParams</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">public</span> <span class=\"keyword\">int</span> layoutResId;<span class=\"comment\">//布局id</span></span><br><span class=\"line\">        <span class=\"keyword\">public</span> <span class=\"keyword\">int</span> mWidth, mHeight;<span class=\"comment\">//弹窗的宽和高</span></span><br><span class=\"line\">        <span class=\"keyword\">public</span> <span class=\"keyword\">float</span> bg_level;<span class=\"comment\">//屏幕背景灰色程度</span></span><br><span class=\"line\">        <span class=\"keyword\">public</span> <span class=\"keyword\">int</span> animationStyle;<span class=\"comment\">//动画Id</span></span><br><span class=\"line\">        <span class=\"keyword\">public</span> View mView;<span class=\"comment\">//布局View</span></span><br><span class=\"line\">        <span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> isTouchable = <span class=\"keyword\">true</span>;<span class=\"comment\">//是否可以点击</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">public</span> Context context;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">PopularParams</span><span class=\"params\">(Context context)</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.context = context;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">apply</span><span class=\"params\">(PopularController popularController)</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (mView != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                popularController.createView(mView);</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (layoutResId != <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">                popularController.createView(layoutResId);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            popularController.setPopuWindowWihthAndHeight(mWidth, mWidth);</span><br><span class=\"line\"></span><br><span class=\"line\">            popularController.setOutSideTouchable(isTouchable);</span><br><span class=\"line\"></span><br><span class=\"line\">            popularController.setBackGroundLevel(bg_level);</span><br><span class=\"line\">            popularController.setAnimationStyle(animationStyle);</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"使用封装的popuwindow\"><a href=\"#使用封装的popuwindow\" class=\"headerlink\" title=\"使用封装的popuwindow\"></a>使用封装的popuwindow</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">findViewById(R.id.btn_popular_all).setOnClickListener(<span class=\"keyword\">new</span> View.OnClickListener() &#123;</span><br><span class=\"line\">            <span class=\"meta\">@Override</span></span><br><span class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onClick</span><span class=\"params\">(View v)</span> </span>&#123;</span><br><span class=\"line\">                CommonPopularWindow popu = <span class=\"keyword\">new</span> CommonPopularWindow.Builder(PopularWindowActivity.<span class=\"keyword\">this</span>)</span><br><span class=\"line\">                        .setView(R.layout.popular_window)</span><br><span class=\"line\">                        .setWidthAndHeigth(<span class=\"number\">0</span>, <span class=\"number\">0</span>)</span><br><span class=\"line\">                        .setBackGroundLevel(<span class=\"number\">0.5f</span>).setViewOnclickListener(<span class=\"keyword\">new</span> CommonPopularWindow.ViewInterface() &#123;</span><br><span class=\"line\">                            <span class=\"meta\">@Override</span></span><br><span class=\"line\">                            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">getChildView</span><span class=\"params\">(View view, <span class=\"keyword\">int</span> layoutResId)</span> </span>&#123;</span><br><span class=\"line\">                                <span class=\"comment\">//点击的具体idView</span></span><br><span class=\"line\">                                view.findViewById(R.id.tv_popuWindow1).setOnClickListener(<span class=\"keyword\">new</span> View.OnClickListener() &#123;</span><br><span class=\"line\">                                    <span class=\"meta\">@Override</span></span><br><span class=\"line\">                                    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onClick</span><span class=\"params\">(View v)</span> </span>&#123;</span><br><span class=\"line\">                                        Log.i(<span class=\"string\">\"数据弹框\"</span>,<span class=\"string\">\"弹框了\"</span>);</span><br><span class=\"line\">                                    &#125;</span><br><span class=\"line\">                                &#125;);</span><br><span class=\"line\">                            &#125;</span><br><span class=\"line\">                        &#125;).create();</span><br><span class=\"line\">                popu.showAsDropDown(v);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br></pre></td></tr></table></figure>\n<h4 id=\"接下来封装popuwindow的单选、多选\"><a href=\"#接下来封装popuwindow的单选、多选\" class=\"headerlink\" title=\"接下来封装popuwindow的单选、多选\"></a>接下来封装popuwindow的单选、多选</h4><p>效果图：<br><img src=\"http://t1.aixinxi.net/o_1cl0ld597r8u1kaf1e3v1l571264a.gif-w.jpg\" alt=\"单选\"><br><img src=\"https://upload-images.jianshu.io/upload_images/2953304-7562da839033fc01.gif?imageMogr2/auto-orient/strip\" alt=\"多选\"></p>\n<ul>\n<li>定义类。<br>1、里面进行初始化PopularWindow及数据的初始化。<br>2、在popular中设置listview用于展示列表<br>3、自定义listview中item的布局。使用自定义的chebox和父布局<br>4、根据选择的模式（单选、多选)进行不同处理。</li>\n</ul>\n<p>代码：<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CustomerPopular</span> <span class=\"keyword\">implements</span> <span class=\"title\">View</span>.<span class=\"title\">OnClickListener</span>, <span class=\"title\">AdapterView</span>.<span class=\"title\">OnItemClickListener</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> TextView tv_popular_cancel;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> TextView tv_popular_ok;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> ListView lv_popular_data;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> LinearLayout ll_popular_buttons;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> TextView tv_popular_title;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> ImageView iv_popular_down;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> CommonPopularWindow.Builder budilder;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Activity context;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> View view;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> CHOICE_STATE = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> PopularAdapter adapter;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> List&lt;PopularWindowBean&gt; datas;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> CommonPopularWindow popupWindow;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">CustomerPopular</span><span class=\"params\">(Activity context)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.context = context;</span><br><span class=\"line\">        budilder = <span class=\"keyword\">new</span> CommonPopularWindow.Builder(context);</span><br><span class=\"line\">        initView();</span><br><span class=\"line\">        initListener();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">initView</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        view = LayoutInflater.from(context).inflate(R.layout.popular_products, <span class=\"keyword\">null</span>);</span><br><span class=\"line\">        tv_popular_cancel = (TextView) view.findViewById(R.id.tv_popular_cancel);<span class=\"comment\">//取消</span></span><br><span class=\"line\">        tv_popular_ok = (TextView) view.findViewById(R.id.tv_popular_ok);<span class=\"comment\">//确定</span></span><br><span class=\"line\">        ll_popular_buttons = (LinearLayout) view.findViewById(R.id.ll_popular_buttons);<span class=\"comment\">//确定  取消的 父布局</span></span><br><span class=\"line\">        lv_popular_data = (ListView) view.findViewById(R.id.lv_popular_data);<span class=\"comment\">//listView</span></span><br><span class=\"line\">        tv_popular_title = (TextView) view.findViewById(R.id.tv_popular_title);<span class=\"comment\">//标题</span></span><br><span class=\"line\">        iv_popular_down = (ImageView) view.findViewById(R.id.iv_popular_down);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">initListener</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        tv_popular_cancel.setOnClickListener(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">        tv_popular_ok.setOnClickListener(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">        iv_popular_down.setOnClickListener(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">        lv_popular_data.setOnItemClickListener(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onClick</span><span class=\"params\">(View v)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">switch</span> (v.getId()) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> R.id.tv_popular_ok:</span><br><span class=\"line\">                <span class=\"comment\">//确定按钮</span></span><br><span class=\"line\">                getSelectPostion();</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> R.id.tv_popular_cancel:</span><br><span class=\"line\">                <span class=\"comment\">//取消按钮的</span></span><br><span class=\"line\">                popupWindow.dismiss();</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"keyword\">default</span>:</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">getSelectPostion</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        SparseBooleanArray checkedItems = lv_popular_data.getCheckedItemPositions();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (checkedItems == <span class=\"keyword\">null</span> || checkedItems.size() == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">int</span> arrays[] = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[checkedItems.size()];</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; checkedItems.size(); ++i) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> position = checkedItems.keyAt(i);<span class=\"comment\">//点击的 position</span></span><br><span class=\"line\">            <span class=\"keyword\">final</span> <span class=\"keyword\">boolean</span> isChecked = checkedItems.valueAt(i);  <span class=\"comment\">//是否点击</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (isChecked) &#123;</span><br><span class=\"line\">                arrays[i] = position;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        popularItemOnclick.getOnItemPosition(arrays);</span><br><span class=\"line\">        popupWindow.dismiss();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onItemClick</span><span class=\"params\">(AdapterView&lt;?&gt; parent, View view, <span class=\"keyword\">int</span> position, <span class=\"keyword\">long</span> id)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//当选择的模式是单选的时候 则返回它当前的id</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (CHOICE_STATE == ListView.CHOICE_MODE_SINGLE) &#123;</span><br><span class=\"line\">            <span class=\"comment\">//当只有单选模式才是可以的</span></span><br><span class=\"line\">            popularItemOnclick.getOnItemPosition(<span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[]&#123;position&#125;);</span><br><span class=\"line\">            popupWindow.dismiss();</span><br><span class=\"line\">            <span class=\"keyword\">return</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 刷新数据</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> datas</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> parnent</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> type</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> indexs</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> CustomerPopular <span class=\"title\">refreshListDatas</span><span class=\"params\">(List&lt;PopularWindowBean&gt; datas, View parnent, <span class=\"keyword\">int</span> type, <span class=\"keyword\">int</span>[] indexs)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.datas == <span class=\"keyword\">null</span>)</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.datas = <span class=\"keyword\">new</span> ArrayList&lt;&gt;();</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.datas.clear();</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.datas.addAll(datas);</span><br><span class=\"line\">        setAdapter(parnent, type, indexs);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">setAdapter</span><span class=\"params\">(View parent, <span class=\"keyword\">int</span> type, <span class=\"keyword\">int</span>[] index)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//items upcheck</span></span><br><span class=\"line\">        <span class=\"keyword\">this</span>.CHOICE_STATE = type;</span><br><span class=\"line\">        clearSelection();</span><br><span class=\"line\">        lv_popular_data.setChoiceMode(type);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (adapter == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            lv_popular_data.setItemsCanFocus(<span class=\"keyword\">false</span>);</span><br><span class=\"line\">            adapter = <span class=\"keyword\">new</span> PopularAdapter(context, datas);</span><br><span class=\"line\">            lv_popular_data.setAdapter(adapter);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//liseview显示最上面</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; index != <span class=\"keyword\">null</span> &amp;&amp; i &lt; index.length; i++) &#123;</span><br><span class=\"line\">            lv_popular_data.setItemChecked(index[i], <span class=\"keyword\">true</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        lv_popular_data.setSelection(<span class=\"number\">0</span>);</span><br><span class=\"line\">        adapter.notifyDataSetChanged();</span><br><span class=\"line\"></span><br><span class=\"line\">        showAsDropDown(parent);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//清除状态</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">clearSelection</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> itemCount = lv_popular_data.getCount();</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; itemCount; ++i) &#123;</span><br><span class=\"line\">            lv_popular_data.setItemChecked(i, <span class=\"keyword\">false</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">showAsDropDown</span><span class=\"params\">(View parent)</span> </span>&#123;</span><br><span class=\"line\">        popupWindow = budilder.setView(view).setBackGroundLevel(<span class=\"number\">0.5f</span>)</span><br><span class=\"line\">                .setOutsideTouchable(<span class=\"keyword\">true</span>)</span><br><span class=\"line\">                .create();</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        changePopularSize();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (Build.VERSION.SDK_INT &gt;= <span class=\"number\">24</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span>[] location = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[<span class=\"number\">2</span>]; <span class=\"comment\">// 记录anchor在屏幕中的位置</span></span><br><span class=\"line\">            parent.getLocationOnScreen(location);</span><br><span class=\"line\">            <span class=\"keyword\">int</span> offsetY = location[<span class=\"number\">1</span>] + parent.getHeight();</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (Build.VERSION.SDK_INT == <span class=\"number\">25</span>) &#123; <span class=\"comment\">// Android 7.1中，PopupWindow高度为 match_parent 时，会占据整个屏幕</span></span><br><span class=\"line\">                <span class=\"comment\">// 故而需要在 Android 7.1上再做特殊处理</span></span><br><span class=\"line\">                <span class=\"keyword\">int</span> screenHeight = ScreenUtils.getScreenHeight(context); <span class=\"comment\">// 获取屏幕高度</span></span><br><span class=\"line\">                popupWindow.setHeight(screenHeight - offsetY); <span class=\"comment\">// 重新设置 PopupWindow 的高度</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            popupWindow.showAtLocation(parent, Gravity.CENTER, <span class=\"number\">0</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            popupWindow.showAtLocation(parent, Gravity.CENTER, <span class=\"number\">0</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//改变popular的大小</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">changePopularSize</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> height_default = (<span class=\"keyword\">int</span>) (ScreenUtils.getScreenHeight(context) * <span class=\"number\">0.7f</span>);</span><br><span class=\"line\">        view.measure(<span class=\"number\">0</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\">        <span class=\"keyword\">int</span> measuredHeight = view.getMeasuredHeight();</span><br><span class=\"line\">        <span class=\"keyword\">int</span> count = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> size = adapter.getCount();</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; size; i++) &#123;</span><br><span class=\"line\">            View childAt = adapter.getView(i, <span class=\"keyword\">null</span>, lv_popular_data);</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (childAt != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                childAt.measure(<span class=\"number\">0</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\">                <span class=\"keyword\">int</span> measuredHeight2 = childAt.getMeasuredHeight();</span><br><span class=\"line\">                count += measuredHeight2;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        measuredHeight += count;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (measuredHeight &lt; height_default) &#123;</span><br><span class=\"line\">            popupWindow.setHeight(ViewGroup.LayoutParams.WRAP_CONTENT);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            popupWindow.setHeight(height_default);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 接口 点击 popular</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">OnProductPopularItemOnclick</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">         * 得到点解的postion</span></span><br><span class=\"line\"><span class=\"comment\">         *</span></span><br><span class=\"line\"><span class=\"comment\">         * <span class=\"doctag\">@param</span></span></span><br><span class=\"line\"><span class=\"comment\">         */</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">getOnItemPosition</span><span class=\"params\">(<span class=\"keyword\">int</span>[] positionArray)</span></span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> OnProductPopularItemOnclick popularItemOnclick;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setPopularItemOnclick</span><span class=\"params\">(OnProductPopularItemOnclick popularItemOnclick)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.popularItemOnclick = popularItemOnclick;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p><a href=\"https://github.com/songjiabin/androidDemo\" target=\"_blank\" rel=\"noopener\">具体代码查看github</a></p>\n","site":{"data":{}},"excerpt":"","more":"<blockquote class=\"blockquote-center\">雄起</blockquote>\n\n\n\n\n<blockquote>\n<p>PopupWindow这个类用来实现一个弹出框，可以使用任意布局的View作为其内容，这个弹出框是悬浮在当前activity之上的。</p>\n</blockquote>\n<h4 id=\"平常常见的创建方法是\"><a href=\"#平常常见的创建方法是\" class=\"headerlink\" title=\"平常常见的创建方法是\"></a>平常常见的创建方法是</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    <span class=\"keyword\">if</span> (popupView != <span class=\"keyword\">null</span> &amp;&amp; popupWindow.isShowing()) &#123;</span><br><span class=\"line\">            popupWindow.dismiss();</span><br><span class=\"line\">            <span class=\"keyword\">return</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//准备PopupWindow的布局View</span></span><br><span class=\"line\">        popupView = LayoutInflater.from(<span class=\"keyword\">this</span>).inflate(R.layout.popular_window, <span class=\"keyword\">null</span>);</span><br><span class=\"line\">        <span class=\"comment\">//初始化一个PopupWindow，width和height都是WRAP_CONTENT</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        popupView.measure(<span class=\"number\">0</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        popupWindow = <span class=\"keyword\">new</span> PopupWindow(popupView, popupView.getMeasuredWidth(), popupView.getMeasuredHeight(), <span class=\"keyword\">true</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//  不要这些创建 否则不能得到 popularWindow 的高度和宽度</span></span><br><span class=\"line\"><span class=\"comment\">//        popupWindow = new PopupWindow(</span></span><br><span class=\"line\"><span class=\"comment\">//                ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT);</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//设置PopupWindow的视图内容</span></span><br><span class=\"line\">        popupWindow.setContentView(popupView);</span><br><span class=\"line\">        <span class=\"comment\">//点击空白区域PopupWindow消失，这里必须先设置setBackgroundDrawable，否则点击无反应</span></span><br><span class=\"line\">        popupWindow.setBackgroundDrawable(<span class=\"keyword\">new</span> ColorDrawable(<span class=\"number\">0x00000000</span>));</span><br><span class=\"line\">        popupWindow.setOutsideTouchable(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">        <span class=\"comment\">//设置PopupWindow动画</span></span><br><span class=\"line\">        popupWindow.setAnimationStyle(R.style.Theme_AppCompat_DialogWhenLarge);</span><br><span class=\"line\">        <span class=\"comment\">//设置是否允许PopupWindow的范围超过屏幕范围</span></span><br><span class=\"line\">        popupWindow.setClippingEnabled(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">        <span class=\"comment\">//注意必须设置焦点   不然 isShowing不执行</span></span><br><span class=\"line\">        popupWindow.setFocusable(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">        <span class=\"comment\">//设置PopupWindow消失监听</span></span><br><span class=\"line\">        popupWindow.setOnDismissListener(<span class=\"keyword\">new</span> PopupWindow.OnDismissListener() &#123;</span><br><span class=\"line\">            <span class=\"meta\">@Override</span></span><br><span class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onDismiss</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br></pre></td></tr></table></figure>\n<h4 id=\"展示popuwindow的定位展示\"><a href=\"#展示popuwindow的定位展示\" class=\"headerlink\" title=\"展示popuwindow的定位展示\"></a>展示popuwindow的定位展示</h4><p>效果如图<br><img src=\"http://t1.aixinxi.net/o_1cktom2pb193t1r02gaa1o8l1d2ia.gif-w.jpg\" alt=\"效果图\"></p>\n<p>定位其实用到了 </p>\n<blockquote>\n<p>showAsDropDown(View anchor) : 显示在参照物的周围</p>\n</blockquote>\n<blockquote>\n<p> showAsDropDown(View anchor, int xoff, int yoff)   xoff、yoff分别是X轴、Y轴的偏移量</p>\n</blockquote>\n<blockquote>\n<p>public void showAtLocation(View parent, int gravity, int x, int y)<br> 这个两个方法</p>\n</blockquote>\n<p>代码有具体介绍：<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//向下弹框</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">bottom</span><span class=\"params\">(View view)</span> </span>&#123;</span><br><span class=\"line\">       <span class=\"comment\">//showAsDropDown(View anchor) : 显示在参照物的周围</span></span><br><span class=\"line\">       <span class=\"comment\">//showAsDropDown(View anchor, int xoff, int yoff)   xoff、yoff分别是X轴、Y轴的偏移量</span></span><br><span class=\"line\">       <span class=\"comment\">//如果不设置  xoff、yoff  默认显示到 参照物的下面</span></span><br><span class=\"line\">       <span class=\"comment\">//不设置 xoff ,yoff 默认到 参照物下面</span></span><br><span class=\"line\"></span><br><span class=\"line\">       <span class=\"comment\">//public void showAtLocation(View parent, int gravity, int x, int y)</span></span><br><span class=\"line\">       <span class=\"comment\">//设置在父控件的位置  example: Gravity.BOTTOM 表示在父控件的底部弹出   x ， y  分别是 x y 轴的偏移量</span></span><br><span class=\"line\"></span><br><span class=\"line\">       popupWindow.showAsDropDown(view);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//向左弹框</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">left</span><span class=\"params\">(View view)</span> </span>&#123;</span><br><span class=\"line\">       <span class=\"comment\">//public void showAtLocation(View parent, int gravity, int x, int y)</span></span><br><span class=\"line\">       <span class=\"comment\">//设置在父控件的位置  example: Gravity.BOTTOM 表示在父控件的底部弹出   x ， y  分别是 x y 轴的偏移量</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">       <span class=\"comment\">//得到点击的控件的坐标</span></span><br><span class=\"line\">       <span class=\"keyword\">int</span>[] positions = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[<span class=\"number\">2</span>];</span><br><span class=\"line\">       view.getLocationOnScreen(positions);</span><br><span class=\"line\">       <span class=\"comment\">//其实 positions[0] 表示的横坐标  position[1]表示的事纵坐标</span></span><br><span class=\"line\"></span><br><span class=\"line\">       <span class=\"keyword\">int</span> b = popupWindow.getWidth();</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">       <span class=\"comment\">//整个的content的位置  findViewById(android.R.id.content)</span></span><br><span class=\"line\">       popupWindow.showAtLocation(findViewById(android.R.id.content), Gravity.NO_GRAVITY, positions[<span class=\"number\">0</span>] - popupWindow.getWidth(), positions[<span class=\"number\">1</span>]);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   </span><br><span class=\"line\">   </span><br><span class=\"line\"> <span class=\"comment\">//向上弹框</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">top</span><span class=\"params\">(View view)</span> </span>&#123;</span><br><span class=\"line\">       <span class=\"comment\">//得到点击的控件的坐标</span></span><br><span class=\"line\">       <span class=\"keyword\">int</span>[] positions = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[<span class=\"number\">2</span>];</span><br><span class=\"line\">       view.getLocationOnScreen(positions);</span><br><span class=\"line\">       <span class=\"comment\">//其实 positions[0] 表示的横坐标  position[1]表示的事纵坐标</span></span><br><span class=\"line\">       popupWindow.showAtLocation(view, Gravity.NO_GRAVITY, positions[<span class=\"number\">0</span>], positions[<span class=\"number\">1</span>] - popupWindow.getHeight());</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   </span><br><span class=\"line\">   <span class=\"comment\">//向右弹框</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">right</span><span class=\"params\">(View view)</span> </span>&#123;</span><br><span class=\"line\">       <span class=\"comment\">//得到点击的控件的坐标</span></span><br><span class=\"line\">       <span class=\"keyword\">int</span>[] positions = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[<span class=\"number\">2</span>];</span><br><span class=\"line\">       view.getLocationOnScreen(positions);</span><br><span class=\"line\"></span><br><span class=\"line\">       <span class=\"comment\">//得到屏幕高度</span></span><br><span class=\"line\">       <span class=\"keyword\">int</span> screenHeight = ScreenUtils.getScreenHeight(<span class=\"keyword\">this</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">       <span class=\"keyword\">int</span> y =screenHeight - popupWindow.getHeight();</span><br><span class=\"line\"></span><br><span class=\"line\">       <span class=\"comment\">//其实 positions[0] 表示的横坐标  position[1]表示的事纵坐标</span></span><br><span class=\"line\">       popupWindow.showAtLocation(view, Gravity.NO_GRAVITY, positions[<span class=\"number\">0</span>] + btn_nomar_popular_right.getMeasuredWidth(), y);</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"封装popularWindow\"><a href=\"#封装popularWindow\" class=\"headerlink\" title=\"封装popularWindow\"></a>封装popularWindow</h4><p>使用建造中模式<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CommonPopularWindow</span> <span class=\"keyword\">extends</span> <span class=\"title\">PopupWindow</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> PopularController popularController;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">CommonPopularWindow</span><span class=\"params\">(Context context)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>(context);</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.popularController = <span class=\"keyword\">new</span> PopularController(context, <span class=\"keyword\">this</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 当popular 关闭的时候</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">dismiss</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>.dismiss();</span><br><span class=\"line\">        <span class=\"comment\">//将背景恢复</span></span><br><span class=\"line\">        <span class=\"keyword\">this</span>.popularController.setBackGroundLevel(<span class=\"number\">1.0f</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">getWidth</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> popularController.contentView.getMeasuredWidth();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">getHeight</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> popularController.contentView.getMeasuredHeight();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Builder</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">private</span> PopularController.PopularParams params;</span><br><span class=\"line\">        <span class=\"keyword\">private</span> ViewInterface listener;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Builder</span><span class=\"params\">(Context context)</span> </span>&#123;</span><br><span class=\"line\">            params = <span class=\"keyword\">new</span> PopularController.PopularParams(context);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> Builder <span class=\"title\">setView</span><span class=\"params\">(<span class=\"keyword\">int</span> layoutResId)</span> </span>&#123;</span><br><span class=\"line\">            params.mView = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">            params.layoutResId = layoutResId;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> Builder <span class=\"title\">setWidthAndHeigth</span><span class=\"params\">(<span class=\"keyword\">int</span> width, <span class=\"keyword\">int</span> height)</span> </span>&#123;</span><br><span class=\"line\">            params.mWidth = width;</span><br><span class=\"line\">            params.mHeight = height;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> Builder <span class=\"title\">setBackGroundLevel</span><span class=\"params\">(<span class=\"keyword\">float</span> level)</span> </span>&#123;</span><br><span class=\"line\">            params.bg_level = level;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> Builder <span class=\"title\">setOutsideTouchable</span><span class=\"params\">(<span class=\"keyword\">boolean</span> toubalbe)</span> </span>&#123;</span><br><span class=\"line\">            params.isTouchable = toubalbe;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> Builder <span class=\"title\">setAnimationStyle</span><span class=\"params\">(<span class=\"keyword\">int</span> animationStyle)</span> </span>&#123;</span><br><span class=\"line\">            params.animationStyle = animationStyle;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> Builder <span class=\"title\">setViewOnclickListener</span><span class=\"params\">(ViewInterface listener)</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.listener = listener;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> CommonPopularWindow <span class=\"title\">create</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">            CommonPopularWindow myCommonPopularWindow = <span class=\"keyword\">new</span> CommonPopularWindow(params.context);</span><br><span class=\"line\">            params.apply(myCommonPopularWindow.popularController);</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (listener != <span class=\"keyword\">null</span> &amp;&amp; params.layoutResId != <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">                listener.getChildView(myCommonPopularWindow.popularController.contentView, params.layoutResId);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            CommonUtil.measureWidthAndHeight(myCommonPopularWindow.popularController.contentView);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> myCommonPopularWindow;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">ViewInterface</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">getChildView</span><span class=\"params\">(View view, <span class=\"keyword\">int</span> layoutResId)</span></span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PopularController</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> CommonPopularWindow popuWindow;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Context context;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> View contentView;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Window mWindow;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">PopularController</span><span class=\"params\">(Context context, CommonPopularWindow commonPopularWindow)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.context = context;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.popuWindow = commonPopularWindow;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 创建 View</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">createView</span><span class=\"params\">(<span class=\"keyword\">int</span> view)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.contentView = LayoutInflater.from(context).inflate(view, <span class=\"keyword\">null</span>);</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.popuWindow.setContentView(<span class=\"keyword\">this</span>.contentView);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 创建 View</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">createView</span><span class=\"params\">(View view)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.contentView = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.contentView = view;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.popuWindow.setContentView(<span class=\"keyword\">this</span>.contentView);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 设置popular的宽和高</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> width</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> height</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setPopuWindowWihthAndHeight</span><span class=\"params\">(<span class=\"keyword\">int</span> width, <span class=\"keyword\">int</span> height)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (width == <span class=\"number\">0</span> || height == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.popuWindow.setHeight(ViewGroup.LayoutParams.WRAP_CONTENT);</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.popuWindow.setWidth(ViewGroup.LayoutParams.WRAP_CONTENT);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.popuWindow.setWidth(width);</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.popuWindow.setHeight(height);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 设置 popular的透明度</span></span><br><span class=\"line\"><span class=\"comment\">     * 当弹框的时候 改变背景颜色</span></span><br><span class=\"line\"><span class=\"comment\">     * 改变的是 window 透明度</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> level</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setBackGroundLevel</span><span class=\"params\">(<span class=\"keyword\">float</span> level)</span> </span>&#123;</span><br><span class=\"line\">        mWindow = ((Activity) context).getWindow();</span><br><span class=\"line\">        WindowManager.LayoutParams params = mWindow.getAttributes();</span><br><span class=\"line\">        params.alpha = level;</span><br><span class=\"line\">        mWindow.setAttributes(params);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 设置popular动画</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> animationStyle</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setAnimationStyle</span><span class=\"params\">(<span class=\"keyword\">int</span> animationStyle)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.popuWindow.setAnimationStyle(animationStyle);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 设置popular外部是否可以点击</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> touchable</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setOutSideTouchable</span><span class=\"params\">(<span class=\"keyword\">boolean</span> touchable)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//设置是否可点击的时候必须先设置透明度</span></span><br><span class=\"line\">        <span class=\"keyword\">this</span>.popuWindow.setBackgroundDrawable(<span class=\"keyword\">new</span> ColorDrawable(<span class=\"number\">0x00000000</span>));<span class=\"comment\">//设置透明度</span></span><br><span class=\"line\">        <span class=\"keyword\">this</span>.popuWindow.setOutsideTouchable(touchable);</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.popuWindow.setFocusable(touchable);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PopularParams</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">public</span> <span class=\"keyword\">int</span> layoutResId;<span class=\"comment\">//布局id</span></span><br><span class=\"line\">        <span class=\"keyword\">public</span> <span class=\"keyword\">int</span> mWidth, mHeight;<span class=\"comment\">//弹窗的宽和高</span></span><br><span class=\"line\">        <span class=\"keyword\">public</span> <span class=\"keyword\">float</span> bg_level;<span class=\"comment\">//屏幕背景灰色程度</span></span><br><span class=\"line\">        <span class=\"keyword\">public</span> <span class=\"keyword\">int</span> animationStyle;<span class=\"comment\">//动画Id</span></span><br><span class=\"line\">        <span class=\"keyword\">public</span> View mView;<span class=\"comment\">//布局View</span></span><br><span class=\"line\">        <span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> isTouchable = <span class=\"keyword\">true</span>;<span class=\"comment\">//是否可以点击</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">public</span> Context context;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">PopularParams</span><span class=\"params\">(Context context)</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.context = context;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">apply</span><span class=\"params\">(PopularController popularController)</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (mView != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                popularController.createView(mView);</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (layoutResId != <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">                popularController.createView(layoutResId);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            popularController.setPopuWindowWihthAndHeight(mWidth, mWidth);</span><br><span class=\"line\"></span><br><span class=\"line\">            popularController.setOutSideTouchable(isTouchable);</span><br><span class=\"line\"></span><br><span class=\"line\">            popularController.setBackGroundLevel(bg_level);</span><br><span class=\"line\">            popularController.setAnimationStyle(animationStyle);</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"使用封装的popuwindow\"><a href=\"#使用封装的popuwindow\" class=\"headerlink\" title=\"使用封装的popuwindow\"></a>使用封装的popuwindow</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">findViewById(R.id.btn_popular_all).setOnClickListener(<span class=\"keyword\">new</span> View.OnClickListener() &#123;</span><br><span class=\"line\">            <span class=\"meta\">@Override</span></span><br><span class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onClick</span><span class=\"params\">(View v)</span> </span>&#123;</span><br><span class=\"line\">                CommonPopularWindow popu = <span class=\"keyword\">new</span> CommonPopularWindow.Builder(PopularWindowActivity.<span class=\"keyword\">this</span>)</span><br><span class=\"line\">                        .setView(R.layout.popular_window)</span><br><span class=\"line\">                        .setWidthAndHeigth(<span class=\"number\">0</span>, <span class=\"number\">0</span>)</span><br><span class=\"line\">                        .setBackGroundLevel(<span class=\"number\">0.5f</span>).setViewOnclickListener(<span class=\"keyword\">new</span> CommonPopularWindow.ViewInterface() &#123;</span><br><span class=\"line\">                            <span class=\"meta\">@Override</span></span><br><span class=\"line\">                            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">getChildView</span><span class=\"params\">(View view, <span class=\"keyword\">int</span> layoutResId)</span> </span>&#123;</span><br><span class=\"line\">                                <span class=\"comment\">//点击的具体idView</span></span><br><span class=\"line\">                                view.findViewById(R.id.tv_popuWindow1).setOnClickListener(<span class=\"keyword\">new</span> View.OnClickListener() &#123;</span><br><span class=\"line\">                                    <span class=\"meta\">@Override</span></span><br><span class=\"line\">                                    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onClick</span><span class=\"params\">(View v)</span> </span>&#123;</span><br><span class=\"line\">                                        Log.i(<span class=\"string\">\"数据弹框\"</span>,<span class=\"string\">\"弹框了\"</span>);</span><br><span class=\"line\">                                    &#125;</span><br><span class=\"line\">                                &#125;);</span><br><span class=\"line\">                            &#125;</span><br><span class=\"line\">                        &#125;).create();</span><br><span class=\"line\">                popu.showAsDropDown(v);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br></pre></td></tr></table></figure>\n<h4 id=\"接下来封装popuwindow的单选、多选\"><a href=\"#接下来封装popuwindow的单选、多选\" class=\"headerlink\" title=\"接下来封装popuwindow的单选、多选\"></a>接下来封装popuwindow的单选、多选</h4><p>效果图：<br><img src=\"http://t1.aixinxi.net/o_1cl0ld597r8u1kaf1e3v1l571264a.gif-w.jpg\" alt=\"单选\"><br><img src=\"https://upload-images.jianshu.io/upload_images/2953304-7562da839033fc01.gif?imageMogr2/auto-orient/strip\" alt=\"多选\"></p>\n<ul>\n<li>定义类。<br>1、里面进行初始化PopularWindow及数据的初始化。<br>2、在popular中设置listview用于展示列表<br>3、自定义listview中item的布局。使用自定义的chebox和父布局<br>4、根据选择的模式（单选、多选)进行不同处理。</li>\n</ul>\n<p>代码：<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CustomerPopular</span> <span class=\"keyword\">implements</span> <span class=\"title\">View</span>.<span class=\"title\">OnClickListener</span>, <span class=\"title\">AdapterView</span>.<span class=\"title\">OnItemClickListener</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> TextView tv_popular_cancel;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> TextView tv_popular_ok;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> ListView lv_popular_data;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> LinearLayout ll_popular_buttons;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> TextView tv_popular_title;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> ImageView iv_popular_down;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> CommonPopularWindow.Builder budilder;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Activity context;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> View view;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> CHOICE_STATE = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> PopularAdapter adapter;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> List&lt;PopularWindowBean&gt; datas;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> CommonPopularWindow popupWindow;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">CustomerPopular</span><span class=\"params\">(Activity context)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.context = context;</span><br><span class=\"line\">        budilder = <span class=\"keyword\">new</span> CommonPopularWindow.Builder(context);</span><br><span class=\"line\">        initView();</span><br><span class=\"line\">        initListener();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">initView</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        view = LayoutInflater.from(context).inflate(R.layout.popular_products, <span class=\"keyword\">null</span>);</span><br><span class=\"line\">        tv_popular_cancel = (TextView) view.findViewById(R.id.tv_popular_cancel);<span class=\"comment\">//取消</span></span><br><span class=\"line\">        tv_popular_ok = (TextView) view.findViewById(R.id.tv_popular_ok);<span class=\"comment\">//确定</span></span><br><span class=\"line\">        ll_popular_buttons = (LinearLayout) view.findViewById(R.id.ll_popular_buttons);<span class=\"comment\">//确定  取消的 父布局</span></span><br><span class=\"line\">        lv_popular_data = (ListView) view.findViewById(R.id.lv_popular_data);<span class=\"comment\">//listView</span></span><br><span class=\"line\">        tv_popular_title = (TextView) view.findViewById(R.id.tv_popular_title);<span class=\"comment\">//标题</span></span><br><span class=\"line\">        iv_popular_down = (ImageView) view.findViewById(R.id.iv_popular_down);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">initListener</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        tv_popular_cancel.setOnClickListener(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">        tv_popular_ok.setOnClickListener(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">        iv_popular_down.setOnClickListener(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">        lv_popular_data.setOnItemClickListener(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onClick</span><span class=\"params\">(View v)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">switch</span> (v.getId()) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> R.id.tv_popular_ok:</span><br><span class=\"line\">                <span class=\"comment\">//确定按钮</span></span><br><span class=\"line\">                getSelectPostion();</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> R.id.tv_popular_cancel:</span><br><span class=\"line\">                <span class=\"comment\">//取消按钮的</span></span><br><span class=\"line\">                popupWindow.dismiss();</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"keyword\">default</span>:</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">getSelectPostion</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        SparseBooleanArray checkedItems = lv_popular_data.getCheckedItemPositions();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (checkedItems == <span class=\"keyword\">null</span> || checkedItems.size() == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">int</span> arrays[] = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[checkedItems.size()];</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; checkedItems.size(); ++i) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> position = checkedItems.keyAt(i);<span class=\"comment\">//点击的 position</span></span><br><span class=\"line\">            <span class=\"keyword\">final</span> <span class=\"keyword\">boolean</span> isChecked = checkedItems.valueAt(i);  <span class=\"comment\">//是否点击</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (isChecked) &#123;</span><br><span class=\"line\">                arrays[i] = position;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        popularItemOnclick.getOnItemPosition(arrays);</span><br><span class=\"line\">        popupWindow.dismiss();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onItemClick</span><span class=\"params\">(AdapterView&lt;?&gt; parent, View view, <span class=\"keyword\">int</span> position, <span class=\"keyword\">long</span> id)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//当选择的模式是单选的时候 则返回它当前的id</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (CHOICE_STATE == ListView.CHOICE_MODE_SINGLE) &#123;</span><br><span class=\"line\">            <span class=\"comment\">//当只有单选模式才是可以的</span></span><br><span class=\"line\">            popularItemOnclick.getOnItemPosition(<span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[]&#123;position&#125;);</span><br><span class=\"line\">            popupWindow.dismiss();</span><br><span class=\"line\">            <span class=\"keyword\">return</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 刷新数据</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> datas</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> parnent</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> type</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> indexs</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> CustomerPopular <span class=\"title\">refreshListDatas</span><span class=\"params\">(List&lt;PopularWindowBean&gt; datas, View parnent, <span class=\"keyword\">int</span> type, <span class=\"keyword\">int</span>[] indexs)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.datas == <span class=\"keyword\">null</span>)</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.datas = <span class=\"keyword\">new</span> ArrayList&lt;&gt;();</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.datas.clear();</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.datas.addAll(datas);</span><br><span class=\"line\">        setAdapter(parnent, type, indexs);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">setAdapter</span><span class=\"params\">(View parent, <span class=\"keyword\">int</span> type, <span class=\"keyword\">int</span>[] index)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//items upcheck</span></span><br><span class=\"line\">        <span class=\"keyword\">this</span>.CHOICE_STATE = type;</span><br><span class=\"line\">        clearSelection();</span><br><span class=\"line\">        lv_popular_data.setChoiceMode(type);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (adapter == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            lv_popular_data.setItemsCanFocus(<span class=\"keyword\">false</span>);</span><br><span class=\"line\">            adapter = <span class=\"keyword\">new</span> PopularAdapter(context, datas);</span><br><span class=\"line\">            lv_popular_data.setAdapter(adapter);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//liseview显示最上面</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; index != <span class=\"keyword\">null</span> &amp;&amp; i &lt; index.length; i++) &#123;</span><br><span class=\"line\">            lv_popular_data.setItemChecked(index[i], <span class=\"keyword\">true</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        lv_popular_data.setSelection(<span class=\"number\">0</span>);</span><br><span class=\"line\">        adapter.notifyDataSetChanged();</span><br><span class=\"line\"></span><br><span class=\"line\">        showAsDropDown(parent);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//清除状态</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">clearSelection</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> itemCount = lv_popular_data.getCount();</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; itemCount; ++i) &#123;</span><br><span class=\"line\">            lv_popular_data.setItemChecked(i, <span class=\"keyword\">false</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">showAsDropDown</span><span class=\"params\">(View parent)</span> </span>&#123;</span><br><span class=\"line\">        popupWindow = budilder.setView(view).setBackGroundLevel(<span class=\"number\">0.5f</span>)</span><br><span class=\"line\">                .setOutsideTouchable(<span class=\"keyword\">true</span>)</span><br><span class=\"line\">                .create();</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        changePopularSize();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (Build.VERSION.SDK_INT &gt;= <span class=\"number\">24</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">int</span>[] location = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[<span class=\"number\">2</span>]; <span class=\"comment\">// 记录anchor在屏幕中的位置</span></span><br><span class=\"line\">            parent.getLocationOnScreen(location);</span><br><span class=\"line\">            <span class=\"keyword\">int</span> offsetY = location[<span class=\"number\">1</span>] + parent.getHeight();</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (Build.VERSION.SDK_INT == <span class=\"number\">25</span>) &#123; <span class=\"comment\">// Android 7.1中，PopupWindow高度为 match_parent 时，会占据整个屏幕</span></span><br><span class=\"line\">                <span class=\"comment\">// 故而需要在 Android 7.1上再做特殊处理</span></span><br><span class=\"line\">                <span class=\"keyword\">int</span> screenHeight = ScreenUtils.getScreenHeight(context); <span class=\"comment\">// 获取屏幕高度</span></span><br><span class=\"line\">                popupWindow.setHeight(screenHeight - offsetY); <span class=\"comment\">// 重新设置 PopupWindow 的高度</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            popupWindow.showAtLocation(parent, Gravity.CENTER, <span class=\"number\">0</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            popupWindow.showAtLocation(parent, Gravity.CENTER, <span class=\"number\">0</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//改变popular的大小</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">changePopularSize</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> height_default = (<span class=\"keyword\">int</span>) (ScreenUtils.getScreenHeight(context) * <span class=\"number\">0.7f</span>);</span><br><span class=\"line\">        view.measure(<span class=\"number\">0</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\">        <span class=\"keyword\">int</span> measuredHeight = view.getMeasuredHeight();</span><br><span class=\"line\">        <span class=\"keyword\">int</span> count = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">int</span> size = adapter.getCount();</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; size; i++) &#123;</span><br><span class=\"line\">            View childAt = adapter.getView(i, <span class=\"keyword\">null</span>, lv_popular_data);</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (childAt != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                childAt.measure(<span class=\"number\">0</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\">                <span class=\"keyword\">int</span> measuredHeight2 = childAt.getMeasuredHeight();</span><br><span class=\"line\">                count += measuredHeight2;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        measuredHeight += count;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (measuredHeight &lt; height_default) &#123;</span><br><span class=\"line\">            popupWindow.setHeight(ViewGroup.LayoutParams.WRAP_CONTENT);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            popupWindow.setHeight(height_default);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 接口 点击 popular</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">OnProductPopularItemOnclick</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">         * 得到点解的postion</span></span><br><span class=\"line\"><span class=\"comment\">         *</span></span><br><span class=\"line\"><span class=\"comment\">         * <span class=\"doctag\">@param</span></span></span><br><span class=\"line\"><span class=\"comment\">         */</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">getOnItemPosition</span><span class=\"params\">(<span class=\"keyword\">int</span>[] positionArray)</span></span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> OnProductPopularItemOnclick popularItemOnclick;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setPopularItemOnclick</span><span class=\"params\">(OnProductPopularItemOnclick popularItemOnclick)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.popularItemOnclick = popularItemOnclick;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p><a href=\"https://github.com/songjiabin/androidDemo\" target=\"_blank\" rel=\"noopener\">具体代码查看github</a></p>\n"},{"title":"熟悉使用ToolBar","date":"2018-08-13T06:38:35.000Z","copyright":true,"_content":"\n\n<blockquote class=\"blockquote-center\">优秀的人，不是不合群，而是他们合群的人里面没有你</blockquote>\n\n\n\n\n\n> ToolBar的出现是为了替换之前的ActionBar的各种不灵活使用方式,相反,ToolBar的使用变得非常灵活,因为它可以让我们自由往里面添加子控件.低版本要使用的话,可以添加support-v7包.\n\n要使用这个的话首先为了兼容低版本\n```Java\ncompile 'com.android.support:appcompat-v7:25.3.1'\n```\n其次要隐藏默认的ActionBar 否则会报错\n\n```Java\nCaused by: java.lang.IllegalStateException: This Activity already has an action bar \nsupplied by the window decor. Do not request Window.FEATURE_SUPPORT_ACTION_BAR and set \nwindowActionBar to false in your theme to use a Toolbar instead.\n```\n\n要隐藏默认的ActonBar的话可以再style中进行设置\n```Java\n<style name=\"AppTheme\" parent=\"Theme.AppCompat.Light.NoActionBar\">\n        <!--状态栏颜色-->\n        <item name=\"colorPrimaryDark\">@color/Indigo_colorPrimaryDark</item>\n        <!--Toolbar颜色-->\n        <item name=\"colorPrimary\">@color/Indigo_colorPrimary</item>\n        <!--返回键样式-->\n        <item name=\"drawerArrowStyle\">@style/AppTheme.DrawerArrowToggle</item>\n\n        <!--colorAccent 对应EditText编辑时、RadioButton选中、CheckBox等选中时的颜色。-->\n        <item name=\"colorAccent\">@color/colorYellow</item>\n\n\n        <!--将ActionBar隐藏,这里使用ToolBar-->\n        <item name=\"windowActionBar\">false</item>\n        <!-- 使用 API Level 22以上编译的话，要拿掉前綴字 -->\n        <item name=\"windowNoTitle\">true</item>\n        <!--窗口的颜色-->\n        <item name=\"android:windowBackground\">@android:color/holo_blue_bright</item>\n\n    </style>\n```\n从上面的style文件中,可以知道,手机状态栏的颜色和ToolBar的颜色也是可以在style中配置的.然后在清单文件的application节点下需要确认使用的style是android:theme=”@style/AppTheme”\n\n开始创建xml布局文件\n```Java\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<LinearLayout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:orientation=\"vertical\">\n\n    <!--\n  ?attr/actionBarSize:表示根据屏幕的分辨率采用系统默认的高度\n  如果低版本也要使用的话,则需要使用v7包的,否则只有api21上才能有效\n  -->\n\n    <android.support.v7.widget.Toolbar\n        android:id=\"@+id/toolbar\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"?attr/actionBarSize\"\n        android:background=\"?attr/colorPrimary\">\n        <!--添加Toolbar的子控件-->\n        <Button\n            android:id=\"@+id/btn_diy\"\n            android:layout_width=\"60dp\"\n            android:layout_height=\"wrap_content\"\n            android:layout_gravity=\"right\"\n            android:background=\"#80ffffff\"\n            android:text=\"自定义按钮\"\n            android:textColor=\"#000000\"\n            android:textSize=\"11sp\"/>\n\n        <TextView\n            android:id=\"@+id/tv_title\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"match_parent\"\n            android:layout_gravity=\"center\"\n            android:gravity=\"center\"\n            android:text=\"首页\"\n            android:textColor=\"@android:color/black\"\n            android:textSize=\"20sp\"/>\n\n    </android.support.v7.widget.Toolbar>\n\n    <TextView\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:gravity=\"center\"\n        android:text=\"hello_world\"\n        android:textColor=\"@android:color/black\"\n        android:textSize=\"30sp\"/>\n\n</LinearLayout>\n```\n\n为toolBar添加menu\n在menu中注册布局文件\n```Java\n<menu xmlns:android=\"http://schemas.android.com/apk/res/android\"\n      xmlns:app=\"http://schemas.android.com/apk/res-auto\">\n    <item\n        android:id=\"@+id/test_menu1\"\n        android:icon=\"@android:drawable/ic_menu_more\"\n        android:title=\"测试1\"\n        app:showAsAction=\"never\"/>\n    <item\n        android:id=\"@+id/test_menu2\"\n        android:icon=\"@android:drawable/ic_menu_month\"\n        android:title=\"测试2\"\n        app:showAsAction=\"never\"/>\n    <item\n        android:id=\"@+id/test_menu3\"\n        android:icon=\"@android:drawable/ic_menu_slideshow\"\n        android:title=\"测试3\"\n        app:showAsAction=\"never\"/>\n\n</menu>\n```\n\n\n在activity中进行重写onCreateOptionsMenu方法支持menu \n```Java\n @Override\n    public boolean onCreateOptionsMenu(Menu menu) {\n\n        getMenuInflater().inflate(R.menu.menu_toobar,menu);//加载menu布局\n        return true;\n    }\n```\n\n\n设置menu的点击事件\n```Java\n //设置toolBar上的MenuItem点击事件\n        mToolbar.setOnMenuItemClickListener(new Toolbar.OnMenuItemClickListener() {\n            @Override\n            public boolean onMenuItemClick(MenuItem item) {\n                switch (item.getItemId()) {\n                    case R.id.test_menu1:\n                        mToast.setText(\"click edit\");\n                        break;\n                    case R.id.test_menu2:\n                        mToast.setText(\"click share\");\n                        break;\n                    case R.id.test_menu3:\n                        //弹出自定义overflow\n                        popUpMyOverflow();\n                        return true;\n                }\n                mToast.show();\n                return true;\n            }\n        });\n```\n\n\n\n设置主标题  副标题\n```Java\n  // 主标题,默认为app_label的名字  就是左边的那个标题\n        mToolbar.setTitle(\"Title22222\");\n        mToolbar.setTitleTextColor(Color.YELLOW);\n\n        // 副标题\n        mToolbar.setSubtitle(\"Sub title\");\n        mToolbar.setSubtitleTextColor(Color.parseColor(\"#80ff0000\"));\n```\n\n设置侧边栏的按钮 比如返回按钮的那个\n\n```Java\n//侧边栏的按钮  比如返回的那个   \n        mToolbar.setNavigationIcon(android.R.drawable.checkbox_on_background);\n        //取代原本的actionbar\n        setSupportActionBar(mToolbar);\n```\n\nToolbar中某个控件的点击事件可以使用toolBoar.findViewByid()使用 如：\n\n```Java \nmToolbar.findViewById(R.id.tv_title).setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                mToast.setText(\"点击自定义标题\");\n                mToast.show();\n            }\n        });\n\n```\n\n\n点击nemu中的第三个的时候进行 弹框 popuwindow\n\n```Java\n /**\n     * 弹出自定义的popWindow\n     */\n    public void popUpMyOverflow() {\n        //获取状态栏高度\n        Rect frame = new Rect();\n        getWindow().getDecorView().getWindowVisibleDisplayFrame(frame);\n        //状态栏高度+toolbar的高度\n        int yOffset = frame.top + mToolbar.getHeight();\n        if (null == mPopupWindow) {\n            //初始化PopupWindow的布局\n            View popView = getLayoutInflater().inflate(R.layout.popular_window, null);\n            //popView即popupWindow的布局，ture设置focusAble.\n            mPopupWindow = new PopupWindow(popView,\n                    ViewGroup.LayoutParams.WRAP_CONTENT,\n                    ViewGroup.LayoutParams.WRAP_CONTENT, true);\n            //必须设置BackgroundDrawable后setOutsideTouchable(true)才会有效\n            mPopupWindow.setBackgroundDrawable(new ColorDrawable());\n            //点击外部关闭。\n            mPopupWindow.setOutsideTouchable(true);\n            //设置一个动画。\n            mPopupWindow.setAnimationStyle(android.R.style.Animation_Dialog);\n            //设置Gravity，让它显示在右上角。\n            mPopupWindow.showAtLocation(mToolbar, Gravity.RIGHT | Gravity.TOP, 0, yOffset);\n            //设置item的点击监听\n\n        } else {\n            mPopupWindow.showAtLocation(mToolbar, Gravity.RIGHT | Gravity.TOP, 0, yOffset);\n        }\n\n    }\n\n```\n\n点击结束 popuwindow\n```Java\n if (null != mPopupWindow && mPopupWindow.isShowing()) {\n            mPopupWindow.dismiss();\n        }\n```\n\n![demo](http://t1.aixinxi.net/o_1ckregrju1qr11rir1djs1ne6jifa.gif-w.jpg)\n\n\n\n","source":"_posts/熟悉使用ToolBar.md","raw":"---\ntitle: 熟悉使用ToolBar\ndate: 2018-08-13 14:38:35\ntags:\ncopyright: true\n\n---\n\n\n<blockquote class=\"blockquote-center\">优秀的人，不是不合群，而是他们合群的人里面没有你</blockquote>\n\n\n\n\n\n> ToolBar的出现是为了替换之前的ActionBar的各种不灵活使用方式,相反,ToolBar的使用变得非常灵活,因为它可以让我们自由往里面添加子控件.低版本要使用的话,可以添加support-v7包.\n\n要使用这个的话首先为了兼容低版本\n```Java\ncompile 'com.android.support:appcompat-v7:25.3.1'\n```\n其次要隐藏默认的ActionBar 否则会报错\n\n```Java\nCaused by: java.lang.IllegalStateException: This Activity already has an action bar \nsupplied by the window decor. Do not request Window.FEATURE_SUPPORT_ACTION_BAR and set \nwindowActionBar to false in your theme to use a Toolbar instead.\n```\n\n要隐藏默认的ActonBar的话可以再style中进行设置\n```Java\n<style name=\"AppTheme\" parent=\"Theme.AppCompat.Light.NoActionBar\">\n        <!--状态栏颜色-->\n        <item name=\"colorPrimaryDark\">@color/Indigo_colorPrimaryDark</item>\n        <!--Toolbar颜色-->\n        <item name=\"colorPrimary\">@color/Indigo_colorPrimary</item>\n        <!--返回键样式-->\n        <item name=\"drawerArrowStyle\">@style/AppTheme.DrawerArrowToggle</item>\n\n        <!--colorAccent 对应EditText编辑时、RadioButton选中、CheckBox等选中时的颜色。-->\n        <item name=\"colorAccent\">@color/colorYellow</item>\n\n\n        <!--将ActionBar隐藏,这里使用ToolBar-->\n        <item name=\"windowActionBar\">false</item>\n        <!-- 使用 API Level 22以上编译的话，要拿掉前綴字 -->\n        <item name=\"windowNoTitle\">true</item>\n        <!--窗口的颜色-->\n        <item name=\"android:windowBackground\">@android:color/holo_blue_bright</item>\n\n    </style>\n```\n从上面的style文件中,可以知道,手机状态栏的颜色和ToolBar的颜色也是可以在style中配置的.然后在清单文件的application节点下需要确认使用的style是android:theme=”@style/AppTheme”\n\n开始创建xml布局文件\n```Java\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<LinearLayout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:orientation=\"vertical\">\n\n    <!--\n  ?attr/actionBarSize:表示根据屏幕的分辨率采用系统默认的高度\n  如果低版本也要使用的话,则需要使用v7包的,否则只有api21上才能有效\n  -->\n\n    <android.support.v7.widget.Toolbar\n        android:id=\"@+id/toolbar\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"?attr/actionBarSize\"\n        android:background=\"?attr/colorPrimary\">\n        <!--添加Toolbar的子控件-->\n        <Button\n            android:id=\"@+id/btn_diy\"\n            android:layout_width=\"60dp\"\n            android:layout_height=\"wrap_content\"\n            android:layout_gravity=\"right\"\n            android:background=\"#80ffffff\"\n            android:text=\"自定义按钮\"\n            android:textColor=\"#000000\"\n            android:textSize=\"11sp\"/>\n\n        <TextView\n            android:id=\"@+id/tv_title\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"match_parent\"\n            android:layout_gravity=\"center\"\n            android:gravity=\"center\"\n            android:text=\"首页\"\n            android:textColor=\"@android:color/black\"\n            android:textSize=\"20sp\"/>\n\n    </android.support.v7.widget.Toolbar>\n\n    <TextView\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:gravity=\"center\"\n        android:text=\"hello_world\"\n        android:textColor=\"@android:color/black\"\n        android:textSize=\"30sp\"/>\n\n</LinearLayout>\n```\n\n为toolBar添加menu\n在menu中注册布局文件\n```Java\n<menu xmlns:android=\"http://schemas.android.com/apk/res/android\"\n      xmlns:app=\"http://schemas.android.com/apk/res-auto\">\n    <item\n        android:id=\"@+id/test_menu1\"\n        android:icon=\"@android:drawable/ic_menu_more\"\n        android:title=\"测试1\"\n        app:showAsAction=\"never\"/>\n    <item\n        android:id=\"@+id/test_menu2\"\n        android:icon=\"@android:drawable/ic_menu_month\"\n        android:title=\"测试2\"\n        app:showAsAction=\"never\"/>\n    <item\n        android:id=\"@+id/test_menu3\"\n        android:icon=\"@android:drawable/ic_menu_slideshow\"\n        android:title=\"测试3\"\n        app:showAsAction=\"never\"/>\n\n</menu>\n```\n\n\n在activity中进行重写onCreateOptionsMenu方法支持menu \n```Java\n @Override\n    public boolean onCreateOptionsMenu(Menu menu) {\n\n        getMenuInflater().inflate(R.menu.menu_toobar,menu);//加载menu布局\n        return true;\n    }\n```\n\n\n设置menu的点击事件\n```Java\n //设置toolBar上的MenuItem点击事件\n        mToolbar.setOnMenuItemClickListener(new Toolbar.OnMenuItemClickListener() {\n            @Override\n            public boolean onMenuItemClick(MenuItem item) {\n                switch (item.getItemId()) {\n                    case R.id.test_menu1:\n                        mToast.setText(\"click edit\");\n                        break;\n                    case R.id.test_menu2:\n                        mToast.setText(\"click share\");\n                        break;\n                    case R.id.test_menu3:\n                        //弹出自定义overflow\n                        popUpMyOverflow();\n                        return true;\n                }\n                mToast.show();\n                return true;\n            }\n        });\n```\n\n\n\n设置主标题  副标题\n```Java\n  // 主标题,默认为app_label的名字  就是左边的那个标题\n        mToolbar.setTitle(\"Title22222\");\n        mToolbar.setTitleTextColor(Color.YELLOW);\n\n        // 副标题\n        mToolbar.setSubtitle(\"Sub title\");\n        mToolbar.setSubtitleTextColor(Color.parseColor(\"#80ff0000\"));\n```\n\n设置侧边栏的按钮 比如返回按钮的那个\n\n```Java\n//侧边栏的按钮  比如返回的那个   \n        mToolbar.setNavigationIcon(android.R.drawable.checkbox_on_background);\n        //取代原本的actionbar\n        setSupportActionBar(mToolbar);\n```\n\nToolbar中某个控件的点击事件可以使用toolBoar.findViewByid()使用 如：\n\n```Java \nmToolbar.findViewById(R.id.tv_title).setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                mToast.setText(\"点击自定义标题\");\n                mToast.show();\n            }\n        });\n\n```\n\n\n点击nemu中的第三个的时候进行 弹框 popuwindow\n\n```Java\n /**\n     * 弹出自定义的popWindow\n     */\n    public void popUpMyOverflow() {\n        //获取状态栏高度\n        Rect frame = new Rect();\n        getWindow().getDecorView().getWindowVisibleDisplayFrame(frame);\n        //状态栏高度+toolbar的高度\n        int yOffset = frame.top + mToolbar.getHeight();\n        if (null == mPopupWindow) {\n            //初始化PopupWindow的布局\n            View popView = getLayoutInflater().inflate(R.layout.popular_window, null);\n            //popView即popupWindow的布局，ture设置focusAble.\n            mPopupWindow = new PopupWindow(popView,\n                    ViewGroup.LayoutParams.WRAP_CONTENT,\n                    ViewGroup.LayoutParams.WRAP_CONTENT, true);\n            //必须设置BackgroundDrawable后setOutsideTouchable(true)才会有效\n            mPopupWindow.setBackgroundDrawable(new ColorDrawable());\n            //点击外部关闭。\n            mPopupWindow.setOutsideTouchable(true);\n            //设置一个动画。\n            mPopupWindow.setAnimationStyle(android.R.style.Animation_Dialog);\n            //设置Gravity，让它显示在右上角。\n            mPopupWindow.showAtLocation(mToolbar, Gravity.RIGHT | Gravity.TOP, 0, yOffset);\n            //设置item的点击监听\n\n        } else {\n            mPopupWindow.showAtLocation(mToolbar, Gravity.RIGHT | Gravity.TOP, 0, yOffset);\n        }\n\n    }\n\n```\n\n点击结束 popuwindow\n```Java\n if (null != mPopupWindow && mPopupWindow.isShowing()) {\n            mPopupWindow.dismiss();\n        }\n```\n\n![demo](http://t1.aixinxi.net/o_1ckregrju1qr11rir1djs1ne6jifa.gif-w.jpg)\n\n\n\n","slug":"熟悉使用ToolBar","published":1,"updated":"2018-08-14T05:31:13.085Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjkxc5ssq0004gguqxy9wfojy","content":"<blockquote class=\"blockquote-center\">优秀的人，不是不合群，而是他们合群的人里面没有你</blockquote>\n\n\n\n\n\n<blockquote>\n<p>ToolBar的出现是为了替换之前的ActionBar的各种不灵活使用方式,相反,ToolBar的使用变得非常灵活,因为它可以让我们自由往里面添加子控件.低版本要使用的话,可以添加support-v7包.</p>\n</blockquote>\n<p>要使用这个的话首先为了兼容低版本<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">compile <span class=\"string\">'com.android.support:appcompat-v7:25.3.1'</span></span><br></pre></td></tr></table></figure></p>\n<p>其次要隐藏默认的ActionBar 否则会报错</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Caused by: java.lang.IllegalStateException: This Activity already has an action bar </span><br><span class=\"line\">supplied by the window decor. Do not request Window.FEATURE_SUPPORT_ACTION_BAR and set </span><br><span class=\"line\">windowActionBar to <span class=\"keyword\">false</span> in your theme to use a Toolbar instead.</span><br></pre></td></tr></table></figure>\n<p>要隐藏默认的ActonBar的话可以再style中进行设置<br><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;style name=<span class=\"string\">\"AppTheme\"</span> parent=<span class=\"string\">\"Theme.AppCompat.Light.NoActionBar\"</span>&gt;</span><br><span class=\"line\">        &lt;!--状态栏颜色--&gt;</span><br><span class=\"line\">        &lt;item name=\"colorPrimaryDark\"&gt;@color/Indigo_colorPrimaryDark&lt;/item&gt;</span><br><span class=\"line\">        &lt;!--Toolbar颜色--&gt;</span><br><span class=\"line\">        &lt;item name=\"colorPrimary\"&gt;@color/Indigo_colorPrimary&lt;/item&gt;</span><br><span class=\"line\">        &lt;!--返回键样式--&gt;</span><br><span class=\"line\">        &lt;item name=\"drawerArrowStyle\"&gt;@style/AppTheme.DrawerArrowToggle&lt;/item&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">        &lt;!--colorAccent 对应EditText编辑时、RadioButton选中、CheckBox等选中时的颜色。--&gt;</span><br><span class=\"line\">        &lt;item name=\"colorAccent\"&gt;@color/colorYellow&lt;/item&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        &lt;!--将ActionBar隐藏,这里使用ToolBar--&gt;</span><br><span class=\"line\">        &lt;item name=\"windowActionBar\"&gt;false&lt;/item&gt;</span><br><span class=\"line\">        &lt;!-- 使用 API Level <span class=\"number\">22</span>以上编译的话，要拿掉前綴字 --&gt;</span><br><span class=\"line\">        &lt;item name=\"windowNoTitle\"&gt;true&lt;/item&gt;</span><br><span class=\"line\">        &lt;!--窗口的颜色--&gt;</span><br><span class=\"line\">        &lt;item name=\"android:windowBackground\"&gt;@android:color/holo_blue_bright&lt;/item&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;/style&gt;</span><br></pre></td></tr></table></figure></p>\n<p>从上面的style文件中,可以知道,手机状态栏的颜色和ToolBar的颜色也是可以在style中配置的.然后在清单文件的application节点下需要确认使用的style是android:theme=”@style/AppTheme”</p>\n<p>开始创建xml布局文件<br><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=<span class=\"string\">\"1.0\"</span> encoding=<span class=\"string\">\"utf-8\"</span>?&gt;</span><br><span class=\"line\">&lt;LinearLayout</span><br><span class=\"line\">    xmlns:android=<span class=\"string\">\"http://schemas.android.com/apk/res/android\"</span></span><br><span class=\"line\">    android:layout_width=<span class=\"string\">\"match_parent\"</span></span><br><span class=\"line\">    android:layout_height=<span class=\"string\">\"match_parent\"</span></span><br><span class=\"line\">    android:orientation=<span class=\"string\">\"vertical\"</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!--</span><br><span class=\"line\">  ?attr/actionBarSize:表示根据屏幕的分辨率采用系统默认的高度</span><br><span class=\"line\">  如果低版本也要使用的话,则需要使用v7包的,否则只有api21上才能有效</span><br><span class=\"line\">  --&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;android.support.v7.widget.Toolbar</span><br><span class=\"line\">        android:id=<span class=\"string\">\"@+id/toolbar\"</span></span><br><span class=\"line\">        android:layout_width=<span class=\"string\">\"match_parent\"</span></span><br><span class=\"line\">        android:layout_height=<span class=\"string\">\"?attr/actionBarSize\"</span></span><br><span class=\"line\">        android:background=<span class=\"string\">\"?attr/colorPrimary\"</span>&gt;</span><br><span class=\"line\">        &lt;!--添加Toolbar的子控件--&gt;</span><br><span class=\"line\">        &lt;Button</span><br><span class=\"line\">            android:id=<span class=\"string\">\"@+id/btn_diy\"</span></span><br><span class=\"line\">            android:layout_width=<span class=\"string\">\"60dp\"</span></span><br><span class=\"line\">            android:layout_height=<span class=\"string\">\"wrap_content\"</span></span><br><span class=\"line\">            android:layout_gravity=<span class=\"string\">\"right\"</span></span><br><span class=\"line\">            android:background=<span class=\"string\">\"#80ffffff\"</span></span><br><span class=\"line\">            android:text=<span class=\"string\">\"自定义按钮\"</span></span><br><span class=\"line\">            android:textColor=<span class=\"string\">\"#000000\"</span></span><br><span class=\"line\">            android:textSize=<span class=\"string\">\"11sp\"</span>/&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">        &lt;TextView</span><br><span class=\"line\">            android:id=<span class=\"string\">\"@+id/tv_title\"</span></span><br><span class=\"line\">            android:layout_width=<span class=\"string\">\"wrap_content\"</span></span><br><span class=\"line\">            android:layout_height=<span class=\"string\">\"match_parent\"</span></span><br><span class=\"line\">            android:layout_gravity=<span class=\"string\">\"center\"</span></span><br><span class=\"line\">            android:gravity=<span class=\"string\">\"center\"</span></span><br><span class=\"line\">            android:text=<span class=\"string\">\"首页\"</span></span><br><span class=\"line\">            android:textColor=<span class=\"string\">\"@android:color/black\"</span></span><br><span class=\"line\">            android:textSize=<span class=\"string\">\"20sp\"</span>/&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;/android.support.v7.widget.Toolbar&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;TextView</span><br><span class=\"line\">        android:layout_width=<span class=\"string\">\"match_parent\"</span></span><br><span class=\"line\">        android:layout_height=<span class=\"string\">\"match_parent\"</span></span><br><span class=\"line\">        android:gravity=<span class=\"string\">\"center\"</span></span><br><span class=\"line\">        android:text=<span class=\"string\">\"hello_world\"</span></span><br><span class=\"line\">        android:textColor=<span class=\"string\">\"@android:color/black\"</span></span><br><span class=\"line\">        android:textSize=<span class=\"string\">\"30sp\"</span>/&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;/LinearLayout&gt;</span><br></pre></td></tr></table></figure></p>\n<p>为toolBar添加menu<br>在menu中注册布局文件<br><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;menu xmlns:android=<span class=\"string\">\"http://schemas.android.com/apk/res/android\"</span></span><br><span class=\"line\">      xmlns:app=<span class=\"string\">\"http://schemas.android.com/apk/res-auto\"</span>&gt;</span><br><span class=\"line\">    &lt;item</span><br><span class=\"line\">        android:id=<span class=\"string\">\"@+id/test_menu1\"</span></span><br><span class=\"line\">        android:icon=<span class=\"string\">\"@android:drawable/ic_menu_more\"</span></span><br><span class=\"line\">        android:title=<span class=\"string\">\"测试1\"</span></span><br><span class=\"line\">        app:showAsAction=<span class=\"string\">\"never\"</span>/&gt;</span><br><span class=\"line\">    &lt;item</span><br><span class=\"line\">        android:id=<span class=\"string\">\"@+id/test_menu2\"</span></span><br><span class=\"line\">        android:icon=<span class=\"string\">\"@android:drawable/ic_menu_month\"</span></span><br><span class=\"line\">        android:title=<span class=\"string\">\"测试2\"</span></span><br><span class=\"line\">        app:showAsAction=<span class=\"string\">\"never\"</span>/&gt;</span><br><span class=\"line\">    &lt;item</span><br><span class=\"line\">        android:id=<span class=\"string\">\"@+id/test_menu3\"</span></span><br><span class=\"line\">        android:icon=<span class=\"string\">\"@android:drawable/ic_menu_slideshow\"</span></span><br><span class=\"line\">        android:title=<span class=\"string\">\"测试3\"</span></span><br><span class=\"line\">        app:showAsAction=<span class=\"string\">\"never\"</span>/&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;/menu&gt;</span><br></pre></td></tr></table></figure></p>\n<p>在activity中进行重写onCreateOptionsMenu方法支持menu<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">onCreateOptionsMenu</span><span class=\"params\">(Menu menu)</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">       getMenuInflater().inflate(R.menu.menu_toobar,menu);<span class=\"comment\">//加载menu布局</span></span><br><span class=\"line\">       <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure></p>\n<p>设置menu的点击事件<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//设置toolBar上的MenuItem点击事件</span></span><br><span class=\"line\">       mToolbar.setOnMenuItemClickListener(<span class=\"keyword\">new</span> Toolbar.OnMenuItemClickListener() &#123;</span><br><span class=\"line\">           <span class=\"meta\">@Override</span></span><br><span class=\"line\">           <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">onMenuItemClick</span><span class=\"params\">(MenuItem item)</span> </span>&#123;</span><br><span class=\"line\">               <span class=\"keyword\">switch</span> (item.getItemId()) &#123;</span><br><span class=\"line\">                   <span class=\"keyword\">case</span> R.id.test_menu1:</span><br><span class=\"line\">                       mToast.setText(<span class=\"string\">\"click edit\"</span>);</span><br><span class=\"line\">                       <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                   <span class=\"keyword\">case</span> R.id.test_menu2:</span><br><span class=\"line\">                       mToast.setText(<span class=\"string\">\"click share\"</span>);</span><br><span class=\"line\">                       <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                   <span class=\"keyword\">case</span> R.id.test_menu3:</span><br><span class=\"line\">                       <span class=\"comment\">//弹出自定义overflow</span></span><br><span class=\"line\">                       popUpMyOverflow();</span><br><span class=\"line\">                       <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">               &#125;</span><br><span class=\"line\">               mToast.show();</span><br><span class=\"line\">               <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">           &#125;</span><br><span class=\"line\">       &#125;);</span><br></pre></td></tr></table></figure></p>\n<p>设置主标题  副标题<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 主标题,默认为app_label的名字  就是左边的那个标题</span></span><br><span class=\"line\">      mToolbar.setTitle(<span class=\"string\">\"Title22222\"</span>);</span><br><span class=\"line\">      mToolbar.setTitleTextColor(Color.YELLOW);</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">// 副标题</span></span><br><span class=\"line\">      mToolbar.setSubtitle(<span class=\"string\">\"Sub title\"</span>);</span><br><span class=\"line\">      mToolbar.setSubtitleTextColor(Color.parseColor(<span class=\"string\">\"#80ff0000\"</span>));</span><br></pre></td></tr></table></figure></p>\n<p>设置侧边栏的按钮 比如返回按钮的那个</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//侧边栏的按钮  比如返回的那个   </span></span><br><span class=\"line\">        mToolbar.setNavigationIcon(android.R.drawable.checkbox_on_background);</span><br><span class=\"line\">        <span class=\"comment\">//取代原本的actionbar</span></span><br><span class=\"line\">        setSupportActionBar(mToolbar);</span><br></pre></td></tr></table></figure>\n<p>Toolbar中某个控件的点击事件可以使用toolBoar.findViewByid()使用 如：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mToolbar.findViewById(R.id.tv_title).setOnClickListener(<span class=\"keyword\">new</span> View.OnClickListener() &#123;</span><br><span class=\"line\">            <span class=\"meta\">@Override</span></span><br><span class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onClick</span><span class=\"params\">(View v)</span> </span>&#123;</span><br><span class=\"line\">                mToast.setText(<span class=\"string\">\"点击自定义标题\"</span>);</span><br><span class=\"line\">                mToast.show();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br></pre></td></tr></table></figure>\n<p>点击nemu中的第三个的时候进行 弹框 popuwindow</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">    * 弹出自定义的popWindow</span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">popUpMyOverflow</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">       <span class=\"comment\">//获取状态栏高度</span></span><br><span class=\"line\">       Rect frame = <span class=\"keyword\">new</span> Rect();</span><br><span class=\"line\">       getWindow().getDecorView().getWindowVisibleDisplayFrame(frame);</span><br><span class=\"line\">       <span class=\"comment\">//状态栏高度+toolbar的高度</span></span><br><span class=\"line\">       <span class=\"keyword\">int</span> yOffset = frame.top + mToolbar.getHeight();</span><br><span class=\"line\">       <span class=\"keyword\">if</span> (<span class=\"keyword\">null</span> == mPopupWindow) &#123;</span><br><span class=\"line\">           <span class=\"comment\">//初始化PopupWindow的布局</span></span><br><span class=\"line\">           View popView = getLayoutInflater().inflate(R.layout.popular_window, <span class=\"keyword\">null</span>);</span><br><span class=\"line\">           <span class=\"comment\">//popView即popupWindow的布局，ture设置focusAble.</span></span><br><span class=\"line\">           mPopupWindow = <span class=\"keyword\">new</span> PopupWindow(popView,</span><br><span class=\"line\">                   ViewGroup.LayoutParams.WRAP_CONTENT,</span><br><span class=\"line\">                   ViewGroup.LayoutParams.WRAP_CONTENT, <span class=\"keyword\">true</span>);</span><br><span class=\"line\">           <span class=\"comment\">//必须设置BackgroundDrawable后setOutsideTouchable(true)才会有效</span></span><br><span class=\"line\">           mPopupWindow.setBackgroundDrawable(<span class=\"keyword\">new</span> ColorDrawable());</span><br><span class=\"line\">           <span class=\"comment\">//点击外部关闭。</span></span><br><span class=\"line\">           mPopupWindow.setOutsideTouchable(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">           <span class=\"comment\">//设置一个动画。</span></span><br><span class=\"line\">           mPopupWindow.setAnimationStyle(android.R.style.Animation_Dialog);</span><br><span class=\"line\">           <span class=\"comment\">//设置Gravity，让它显示在右上角。</span></span><br><span class=\"line\">           mPopupWindow.showAtLocation(mToolbar, Gravity.RIGHT | Gravity.TOP, <span class=\"number\">0</span>, yOffset);</span><br><span class=\"line\">           <span class=\"comment\">//设置item的点击监听</span></span><br><span class=\"line\"></span><br><span class=\"line\">       &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">           mPopupWindow.showAtLocation(mToolbar, Gravity.RIGHT | Gravity.TOP, <span class=\"number\">0</span>, yOffset);</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n<p>点击结束 popuwindow<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (<span class=\"keyword\">null</span> != mPopupWindow &amp;&amp; mPopupWindow.isShowing()) &#123;</span><br><span class=\"line\">           mPopupWindow.dismiss();</span><br><span class=\"line\">       &#125;</span><br></pre></td></tr></table></figure></p>\n<p><img src=\"http://t1.aixinxi.net/o_1ckregrju1qr11rir1djs1ne6jifa.gif-w.jpg\" alt=\"demo\"></p>\n","site":{"data":{}},"excerpt":"","more":"<blockquote class=\"blockquote-center\">优秀的人，不是不合群，而是他们合群的人里面没有你</blockquote>\n\n\n\n\n\n<blockquote>\n<p>ToolBar的出现是为了替换之前的ActionBar的各种不灵活使用方式,相反,ToolBar的使用变得非常灵活,因为它可以让我们自由往里面添加子控件.低版本要使用的话,可以添加support-v7包.</p>\n</blockquote>\n<p>要使用这个的话首先为了兼容低版本<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">compile <span class=\"string\">'com.android.support:appcompat-v7:25.3.1'</span></span><br></pre></td></tr></table></figure></p>\n<p>其次要隐藏默认的ActionBar 否则会报错</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Caused by: java.lang.IllegalStateException: This Activity already has an action bar </span><br><span class=\"line\">supplied by the window decor. Do not request Window.FEATURE_SUPPORT_ACTION_BAR and set </span><br><span class=\"line\">windowActionBar to <span class=\"keyword\">false</span> in your theme to use a Toolbar instead.</span><br></pre></td></tr></table></figure>\n<p>要隐藏默认的ActonBar的话可以再style中进行设置<br><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;style name=<span class=\"string\">\"AppTheme\"</span> parent=<span class=\"string\">\"Theme.AppCompat.Light.NoActionBar\"</span>&gt;</span><br><span class=\"line\">        &lt;!--状态栏颜色--&gt;</span><br><span class=\"line\">        &lt;item name=\"colorPrimaryDark\"&gt;@color/Indigo_colorPrimaryDark&lt;/item&gt;</span><br><span class=\"line\">        &lt;!--Toolbar颜色--&gt;</span><br><span class=\"line\">        &lt;item name=\"colorPrimary\"&gt;@color/Indigo_colorPrimary&lt;/item&gt;</span><br><span class=\"line\">        &lt;!--返回键样式--&gt;</span><br><span class=\"line\">        &lt;item name=\"drawerArrowStyle\"&gt;@style/AppTheme.DrawerArrowToggle&lt;/item&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">        &lt;!--colorAccent 对应EditText编辑时、RadioButton选中、CheckBox等选中时的颜色。--&gt;</span><br><span class=\"line\">        &lt;item name=\"colorAccent\"&gt;@color/colorYellow&lt;/item&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        &lt;!--将ActionBar隐藏,这里使用ToolBar--&gt;</span><br><span class=\"line\">        &lt;item name=\"windowActionBar\"&gt;false&lt;/item&gt;</span><br><span class=\"line\">        &lt;!-- 使用 API Level <span class=\"number\">22</span>以上编译的话，要拿掉前綴字 --&gt;</span><br><span class=\"line\">        &lt;item name=\"windowNoTitle\"&gt;true&lt;/item&gt;</span><br><span class=\"line\">        &lt;!--窗口的颜色--&gt;</span><br><span class=\"line\">        &lt;item name=\"android:windowBackground\"&gt;@android:color/holo_blue_bright&lt;/item&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;/style&gt;</span><br></pre></td></tr></table></figure></p>\n<p>从上面的style文件中,可以知道,手机状态栏的颜色和ToolBar的颜色也是可以在style中配置的.然后在清单文件的application节点下需要确认使用的style是android:theme=”@style/AppTheme”</p>\n<p>开始创建xml布局文件<br><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=<span class=\"string\">\"1.0\"</span> encoding=<span class=\"string\">\"utf-8\"</span>?&gt;</span><br><span class=\"line\">&lt;LinearLayout</span><br><span class=\"line\">    xmlns:android=<span class=\"string\">\"http://schemas.android.com/apk/res/android\"</span></span><br><span class=\"line\">    android:layout_width=<span class=\"string\">\"match_parent\"</span></span><br><span class=\"line\">    android:layout_height=<span class=\"string\">\"match_parent\"</span></span><br><span class=\"line\">    android:orientation=<span class=\"string\">\"vertical\"</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;!--</span><br><span class=\"line\">  ?attr/actionBarSize:表示根据屏幕的分辨率采用系统默认的高度</span><br><span class=\"line\">  如果低版本也要使用的话,则需要使用v7包的,否则只有api21上才能有效</span><br><span class=\"line\">  --&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;android.support.v7.widget.Toolbar</span><br><span class=\"line\">        android:id=<span class=\"string\">\"@+id/toolbar\"</span></span><br><span class=\"line\">        android:layout_width=<span class=\"string\">\"match_parent\"</span></span><br><span class=\"line\">        android:layout_height=<span class=\"string\">\"?attr/actionBarSize\"</span></span><br><span class=\"line\">        android:background=<span class=\"string\">\"?attr/colorPrimary\"</span>&gt;</span><br><span class=\"line\">        &lt;!--添加Toolbar的子控件--&gt;</span><br><span class=\"line\">        &lt;Button</span><br><span class=\"line\">            android:id=<span class=\"string\">\"@+id/btn_diy\"</span></span><br><span class=\"line\">            android:layout_width=<span class=\"string\">\"60dp\"</span></span><br><span class=\"line\">            android:layout_height=<span class=\"string\">\"wrap_content\"</span></span><br><span class=\"line\">            android:layout_gravity=<span class=\"string\">\"right\"</span></span><br><span class=\"line\">            android:background=<span class=\"string\">\"#80ffffff\"</span></span><br><span class=\"line\">            android:text=<span class=\"string\">\"自定义按钮\"</span></span><br><span class=\"line\">            android:textColor=<span class=\"string\">\"#000000\"</span></span><br><span class=\"line\">            android:textSize=<span class=\"string\">\"11sp\"</span>/&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">        &lt;TextView</span><br><span class=\"line\">            android:id=<span class=\"string\">\"@+id/tv_title\"</span></span><br><span class=\"line\">            android:layout_width=<span class=\"string\">\"wrap_content\"</span></span><br><span class=\"line\">            android:layout_height=<span class=\"string\">\"match_parent\"</span></span><br><span class=\"line\">            android:layout_gravity=<span class=\"string\">\"center\"</span></span><br><span class=\"line\">            android:gravity=<span class=\"string\">\"center\"</span></span><br><span class=\"line\">            android:text=<span class=\"string\">\"首页\"</span></span><br><span class=\"line\">            android:textColor=<span class=\"string\">\"@android:color/black\"</span></span><br><span class=\"line\">            android:textSize=<span class=\"string\">\"20sp\"</span>/&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;/android.support.v7.widget.Toolbar&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;TextView</span><br><span class=\"line\">        android:layout_width=<span class=\"string\">\"match_parent\"</span></span><br><span class=\"line\">        android:layout_height=<span class=\"string\">\"match_parent\"</span></span><br><span class=\"line\">        android:gravity=<span class=\"string\">\"center\"</span></span><br><span class=\"line\">        android:text=<span class=\"string\">\"hello_world\"</span></span><br><span class=\"line\">        android:textColor=<span class=\"string\">\"@android:color/black\"</span></span><br><span class=\"line\">        android:textSize=<span class=\"string\">\"30sp\"</span>/&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;/LinearLayout&gt;</span><br></pre></td></tr></table></figure></p>\n<p>为toolBar添加menu<br>在menu中注册布局文件<br><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;menu xmlns:android=<span class=\"string\">\"http://schemas.android.com/apk/res/android\"</span></span><br><span class=\"line\">      xmlns:app=<span class=\"string\">\"http://schemas.android.com/apk/res-auto\"</span>&gt;</span><br><span class=\"line\">    &lt;item</span><br><span class=\"line\">        android:id=<span class=\"string\">\"@+id/test_menu1\"</span></span><br><span class=\"line\">        android:icon=<span class=\"string\">\"@android:drawable/ic_menu_more\"</span></span><br><span class=\"line\">        android:title=<span class=\"string\">\"测试1\"</span></span><br><span class=\"line\">        app:showAsAction=<span class=\"string\">\"never\"</span>/&gt;</span><br><span class=\"line\">    &lt;item</span><br><span class=\"line\">        android:id=<span class=\"string\">\"@+id/test_menu2\"</span></span><br><span class=\"line\">        android:icon=<span class=\"string\">\"@android:drawable/ic_menu_month\"</span></span><br><span class=\"line\">        android:title=<span class=\"string\">\"测试2\"</span></span><br><span class=\"line\">        app:showAsAction=<span class=\"string\">\"never\"</span>/&gt;</span><br><span class=\"line\">    &lt;item</span><br><span class=\"line\">        android:id=<span class=\"string\">\"@+id/test_menu3\"</span></span><br><span class=\"line\">        android:icon=<span class=\"string\">\"@android:drawable/ic_menu_slideshow\"</span></span><br><span class=\"line\">        android:title=<span class=\"string\">\"测试3\"</span></span><br><span class=\"line\">        app:showAsAction=<span class=\"string\">\"never\"</span>/&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;/menu&gt;</span><br></pre></td></tr></table></figure></p>\n<p>在activity中进行重写onCreateOptionsMenu方法支持menu<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">onCreateOptionsMenu</span><span class=\"params\">(Menu menu)</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">       getMenuInflater().inflate(R.menu.menu_toobar,menu);<span class=\"comment\">//加载menu布局</span></span><br><span class=\"line\">       <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure></p>\n<p>设置menu的点击事件<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//设置toolBar上的MenuItem点击事件</span></span><br><span class=\"line\">       mToolbar.setOnMenuItemClickListener(<span class=\"keyword\">new</span> Toolbar.OnMenuItemClickListener() &#123;</span><br><span class=\"line\">           <span class=\"meta\">@Override</span></span><br><span class=\"line\">           <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">onMenuItemClick</span><span class=\"params\">(MenuItem item)</span> </span>&#123;</span><br><span class=\"line\">               <span class=\"keyword\">switch</span> (item.getItemId()) &#123;</span><br><span class=\"line\">                   <span class=\"keyword\">case</span> R.id.test_menu1:</span><br><span class=\"line\">                       mToast.setText(<span class=\"string\">\"click edit\"</span>);</span><br><span class=\"line\">                       <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                   <span class=\"keyword\">case</span> R.id.test_menu2:</span><br><span class=\"line\">                       mToast.setText(<span class=\"string\">\"click share\"</span>);</span><br><span class=\"line\">                       <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                   <span class=\"keyword\">case</span> R.id.test_menu3:</span><br><span class=\"line\">                       <span class=\"comment\">//弹出自定义overflow</span></span><br><span class=\"line\">                       popUpMyOverflow();</span><br><span class=\"line\">                       <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">               &#125;</span><br><span class=\"line\">               mToast.show();</span><br><span class=\"line\">               <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">           &#125;</span><br><span class=\"line\">       &#125;);</span><br></pre></td></tr></table></figure></p>\n<p>设置主标题  副标题<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 主标题,默认为app_label的名字  就是左边的那个标题</span></span><br><span class=\"line\">      mToolbar.setTitle(<span class=\"string\">\"Title22222\"</span>);</span><br><span class=\"line\">      mToolbar.setTitleTextColor(Color.YELLOW);</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">// 副标题</span></span><br><span class=\"line\">      mToolbar.setSubtitle(<span class=\"string\">\"Sub title\"</span>);</span><br><span class=\"line\">      mToolbar.setSubtitleTextColor(Color.parseColor(<span class=\"string\">\"#80ff0000\"</span>));</span><br></pre></td></tr></table></figure></p>\n<p>设置侧边栏的按钮 比如返回按钮的那个</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//侧边栏的按钮  比如返回的那个   </span></span><br><span class=\"line\">        mToolbar.setNavigationIcon(android.R.drawable.checkbox_on_background);</span><br><span class=\"line\">        <span class=\"comment\">//取代原本的actionbar</span></span><br><span class=\"line\">        setSupportActionBar(mToolbar);</span><br></pre></td></tr></table></figure>\n<p>Toolbar中某个控件的点击事件可以使用toolBoar.findViewByid()使用 如：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mToolbar.findViewById(R.id.tv_title).setOnClickListener(<span class=\"keyword\">new</span> View.OnClickListener() &#123;</span><br><span class=\"line\">            <span class=\"meta\">@Override</span></span><br><span class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onClick</span><span class=\"params\">(View v)</span> </span>&#123;</span><br><span class=\"line\">                mToast.setText(<span class=\"string\">\"点击自定义标题\"</span>);</span><br><span class=\"line\">                mToast.show();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br></pre></td></tr></table></figure>\n<p>点击nemu中的第三个的时候进行 弹框 popuwindow</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">    * 弹出自定义的popWindow</span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">popUpMyOverflow</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">       <span class=\"comment\">//获取状态栏高度</span></span><br><span class=\"line\">       Rect frame = <span class=\"keyword\">new</span> Rect();</span><br><span class=\"line\">       getWindow().getDecorView().getWindowVisibleDisplayFrame(frame);</span><br><span class=\"line\">       <span class=\"comment\">//状态栏高度+toolbar的高度</span></span><br><span class=\"line\">       <span class=\"keyword\">int</span> yOffset = frame.top + mToolbar.getHeight();</span><br><span class=\"line\">       <span class=\"keyword\">if</span> (<span class=\"keyword\">null</span> == mPopupWindow) &#123;</span><br><span class=\"line\">           <span class=\"comment\">//初始化PopupWindow的布局</span></span><br><span class=\"line\">           View popView = getLayoutInflater().inflate(R.layout.popular_window, <span class=\"keyword\">null</span>);</span><br><span class=\"line\">           <span class=\"comment\">//popView即popupWindow的布局，ture设置focusAble.</span></span><br><span class=\"line\">           mPopupWindow = <span class=\"keyword\">new</span> PopupWindow(popView,</span><br><span class=\"line\">                   ViewGroup.LayoutParams.WRAP_CONTENT,</span><br><span class=\"line\">                   ViewGroup.LayoutParams.WRAP_CONTENT, <span class=\"keyword\">true</span>);</span><br><span class=\"line\">           <span class=\"comment\">//必须设置BackgroundDrawable后setOutsideTouchable(true)才会有效</span></span><br><span class=\"line\">           mPopupWindow.setBackgroundDrawable(<span class=\"keyword\">new</span> ColorDrawable());</span><br><span class=\"line\">           <span class=\"comment\">//点击外部关闭。</span></span><br><span class=\"line\">           mPopupWindow.setOutsideTouchable(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">           <span class=\"comment\">//设置一个动画。</span></span><br><span class=\"line\">           mPopupWindow.setAnimationStyle(android.R.style.Animation_Dialog);</span><br><span class=\"line\">           <span class=\"comment\">//设置Gravity，让它显示在右上角。</span></span><br><span class=\"line\">           mPopupWindow.showAtLocation(mToolbar, Gravity.RIGHT | Gravity.TOP, <span class=\"number\">0</span>, yOffset);</span><br><span class=\"line\">           <span class=\"comment\">//设置item的点击监听</span></span><br><span class=\"line\"></span><br><span class=\"line\">       &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">           mPopupWindow.showAtLocation(mToolbar, Gravity.RIGHT | Gravity.TOP, <span class=\"number\">0</span>, yOffset);</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n<p>点击结束 popuwindow<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (<span class=\"keyword\">null</span> != mPopupWindow &amp;&amp; mPopupWindow.isShowing()) &#123;</span><br><span class=\"line\">           mPopupWindow.dismiss();</span><br><span class=\"line\">       &#125;</span><br></pre></td></tr></table></figure></p>\n<p><img src=\"http://t1.aixinxi.net/o_1ckregrju1qr11rir1djs1ne6jifa.gif-w.jpg\" alt=\"demo\"></p>\n"}],"PostAsset":[],"PostCategory":[],"PostTag":[],"Tag":[]}}